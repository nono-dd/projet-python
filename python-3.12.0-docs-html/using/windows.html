
<!DOCTYPE html>

<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta property="og:title" content="4. Utilisation de Python sur Windows" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://docs.python.org/3/using/windows.html" />
<meta property="og:site_name" content="Python documentation" />
<meta property="og:description" content="Ce document a pour but de donner une vue d'ensemble des comportements spécifiques à Windows dont vous devriez être au courant si vous utilisez Python sur Microsoft Windows. Contrairement à la plupa..." />
<meta property="og:image" content="https://docs.python.org/3/_static/og-image.png" />
<meta property="og:image:alt" content="Python documentation" />
<meta name="description" content="Ce document a pour but de donner une vue d'ensemble des comportements spécifiques à Windows dont vous devriez être au courant si vous utilisez Python sur Microsoft Windows. Contrairement à la plupa..." />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta name="theme-color" content="#3776ab" />

    <title>4. Utilisation de Python sur Windows &#8212; Documentation Python 3.12.0</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/pydoctheme.css?digest=b37c26da2f7529d09fe70b41c4b2133fe4931a90" />
    <link id="pygments_dark_css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css" href="../_static/pygments_dark.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Recherchez dans Documentation Python 3.12.0"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="À propos de ces documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="5. Utilisation de Python sur un Mac" href="mac.html" />
    <link rel="prev" title="3. Configurer Python" href="configure.html" />
    <link rel="canonical" href="https://docs.python.org/3/using/windows.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="stylesheet" href="../_static/pydoctheme_dark.css" media="(prefers-color-scheme: dark)" id="pydoctheme_dark_css">
    <link rel="shortcut icon" type="image/png" href="../_static/py.svg" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script>
            <script type="text/javascript" src="../_static/search-focus.js"></script>
            <script type="text/javascript" src="../_static/themetoggle.js"></script> 

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <nav class="nav-content" role="navigation">
        <label for="menuToggler" class="toggler__label">
            <span></span>
        </label>
        <span class="nav-items-wrapper">
            <a href="https://www.python.org/" class="nav-logo">
                <img src="../_static/py.svg" alt="Logo"/>
            </a>
            <span class="version_switcher_placeholder"></span>
            <form role="search" class="search" action="../search.html" method="get">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                    <path fill-rule="nonzero" fill="currentColor" d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                </svg>
                <input placeholder="Recherche rapide" aria-label="Recherche rapide" type="search" name="q" />
                <input type="submit" value="Go"/>
            </form>
        </span>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
            
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label>
  <div>
    <h3><a href="../contents.html">Table des matières</a></h3>
    <ul>
<li><a class="reference internal" href="#">4. Utilisation de Python sur Windows</a><ul>
<li><a class="reference internal" href="#the-full-installer">4.1. L'installateur complet</a><ul>
<li><a class="reference internal" href="#installation-steps">4.1.1. Étapes d'installation</a></li>
<li><a class="reference internal" href="#removing-the-max-path-limitation">4.1.2. Suppression de la limitation <code class="docutils literal notranslate"><span class="pre">MAX_PATH</span></code></a></li>
<li><a class="reference internal" href="#installing-without-ui">4.1.3. Installation sans l'interface utilisateur</a></li>
<li><a class="reference internal" href="#installing-without-downloading">4.1.4. Installation sans téléchargement</a></li>
<li><a class="reference internal" href="#modifying-an-install">4.1.5. Modification d'une installation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-microsoft-store-package">4.2. Le paquet Microsoft Store</a><ul>
<li><a class="reference internal" href="#known-issues">4.2.1. Problèmes connus</a><ul>
<li><a class="reference internal" href="#redirection-of-local-data-registry-and-temporary-paths">4.2.1.1. Redirection des données locales, du registre et des chemins temporaires</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#the-nuget-org-packages">4.3. Les paquets <em>nuget.org</em></a></li>
<li><a class="reference internal" href="#the-embeddable-package">4.4. Le paquet intégrable</a><ul>
<li><a class="reference internal" href="#python-application">4.4.1. Application Python</a></li>
<li><a class="reference internal" href="#embedding-python">4.4.2. Embarquer Python</a></li>
</ul>
</li>
<li><a class="reference internal" href="#alternative-bundles">4.5. Paquets alternatifs</a></li>
<li><a class="reference internal" href="#configuring-python">4.6. Configurer Python</a><ul>
<li><a class="reference internal" href="#excursus-setting-environment-variables">4.6.1. Digression : définition des variables d'environnement</a></li>
<li><a class="reference internal" href="#finding-the-python-executable">4.6.2. Trouver l'exécutable Python</a></li>
</ul>
</li>
<li><a class="reference internal" href="#utf-8-mode">4.7. Mode UTF-8</a></li>
<li><a class="reference internal" href="#python-launcher-for-windows">4.8. Lanceur Python pour Windows</a><ul>
<li><a class="reference internal" href="#getting-started">4.8.1. Pour commencer</a><ul>
<li><a class="reference internal" href="#from-the-command-line">4.8.1.1. Depuis la ligne de commande</a></li>
<li><a class="reference internal" href="#virtual-environments">4.8.1.2. Environnements virtuels</a></li>
<li><a class="reference internal" href="#from-a-script">4.8.1.3. À partir d'un script</a></li>
<li><a class="reference internal" href="#from-file-associations">4.8.1.4. À partir d'associations de fichiers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#shebang-lines">4.8.2. Lignes Shebang</a></li>
<li><a class="reference internal" href="#arguments-in-shebang-lines">4.8.3. Arguments dans les lignes <em>shebang</em></a></li>
<li><a class="reference internal" href="#customization">4.8.4. Personnalisation</a><ul>
<li><a class="reference internal" href="#customization-via-ini-files">4.8.4.1. Personnalisation via des fichiers INI</a></li>
<li><a class="reference internal" href="#customizing-default-python-versions">4.8.4.2. Personnalisation des versions Python par défaut</a></li>
</ul>
</li>
<li><a class="reference internal" href="#diagnostics">4.8.5. Diagnostics</a></li>
<li><a class="reference internal" href="#dry-run">4.8.6. Exécution à vide</a></li>
<li><a class="reference internal" href="#install-on-demand">4.8.7. Installation à la demande</a></li>
<li><a class="reference internal" href="#return-codes">4.8.8. Codes de retour</a></li>
</ul>
</li>
<li><a class="reference internal" href="#finding-modules">4.9. Recherche de modules</a></li>
<li><a class="reference internal" href="#additional-modules">4.10. Modules supplémentaires</a><ul>
<li><a class="reference internal" href="#pywin32">4.10.1. PyWin32</a></li>
<li><a class="reference internal" href="#cx-freeze">4.10.2. cx_Freeze</a></li>
</ul>
</li>
<li><a class="reference internal" href="#compiling-python-on-windows">4.11. Compiler Python sous Windows</a></li>
<li><a class="reference internal" href="#other-platforms">4.12. Autres plateformes</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Sujet précédent</h4>
    <p class="topless"><a href="configure.html"
                          title="Chapitre précédent"><span class="section-number">3. </span>Configurer Python</a></p>
  </div>
  <div>
    <h4>Sujet suivant</h4>
    <p class="topless"><a href="mac.html"
                          title="Chapitre suivant"><span class="section-number">5. </span>Utilisation de Python sur un Mac</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Signalement de bogue</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/main/Doc/using/windows.rst"
            rel="nofollow">Voir la source
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Index des modules Python"
             >modules</a> |</li>
        <li class="right" >
          <a href="mac.html" title="5. Utilisation de Python sur un Mac"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="configure.html" title="3. Configurer Python"
             accesskey="P">précédent</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.12.0 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Installation et utilisation de Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">4. </span>Utilisation de Python sur Windows</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Recherche rapide" aria-label="Recherche rapide" type="search" name="q" id="search-box" />
          <input type="submit" value="Go" />
        </form>
    </div>
                     |
                </li>
            <li class="right">
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label> |</li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="using-python-on-windows">
<span id="using-on-windows"></span><h1><span class="section-number">4. </span>Utilisation de Python sur Windows<a class="headerlink" href="#using-python-on-windows" title="Lien permanent vers ce titre">¶</a></h1>
<p>Ce document a pour but de donner une vue d'ensemble des comportements spécifiques à Windows dont vous devriez être au courant si vous utilisez Python sur Microsoft Windows.</p>
<p>Contrairement à la plupart des systèmes Unix, Windows n'inclut pas d'installation de Python par défaut. Pour rendre Python disponible, l’équipe CPython a compilé des installateurs (paquets MSI) pour chaque <a class="reference external" href="https://www.python.org/download/releases/">release</a> depuis plusieurs années. Ces installateurs sont principalement destinés à une installation par utilisateur de Python, avec l’interpréteur et la bibliothèque standard utilisés par un seul utilisateur. Cet installateur peut aussi installer Python pour tous les utilisateurs sur une seule machine et un fichier ZIP séparé est disponible pour intégrer Python dans d'autres applications.</p>
<p>Comme spécifié dans la <span class="target" id="index-76"></span><a class="pep reference external" href="https://peps.python.org/pep-0011/"><strong>PEP 11</strong></a>, une <em>release</em> Python ne gère qu'une plateforme Windows alors que Microsoft considère la plateforme sous support étendu. Ce qui veut dire que Python 3.12 fonctionne sur Windows 8.1 et plus. Si vous avez besoin de compatibilité Windows 7, vous devez utiliser Python 3.8.</p>
<p>Il existe un certain nombre d'installateurs différents disponibles pour Windows, chacun avec certains avantages et inconvénients.</p>
<p><a class="reference internal" href="#windows-full"><span class="std std-ref">L'installateur complet</span></a> contient tous les composants et est la meilleure option pour les développeurs utilisant Python pour tout type de projet.</p>
<p><a class="reference internal" href="#windows-store"><span class="std std-ref">Le paquet Microsoft Store</span></a> est une simple installation de Python qui convient à l'exécution de scripts, de paquets et à l’utilisation d’IDLE ou d'autres environnements de développement. Il nécessite Windows 10 ou supérieur, mais peut être installé en toute sécurité sans endommager d'autres programmes. Il fournit également de nombreuses commandes pratiques pour lancer Python et ses outils.</p>
<p><a class="reference internal" href="#windows-nuget"><span class="std std-ref">Les paquets nuget.org</span></a> sont des installations légères destinées aux systèmes d'intégration continue. Ils peuvent être utilisés pour créer des packages Python ou exécuter des scripts, mais ne sont pas modifiables et n'ont pas d'outils d'interface utilisateur.</p>
<p><a class="reference internal" href="#windows-embeddable"><span class="std std-ref">Le paquet intégrable</span></a> est un paquet minimal de Python approprié pour l'intégration dans une plus grande application.</p>
<section id="the-full-installer">
<span id="windows-full"></span><h2><span class="section-number">4.1. </span>L'installateur complet<a class="headerlink" href="#the-full-installer" title="Lien permanent vers ce titre">¶</a></h2>
<section id="installation-steps">
<h3><span class="section-number">4.1.1. </span>Étapes d'installation<a class="headerlink" href="#installation-steps" title="Lien permanent vers ce titre">¶</a></h3>
<p>Quatre installateurs Python 3.12 sont disponibles au téléchargement — deux de chaque pour les versions 32-bit et 64-bit de l'interpréteur. L'<strong>installateur web</strong> est léger, et téléchargera automatiquement les composants nécessaires. L'<strong>installateur hors-ligne</strong> inclut les composants nécessaires pour une installation par défaut et n'a besoin d'une connexion internet que pour des fonctionnalités optionnelles. Voir <a class="reference internal" href="#install-layout-option"><span class="std std-ref">Installation sans téléchargement</span></a> pour d'autres moyens d’éviter des téléchargements durant l'installation.</p>
<p>Après avoir lancé l'installateur, deux options s'affichent :</p>
<img alt="../_images/win_installer.png" src="../_images/win_installer.png" />
<p>Si vous sélectionnez « Installer Maintenant » (<code class="docutils literal notranslate"><span class="pre">Install</span> <span class="pre">Now</span></code>) :</p>
<ul class="simple">
<li><p>Vous n'aurez <em>pas</em> besoin d'avoir les droits d'administrateur (sauf si une mise à jour de la bibliothèque d'exécution C est nécessaire ou si vous installez le <a class="reference internal" href="#launcher"><span class="std std-ref">Lanceur Python pour Windows</span></a> pour tous les utilisateurs)</p></li>
<li><p>Python sera installé dans votre répertoire utilisateur</p></li>
<li><p>Le <a class="reference internal" href="#launcher"><span class="std std-ref">Lanceur Python pour Windows</span></a> sera installé suivant l'option en bas de la première page</p></li>
<li><p>La bibliothèque standard, la suite de tests, le lanceur et <em>pip</em> seront installés</p></li>
<li><p>Si l'option est cochée, le dossier d'installation sera ajouté à votre <span class="target" id="index-77"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code></p></li>
<li><p>Les raccourcis ne seront visibles que pour l'utilisateur actuel</p></li>
</ul>
<p>Sélectionner « Personnaliser l’installation » (<code class="docutils literal notranslate"><span class="pre">Customize</span> <span class="pre">installation</span></code>) vous permettra de sélectionner les fonctionnalités à installer, le chemin d'installation et d'autres options ou des options post-installation. Pour installer des binaires ou symboles de débogage, vous devrez utiliser cette option.</p>
<p>Pour effectuer une installation pour tous les utilisateurs, vous devez sélectionner « Personnaliser l’installation ». Dans ce cas :</p>
<ul class="simple">
<li><p>Vous pouvez avoir à donner une approbation ou des identifiants administrateur</p></li>
<li><p>Python sera installé dans le dossier <em>Program Files</em></p></li>
<li><p>Le <a class="reference internal" href="#launcher"><span class="std std-ref">Lanceur Python pour Windows</span></a> sera installé dans le dossier <em>Windows</em></p></li>
<li><p>Des fonctionnalités optionnelles peuvent être sélectionnées durant l'installation</p></li>
<li><p>La bibliothèque standard peut être pré-compilée en code intermédiaire (<em>bytecode</em> en anglais)</p></li>
<li><p>Si sélectionné, le chemin d'installation sera ajouté au <span class="target" id="index-78"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> système</p></li>
<li><p>Les raccourcis sont disponibles pour tous les utilisateurs</p></li>
</ul>
</section>
<section id="removing-the-max-path-limitation">
<span id="max-path"></span><h3><span class="section-number">4.1.2. </span>Suppression de la limitation <code class="docutils literal notranslate"><span class="pre">MAX_PATH</span></code><a class="headerlink" href="#removing-the-max-path-limitation" title="Lien permanent vers ce titre">¶</a></h3>
<p>Historiquement les chemins sous Windows étaient limités 260 caractères. Cela impliquait que les chemins plus longs n'étaient pas résolus, et seraient une cause d'erreurs.</p>
<p>Dans les dernières versions de Windows, cette limitation peut être étendue à approximativement 32.000 caractères. Votre administrateur devra activer la stratégie de groupe « <strong>Enable Win32 long paths</strong> » ou mettre la valeur de <code class="docutils literal notranslate"><span class="pre">LongPathsEnabled</span></code> à <code class="docutils literal notranslate"><span class="pre">1</span></code> dans de registre à <code class="docutils literal notranslate"><span class="pre">HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem</span></code>.</p>
<p>Ceci permet à la fonction <a class="reference internal" href="../library/functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a>, au module <a class="reference internal" href="../library/os.html#module-os" title="os: Miscellaneous operating system interfaces."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code></a> et à la plupart des autres fonctionnalités utilisant des chemins d'accepter et de renvoyer des chemins plus longs que 260 caractères.</p>
<p>Après avoir changé l'option si-dessus, aucune configuration supplémentaire n'est requise.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Modifié dans la version 3.6: </span>Gestion des chemins longs.</p>
</div>
</section>
<section id="installing-without-ui">
<span id="install-quiet-option"></span><h3><span class="section-number">4.1.3. </span>Installation sans l'interface utilisateur<a class="headerlink" href="#installing-without-ui" title="Lien permanent vers ce titre">¶</a></h3>
<p>Toutes les options disponibles dans l'installateur graphique peuvent aussi être spécifiées dans l'invite de commande, permettant à des installateurs scriptés de répliquer une installation sur plusieurs machines sans interaction humaine. Ces options peuvent aussi être ajoutées sans enlever l'interface graphique pour changer les valeurs par défauts.</p>
<p>The following options (found by executing the installer with <code class="docutils literal notranslate"><span class="pre">/?</span></code>) can be
passed into the installer:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 27%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Nom</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>/passive</p></td>
<td><p>to display progress without requiring user interaction</p></td>
</tr>
<tr class="row-odd"><td><p>/quiet</p></td>
<td><p>to install/uninstall without displaying any UI</p></td>
</tr>
<tr class="row-even"><td><p>/simple</p></td>
<td><p>to prevent user customization</p></td>
</tr>
<tr class="row-odd"><td><p>/uninstall</p></td>
<td><p>to remove Python (without confirmation)</p></td>
</tr>
<tr class="row-even"><td><p>/layout [directory]</p></td>
<td><p>to pre-download all components</p></td>
</tr>
<tr class="row-odd"><td><p>/log [filename]</p></td>
<td><p>to specify log files location</p></td>
</tr>
</tbody>
</table>
<p>Toutes les autres options sont passées sous la forme <code class="docutils literal notranslate"><span class="pre">name=value</span></code>, ou <code class="docutils literal notranslate"><span class="pre">value</span></code> est normalement soit <code class="docutils literal notranslate"><span class="pre">0</span></code> pour désactiver une fonctionnalité, soit <code class="docutils literal notranslate"><span class="pre">1</span></code> pour activer une fonctionnalité, soit un chemin. Ci-dessous la liste complète des options.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 42%" />
<col style="width: 29%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Nom</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Valeur par défaut</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>InstallAllUsers</p></td>
<td><p>Effectue une installation pour tous les utilisateurs.</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>TargetDir</p></td>
<td><p>Le dossier d'installation</p></td>
<td><p>Sélection basée sur InstallAllUsers</p></td>
</tr>
<tr class="row-even"><td><p>DefaultAllUsersTargetDir</p></td>
<td><p>Le dossier d'installation par défaut pour les installations pour tous les utilisateurs</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">%ProgramFiles%\Python</span> <span class="pre">X.Y</span></code> ou <code class="file docutils literal notranslate"><span class="pre">%ProgramFiles(x86)%\Python</span> <span class="pre">X.Y</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>DefaultJustForMeTargetDir</p></td>
<td><p>Le dossier d'installation par défaut pour des installations juste pour soi</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">%LocalAppData%\Programs\Python\PythonXY</span></code> ou <code class="file docutils literal notranslate"><span class="pre">%LocalAppData%\Programs\Python\PythonXY-32</span></code> ou <code class="file docutils literal notranslate"><span class="pre">%LocalAppData%\Programs\Python\PythonXY-64</span></code></p></td>
</tr>
<tr class="row-even"><td><p>DefaultCustomTargetDir</p></td>
<td><p>Le dossier d'installation personnalisé par défaut affiché par l'interface utilisateur</p></td>
<td><p>(vide)</p></td>
</tr>
<tr class="row-odd"><td><p>AssociateFiles</p></td>
<td><p>Crée les associations de fichiers si le lanceur est aussi installé.</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>CompileAll</p></td>
<td><p>Compile tous les fichiers <code class="docutils literal notranslate"><span class="pre">.py</span></code> en <code class="docutils literal notranslate"><span class="pre">.pyc</span></code>.</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>PrependPath</p></td>
<td><p>Ajoute les dossiers <code class="docutils literal notranslate"><span class="pre">install</span></code> et <code class="docutils literal notranslate"><span class="pre">Scripts</span></code> à <span class="target" id="index-79"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> et assigne <code class="docutils literal notranslate"><span class="pre">.PY</span></code> à <span class="target" id="index-80"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATHEXT</span></code></p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>AppendPath</p></td>
<td><p>Ajoute les dossiers <code class="docutils literal notranslate"><span class="pre">install</span></code> et <code class="docutils literal notranslate"><span class="pre">Scripts</span></code> à <span class="target" id="index-81"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> et assigne <code class="docutils literal notranslate"><span class="pre">.PY</span></code> à <span class="target" id="index-82"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATHEXT</span></code></p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>Shortcuts</p></td>
<td><p>Crée des raccourcis pour l'interpréteur, la documentation et IDLE si installé.</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>Include_doc</p></td>
<td><p>Installe le manuel Python</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>Include_debug</p></td>
<td><p>Installe les binaires de débogage</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>Include_dev</p></td>
<td><p>Installe les en-têtes et les bibliothèques de développement. L'omission de cette étape peut conduire à une installation inutilisable.</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>Include_exe</p></td>
<td><p>Installer <code class="file docutils literal notranslate"><span class="pre">python.exe</span></code> et les fichiers associés. L'omission de cette étape peut conduire à une installation inutilisable.</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>Include_launcher</p></td>
<td><p>Installe le <a class="reference internal" href="#launcher"><span class="std std-ref">Lanceur Python pour Windows</span></a>.</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>InstallLauncherAllUsers</p></td>
<td><p>Installe le lanceur pour tous les utilisateurs. Nécessite que <code class="docutils literal notranslate"><span class="pre">Include_launcher</span></code> soit mis à <code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>Include_lib</p></td>
<td><p>Installe la bibliothèque standard et les modules d'extension. L'omission de cette étape peut conduire à une installation inutilisable.</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>Include_pip</p></td>
<td><p>Installe <code class="docutils literal notranslate"><span class="pre">pip</span></code> et <code class="docutils literal notranslate"><span class="pre">setuptools</span></code></p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>Include_symbols</p></td>
<td><p>Installe les symboles de débogage (<code class="docutils literal notranslate"><span class="pre">*.pdb</span></code>)</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>Include_tcltk</p></td>
<td><p>Installe Tcl/Tk et IDLE</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>Include_test</p></td>
<td><p>Installe la suite de tests de la bibliothèque standard</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>Include_tools</p></td>
<td><p>Installe les scripts utilitaires</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>LauncherOnly</p></td>
<td><p>Installe seulement le lanceur. Ceci écrasera la plupart des autres options.</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>SimpleInstall</p></td>
<td><p>Désactive la plupart de l'interface d'installation</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>SimpleInstallDescription</p></td>
<td><p>Un message personnalisé à afficher quand l'interface d'installation simplifiée est utilisée.</p></td>
<td><p>(vide)</p></td>
</tr>
</tbody>
</table>
<p>Par exemple, pour installer silencieusement Python sur tout le système, vous pourriez utilisez la commande suivante (depuis une invite de commande administrateur) :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python-3.9.0.exe /quiet InstallAllUsers=1 PrependPath=1 Include_test=0
</pre></div>
</div>
<p>Pour permettre à l'utilisateur d'installer facilement une copie de Python sans la suite de tests, vous pouvez proposer un raccourci avec la commande suivante. Cela affichera une page initiale simplifiée et interdira la personnalisation :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python-3.9.0.exe InstallAllUsers=0 Include_launcher=0 Include_test=0
    SimpleInstall=1 SimpleInstallDescription=&quot;Just for me, no test suite.&quot;
</pre></div>
</div>
<p>(Notez qu'omettre le lanceur omet aussi les associations de fichiers, et n'est recommandé que pour les installations par utilisateur quand il y a aussi une installation complète sur le système qui a inclus de lanceur.)</p>
<p>Les options listées ci-dessus peuvent aussi être passées dans un fichier nommé <code class="docutils literal notranslate"><span class="pre">unattend.xml</span></code> à côté de l'exécutable. Ce fichier spécifie une liste d'options et de valeurs. Quand une valeur est donnée en tant qu'attribut, elle sera convertie en nombre si possible. Les valeurs données en élément texte sont toujours laissées en tant que chaînes de caractères. Ce fichier d'exemple propose les mêmes options que l'exemple précédent :</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;Options&gt;</span>
<span class="w">    </span><span class="nt">&lt;Option</span><span class="w"> </span><span class="na">Name=</span><span class="s">&quot;InstallAllUsers&quot;</span><span class="w"> </span><span class="na">Value=</span><span class="s">&quot;no&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;Option</span><span class="w"> </span><span class="na">Name=</span><span class="s">&quot;Include_launcher&quot;</span><span class="w"> </span><span class="na">Value=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;Option</span><span class="w"> </span><span class="na">Name=</span><span class="s">&quot;Include_test&quot;</span><span class="w"> </span><span class="na">Value=</span><span class="s">&quot;no&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;Option</span><span class="w"> </span><span class="na">Name=</span><span class="s">&quot;SimpleInstall&quot;</span><span class="w"> </span><span class="na">Value=</span><span class="s">&quot;yes&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;Option</span><span class="w"> </span><span class="na">Name=</span><span class="s">&quot;SimpleInstallDescription&quot;</span><span class="nt">&gt;</span>Just<span class="w"> </span>for<span class="w"> </span>me,<span class="w"> </span>no<span class="w"> </span>test<span class="w"> </span>suite<span class="nt">&lt;/Option&gt;</span>
<span class="nt">&lt;/Options&gt;</span>
</pre></div>
</div>
</section>
<section id="installing-without-downloading">
<span id="install-layout-option"></span><h3><span class="section-number">4.1.4. </span>Installation sans téléchargement<a class="headerlink" href="#installing-without-downloading" title="Lien permanent vers ce titre">¶</a></h3>
<p>Comme certaines fonctionnalités de Python ne sont pas incluses dans l'installateur initial, la sélection de certaines de ces fonctionnalités peut demander une connexion Internet. Pour éviter ce besoin, tous les composants nécessaires peuvent être téléchargés à la demande pour créer un agencement (<em>layout</em>) complet qui ne demandera plus de connexion Internet indépendamment des options sélectionnées. Notez que ce téléchargement peut être plus gros que nécessaire, mais lorsqu'un un grand nombre d'installations doivent être faites, il est très utile d'avoir une copie locale.</p>
<p>Exécutez la commande suivante depuis l'invite de commande pour télécharger tous les fichiers requis possibles. Rappelez-vous de remplacer <code class="docutils literal notranslate"><span class="pre">python-3.9.0.exe</span></code> par le nom réel de votre installateur et de créer des agencements avec leurs propres dossiers pour éviter les conflits entre fichiers du même nom.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python-3.9.0.exe /layout [optional target directory]
</pre></div>
</div>
<p>Vous pouvez aussi spécifier l'option <code class="docutils literal notranslate"><span class="pre">/quiet</span></code> pour masquer la progression.</p>
</section>
<section id="modifying-an-install">
<h3><span class="section-number">4.1.5. </span>Modification d'une installation<a class="headerlink" href="#modifying-an-install" title="Lien permanent vers ce titre">¶</a></h3>
<p>Une fois Python installé, vous pouvez ajouter ou supprimer des fonctionnalités depuis l'outil Windows <em>Programs and Features</em> (Programmes et Fonctionnalités). Sélectionnez la ligne <code class="docutils literal notranslate"><span class="pre">Python</span></code> et choisissez « Uninstall/Change » (Désinstaller/Modifier) pour ouvrir l'installateur en mode maintenance.</p>
<p>« Modify » vous permet d'ajouter ou d'enlever des fonctionnalités en modifiant les cases à cocher (les cases inchangées n'installeront ou ne supprimeront rien). Certaines options ne peuvent pas être modifiées dans ce mode, comme le dossier d'installation. Pour modifier ces options, vous devrez ré-installer Python entièrement.</p>
<p>« Repair » vérifiera tous les fichiers qui doivent être installés avec les paramètres actuels le sont, et remplacera ceux qui ont étés supprimés ou modifiés.</p>
<p>« Uninstall » désinstallera Python entièrement, à l'exception du <a class="reference internal" href="#launcher"><span class="std std-ref">Lanceur Python pour Windows</span></a> qui à sa propre ligne dans <em>Programs and Features</em>.</p>
</section>
</section>
<section id="the-microsoft-store-package">
<span id="windows-store"></span><h2><span class="section-number">4.2. </span>Le paquet Microsoft Store<a class="headerlink" href="#the-microsoft-store-package" title="Lien permanent vers ce titre">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">Nouveau dans la version 3.7.2.</span></p>
</div>
<p>Le paquet <em>Microsoft Store</em> est un interpréteur Python facilement installable qui est destiné principalement à une utilisation interactive, par exemple, par des étudiants.</p>
<p>Pour installer le paquet, assurez-vous d'avoir les dernières mises à jour de Windows 10 et de chercher dans l'application <em>Microsoft Store</em> “Python 3.12”. Assurez-vous que l'application que vous sélectionnez est publiée par la <em>Python Software Foundation</em> et installez-la.</p>
<div class="admonition warning">
<p class="admonition-title">Avertissement</p>
<p>Python sera toujours disponible gratuitement sur le Microsoft Store. Si vous êtes invité à payer, vous n'avez pas sélectionné le bon paquet.</p>
</div>
<p>Après l'installation, Python peut être lancé depuis le menu Démarrer. Il est aussi disponible à partir de n'importe quelle invite de commande ou session PowerShell en entrant <code class="docutils literal notranslate"><span class="pre">python</span></code>. De plus, pip et IDLE peuvent être utilisés en entrant <code class="docutils literal notranslate"><span class="pre">pip</span></code> ou <code class="docutils literal notranslate"><span class="pre">idle</span></code> . IDLE peut également être trouvé dans le menu Démarrer.</p>
<p>Les trois commandes sont également disponibles avec les suffixes de numéro de version, par exemple, <code class="docutils literal notranslate"><span class="pre">python3.exe</span></code> et <code class="docutils literal notranslate"><span class="pre">python3.x.exe</span></code> ainsi que <code class="docutils literal notranslate"><span class="pre">python.exe</span></code> (ou <code class="docutils literal notranslate"><span class="pre">3.x</span></code> est la version spécifique que vous souhaitez lancer, tel que 3.12). Depuis le « menu Démarrer », ouvrez « Alias d'exécution d'application » (ou « <em>Manage App Execution Aliases</em> » en anglais) pour choisir quelle version de Python est associée à quelle commande. Il est recommandé de s'assurer que <code class="docutils literal notranslate"><span class="pre">pip</span></code> et <code class="docutils literal notranslate"><span class="pre">idle</span></code> utilisent la même version de Python que la commande <code class="docutils literal notranslate"><span class="pre">python</span></code>.</p>
<p>Les environnements virtuels peuvent être créés avec <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">venv</span></code> et activés et utilisés normalement.</p>
<p>Si vous avez installé une autre version de Python et l'avez ajoutée à votre variable d'environnement <code class="docutils literal notranslate"><span class="pre">PATH</span></code>, elle sera disponible en tant que <code class="docutils literal notranslate"><span class="pre">python.exe</span></code> plutôt que celle de la boutique Microsoft. Pour accéder à la nouvelle installation, utilisez <code class="docutils literal notranslate"><span class="pre">python3.exe</span></code> ou <code class="docutils literal notranslate"><span class="pre">python3.x.exe</span></code>.</p>
<p>Le lanceur <code class="docutils literal notranslate"><span class="pre">py.exe</span></code> va détecter cette installation Python, mais préfèrera les versions de l'installateur traditionnel.</p>
<p>Pour supprimer Python, depuis les paramètres Windows ouvrez <em>Apps and Features</em> (Applications et Fonctionnalités), ou bien trouvez Python dans le menu Démarrer et cliquez avec le bouton droit pour sélectionner désinstaller. La désinstallation supprimera tous les paquets que vous avez installés directement dans cette installation Python, mais ne supprimera aucun environnement virtuel</p>
<section id="known-issues">
<h3><span class="section-number">4.2.1. </span>Problèmes connus<a class="headerlink" href="#known-issues" title="Lien permanent vers ce titre">¶</a></h3>
<section id="redirection-of-local-data-registry-and-temporary-paths">
<h4><span class="section-number">4.2.1.1. </span>Redirection des données locales, du registre et des chemins temporaires<a class="headerlink" href="#redirection-of-local-data-registry-and-temporary-paths" title="Lien permanent vers ce titre">¶</a></h4>
<p>En raison de restrictions sur les applications Microsoft Store, les scripts Python peuvent ne pas avoir un accès en écriture complet aux emplacements partagés tels que <span class="target" id="index-83"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">TEMP</span></code> et le registre. Au lieu de cela, il écrira sur une copie privée. Si vos scripts doivent modifier les emplacements partagés, vous devrez installer le programme d'installation complet.</p>
<p>At runtime, Python will use a private copy of well-known Windows folders and the registry.
For example, if the environment variable <span class="target" id="index-8"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">%APPDATA%</span></code> is <code class="file docutils literal notranslate"><span class="pre">c:\Users\&lt;user&gt;\AppData\</span></code>,
then when writing to <code class="file docutils literal notranslate"><span class="pre">C:\Users\&lt;user&gt;\AppData\Local</span></code> will write to
<code class="file docutils literal notranslate"><span class="pre">C:\Users\&lt;user&gt;\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.8_qbz5n2kfra8p0\LocalCache\Local\</span></code>.</p>
<p>When reading files, Windows will return the file from the private folder, or if that does not exist, the
real Windows directory. For example reading <code class="file docutils literal notranslate"><span class="pre">C:\Windows\System32</span></code> returns the contents of <code class="file docutils literal notranslate"><span class="pre">C:\Windows\System32</span></code>
plus the contents of <code class="file docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files\WindowsApps\package_name\VFS\SystemX86</span></code>.</p>
<p>Vous pouvez trouver le chemin réel de n'importe quel fichier existant en utilisant <a class="reference internal" href="../library/os.path.html#os.path.realpath" title="os.path.realpath"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.path.realpath()</span></code></a> :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_file</span> <span class="o">=</span> <span class="s1">&#39;C:</span><span class="se">\\</span><span class="s1">Users</span><span class="se">\\</span><span class="s1">example</span><span class="se">\\</span><span class="s1">AppData</span><span class="se">\\</span><span class="s1">Local</span><span class="se">\\</span><span class="s1">test.txt&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">test_file</span><span class="p">)</span>
<span class="go">&#39;C:\\Users\\example\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.8_qbz5n2kfra8p0\\LocalCache\\Local\\test.txt&#39;</span>
</pre></div>
</div>
<p>Lors de l'écriture dans le registre Windows, les comportements suivants existent :</p>
<ul class="simple">
<li><p>Reading from <code class="docutils literal notranslate"><span class="pre">HKLM\\Software</span></code> is allowed and results are merged with the <code class="file docutils literal notranslate"><span class="pre">registry.dat</span></code> file in the package.</p></li>
<li><p>Writing to <code class="docutils literal notranslate"><span class="pre">HKLM\\Software</span></code> is not allowed if the corresponding key/value exists, i.e. modifying existing keys.</p></li>
<li><p>Writing to <code class="docutils literal notranslate"><span class="pre">HKLM\\Software</span></code> is allowed as long as a corresponding key/value does not exist in the package
and the user has the correct access permissions.</p></li>
</ul>
<p>Pour en savoir plus sur ces limitations, consultez la documentation de Microsoft à propos des applications avec une confiance totale, actuellement disponible sur <a class="reference external" href="https://docs.microsoft.com/fr-fr/windows/msix/desktop/desktop-to-uwp-behind-the-scenes">docs.microsoft.com/fr-fr/windows/msix/desktop/desktop-to-uwp-behind-the-scenes</a></p>
</section>
</section>
</section>
<section id="the-nuget-org-packages">
<span id="windows-nuget"></span><h2><span class="section-number">4.3. </span>Les paquets <em>nuget.org</em><a class="headerlink" href="#the-nuget-org-packages" title="Lien permanent vers ce titre">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">Nouveau dans la version 3.5.2.</span></p>
</div>
<p>Le paquet <em>nuget.org</em> est un environnement Python de taille réduite destiné à être utilisé sur des systèmes d'intégration et de génération continus qui n'ont pas Python d'installé. Alors que <em>nuget</em> est “le gestionnaire de package pour .NET”, il fonctionne également parfaitement bien pour les packages contenant des outils de <em>build-time</em>.</p>
<p>Visitez <a class="reference external" href="https://www.nuget.org/">nuget.org</a> pour les informations les plus à jour sur l'utilisation de <em>nuget</em>. Ce qui suit est un résumé suffisant pour les développeurs Python.</p>
<p>L'outil de ligne de commande <code class="docutils literal notranslate"><span class="pre">nuget.exe</span></code> peut être téléchargé directement à partir de <code class="docutils literal notranslate"><span class="pre">https://aka.ms/nugetclidl</span></code>, par exemple, à l'aide de <em>curl</em> ou de PowerShell. Avec l'outil, la dernière version de Python pour les machines 64 bits ou 32 bits est installée à l'aide de :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>nuget.exe install python -ExcludeVersion -OutputDirectory .
nuget.exe install pythonx86 -ExcludeVersion -OutputDirectory .
</pre></div>
</div>
<p>Pour sélectionner une version particulière, ajoutez un <code class="docutils literal notranslate"><span class="pre">-Version</span> <span class="pre">3.x.y</span></code>. Le répertoire d'installation être modifié (de <code class="docutils literal notranslate"><span class="pre">.</span></code>), et le paquet sera installé dans un sous-répertoire. Par défaut, le sous-répertoire est nommé comme le paquet, et sans l'option <code class="docutils literal notranslate"><span class="pre">-ExcludeVersion</span></code>, ce nom inclura la version spécifique installée. À l'intérieur du sous-répertoire se trouve un répertoire <code class="docutils literal notranslate"><span class="pre">tools</span></code> qui contient l'installation Python :</p>
<div class="highlight-doscon notranslate"><div class="highlight"><pre><span></span><span class="go"># Without -ExcludeVersion</span>
<span class="gp">&gt;</span> .\python.3.5.2\tools\python.exe -V
<span class="go">Python 3.5.2</span>

<span class="go"># With -ExcludeVersion</span>
<span class="gp">&gt;</span> .\python\tools\python.exe -V
<span class="go">Python 3.5.2</span>
</pre></div>
</div>
<p>En général, les paquets <em>nuget</em> ne peuvent pas êtres mis à jour et les versions plus récentes doivent être installées côte à côte et référencées à l'aide du chemin d'accès complet. Vous pouvez également supprimer le répertoire du paquet manuellement et l'installer à nouveau. De nombreux systèmes CI le feront automatiquement s'ils ne conservent pas les fichiers entre les <em>builds</em>.</p>
<p>À côté du répertoire <code class="docutils literal notranslate"><span class="pre">tools</span></code> est un répertoire <code class="docutils literal notranslate"><span class="pre">build\native</span></code>. Il contient un fichier de propriétés MSBuild <code class="docutils literal notranslate"><span class="pre">python.props</span></code> qui peut être utilisé dans un projet C++ pour référencer l'installation de Python. L'inclusion des paramètres utilisera automatiquement les en-têtes et les bibliothèques d'importation dans votre <em>build</em>.</p>
<p>Les pages d’information sur <em>nuget.org</em> sont <a class="reference external" href="https://www.nuget.org/packages/python">www.nuget.org/packages/python</a> pour la version 64 Bits et <a class="reference external" href="https://www.nuget.org/packages/pythonx86">www.nuget.org/packages/pythonx86</a> pour la version 32 Bits.</p>
</section>
<section id="the-embeddable-package">
<span id="windows-embeddable"></span><h2><span class="section-number">4.4. </span>Le paquet intégrable<a class="headerlink" href="#the-embeddable-package" title="Lien permanent vers ce titre">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">Nouveau dans la version 3.5.</span></p>
</div>
<p>La distribution embarquée est un fichier ZIP contenant un environnement Python minimal. Il est destiné à agir dans le cadre d'une autre application, plutôt que d'être directement accessible par les utilisateurs finaux.</p>
<p>When extracted, the embedded distribution is (almost) fully isolated from the
user's system, including environment variables, system registry settings, and
installed packages. The standard library is included as pre-compiled and
optimized <code class="docutils literal notranslate"><span class="pre">.pyc</span></code> files in a ZIP, and <code class="docutils literal notranslate"><span class="pre">python3.dll</span></code>, <code class="docutils literal notranslate"><span class="pre">python37.dll</span></code>,
<code class="docutils literal notranslate"><span class="pre">python.exe</span></code> and <code class="docutils literal notranslate"><span class="pre">pythonw.exe</span></code> are all provided. Tcl/tk (including all
dependents, such as Idle), pip and the Python documentation are not included.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>La distribution intégrée n'inclut pas le <a class="reference external" href="https://docs.microsoft.com/fr-fr/cpp/windows/latest-supported-vc-redist#visual-studio-2015-2017-2019-and-2022">Microsoft C Runtime</a> et il est de la responsabilité de l'installateur d'application de le fournir. Le <em>runtime</em> peut avoir déjà été installé sur le système d'un utilisateur précédemment ou automatiquement via Windows Update, et peut être détecté en trouvant <code class="docutils literal notranslate"><span class="pre">ucrtbase.dll</span></code> dans le répertoire système.</p>
</div>
<p>Les paquets tiers doivent être installés par le programme d'installation de l'application parallèlement à la distribution embarquée. L'utilisation de pip pour gérer les dépendances comme pour une installation Python régulière n'est pas prise en charge avec cette distribution, mais il reste possible d'inclure et d'utiliser pip pour les mises à jour automatiques. En général, les paquets tiers doivent être traités dans le cadre de l'application (<em>vendoring</em>) afin que le développeur puisse assurer la compatibilité avec les versions plus récentes avant de fournir des mises à jour aux utilisateurs.</p>
<p>Les deux cas d'utilisation recommandés pour cette distribution sont décrits ci-dessous.</p>
<section id="python-application">
<h3><span class="section-number">4.4.1. </span>Application Python<a class="headerlink" href="#python-application" title="Lien permanent vers ce titre">¶</a></h3>
<p>Une application écrite en Python n'exige pas nécessairement que les utilisateurs soient au courant de ce fait. La distribution embarquée peut être utilisée dans ce cas pour inclure une version privée de Python dans un package d'installation. Selon la façon dont il devrait être transparent (ou inversement, à quel point il doit paraître professionnel), il y a deux options.</p>
<p>L'utilisation d'un exécutable spécialisé en tant que lanceur nécessite de la programmation, mais fournit l'expérience la plus transparente pour les utilisateurs. Avec un lanceur personnalisé, il n'y a pas d'indications évidentes que le programme s'exécute sur Python : les icônes peuvent être personnalisées, les informations de la société et de la version peuvent être spécifiées, et les associations de fichiers se comportent correctement. Dans la plupart des cas, un lanceur personnalisé devrait simplement pouvoir appeler <code class="docutils literal notranslate"><span class="pre">Py_Main</span></code> avec une ligne de commande codée en dur.</p>
<p>L'approche la plus simple consiste à fournir un fichier batch ou un raccourci généré qui appelle directement le <code class="docutils literal notranslate"><span class="pre">python.exe</span></code> ou <code class="docutils literal notranslate"><span class="pre">pythonw.exe</span></code> avec les arguments de ligne de commande requis. Dans ce cas, l'application semble être Python et non son nom réel, et les utilisateurs peuvent avoir du mal à le distinguer des autres processus Python en cours d'exécution ou des associations de fichiers.</p>
<p>Avec cette dernière approche, les packages doivent être installés en tant que répertoires à côté de l'exécutable Python pour s'assurer qu'ils soient visibles par Python. Avec le lanceur spécialisé, les paquets peuvent être installés dans d'autres emplacements car il y a une possibilité de spécifier le chemin de recherche avant de lancer l'application.</p>
</section>
<section id="embedding-python">
<h3><span class="section-number">4.4.2. </span>Embarquer Python<a class="headerlink" href="#embedding-python" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les applications écrites en code natif nécessitent souvent une certaine forme de langage de <em>scripting</em>, et la distribution Python intégrée peut être utilisée à cette fin. En général, la majorité de l'application est dans le code natif, qui soit invoque <code class="docutils literal notranslate"><span class="pre">python.exe</span></code> soit utilise directement <code class="docutils literal notranslate"><span class="pre">python3.dll</span></code>. Dans les deux cas, l'extraction de la distribution intégrée dans un sous-répertoire de l'installation de l'application est suffisante pour fournir un interpréteur Python chargeable.</p>
<p>Comme pour l'utilisation de l'application, les paquets peuvent être installés sur n'importe quel emplacement, car il est possible de spécifier des chemins de recherche avant d'initialiser l'interpréteur. Sinon, il n'y a pas de différences fondamentales entre l'utilisation de la distribution embarquée et une installation classique.</p>
</section>
</section>
<section id="alternative-bundles">
<h2><span class="section-number">4.5. </span>Paquets alternatifs<a class="headerlink" href="#alternative-bundles" title="Lien permanent vers ce titre">¶</a></h2>
<p>À part la distribution standard CPython, il y a des paquets modifiés incluant des fonctionnalités additionnelles. La liste qui suit est une liste de versions populaires et de leurs fonctionnalités principales :</p>
<dl>
<dt><a class="reference external" href="https://www.activestate.com/products/python/">ActivePython</a></dt><dd><p>Installateur avec une compatibilité multiplateforme, de la documentation, et <em>PyWin32</em></p>
</dd>
<dt><a class="reference external" href="https://www.anaconda.com/download/">Anaconda</a></dt><dd><p>Des modules scientifiques populaires (comme <em>numpy</em>, <em>scipy</em> et <em>pandas</em>) et le gestionnaire de paquets <code class="docutils literal notranslate"><span class="pre">conda</span></code>.</p>
</dd>
<dt><a class="reference external" href="https://www.enthought.com/edm/">Enthought Deployment Manager</a></dt><dd><p>« L’environnement Python et gestionnaire de paquets de nouvelle génération ».</p>
<p>Auparavant, Enthought fournissait Canopy, mais celui-ci est <a class="reference external" href="https://support.enthought.com/hc/en-us/articles/360038600051-Canopy-GUI-end-of-life-transition-to-the-Enthought-Deployment-Manager-EDM-and-Visual-Studio-Code">arrivé en fin de vie en 2016</a>.</p>
</dd>
<dt><a class="reference external" href="https://winPython.github.io/">WinPython</a></dt><dd><p>Distribution spécifique à Windows avec des paquets scientifiques pré-compilés et des outils pour construire des paquets.</p>
</dd>
</dl>
<p>Notez que ces paquets peuvent ne pas inclure la dernière version de Python ou d'autres bibliothèques, et ne sont pas maintenus ni supportés par les <em>core devs</em> Python.</p>
</section>
<section id="configuring-python">
<h2><span class="section-number">4.6. </span>Configurer Python<a class="headerlink" href="#configuring-python" title="Lien permanent vers ce titre">¶</a></h2>
<p>Pour exécuter Python confortablement à partir d'une invite de commandes, vous pouvez envisager de modifier certaines variables d'environnement par défaut dans Windows. Bien que l'installateur offre une option pour configurer les variables <code class="docutils literal notranslate"><span class="pre">PATH</span></code> et <code class="docutils literal notranslate"><span class="pre">PATHEXT</span></code> pour vous, ce n'est fiable que pour une seule installation à l'échelle du système. Si vous utilisez régulièrement plusieurs versions de Python, pensez à utiliser le <a class="reference internal" href="#launcher"><span class="std std-ref">Lanceur Python pour Windows</span></a>.</p>
<section id="excursus-setting-environment-variables">
<span id="setting-envvars"></span><h3><span class="section-number">4.6.1. </span>Digression : définition des variables d'environnement<a class="headerlink" href="#excursus-setting-environment-variables" title="Lien permanent vers ce titre">¶</a></h3>
<p>Windows permet de configurer les variables d'environnement de façon permanente au niveau de l'utilisateur et du système, ou temporairement dans une invite de commandes.</p>
<p>Pour définir temporairement les variables d'environnement, ouvrez l'invite de commandes et utilisez la commande <strong class="command">set</strong> :</p>
<div class="highlight-doscon notranslate"><div class="highlight"><pre><span></span><span class="gp">C:\&gt;</span><span class="k">set</span> <span class="nv">PATH</span><span class="p">=</span>C:\Program Files\Python 3.9;<span class="nv">%PATH%</span>
<span class="gp">C:\&gt;</span><span class="k">set</span> <span class="nv">PYTHONPATH</span><span class="p">=</span><span class="nv">%PYTHONPATH%</span>;C:\My_python_lib
<span class="gp">C:\&gt;</span>python
</pre></div>
</div>
<p>Ces modifications s'appliqueront à toutes les autres commandes exécutées dans cette console et seront héritées par toutes les applications démarrées à partir de cette console.</p>
<p>Un nom de variable entre des signes pour cent sera remplacé par sa valeur, vous permettant d'ajouter votre nouvelle valeur au début ou à la fin. Ajouter <strong class="program">python.exe</strong> au début de <span class="target" id="index-84"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> est un moyen courant de s'assurer que la version correcte de Python est lancée.</p>
<p>Pour modifier définitivement les variables d'environnement par défaut, recherchez « modifier les variables d'environnement », via le menu démarrer, ou ouvrez « Propriétés Système », <span class="guilabel">Paramètres Système Avancés</span> et cliquez sur le bouton <span class="guilabel">Variables d'Environnement</span>. Dans cette boîte de dialogue, vous pouvez ajouter ou modifier des variables utilisateurs et systèmes. Pour modifier les variables systèmes, vous avez besoin d'un accès non restreint à votre ordinateur (c'est-à-dire aux droits d'administrateur).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Windows va concaténer les variables utilisateurs <em>après</em> les variables systèmes, ce qui peut provoquer des résultats inattendus lors de la modification de <span class="target" id="index-85"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code>.</p>
<p>La variable <span class="target" id="index-86"></span><a class="reference internal" href="cmdline.html#envvar-PYTHONPATH"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONPATH</span></code></a> est utilisée par toutes les versions de Python, vous ne devez donc pas configurer cette variable de façon permanente à moins qu'elle n'ajoute que du code compatible avec toutes les versions de Python installées.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">Voir aussi</p>
<dl class="simple">
<dt><a class="reference external" href="https://docs.microsoft.com/fr-fr/windows/win32/procthread/environment-variables">https://docs.microsoft.com/fr-fr/windows/win32/procthread/environment-variables</a></dt><dd><p>Aperçu des variables d'environnement dans Windows</p>
</dd>
<dt><a class="reference external" href="https://docs.microsoft.com/fr-fr/windows-server/administration/windows-commands/set_1">https://docs.microsoft.com/fr-fr/windows-server/administration/windows-commands/set_1</a></dt><dd><p>La commande <code class="docutils literal notranslate"><span class="pre">set</span></code>, pour modifier temporairement les variables d'environnement</p>
</dd>
<dt><a class="reference external" href="https://docs.microsoft.com/fr-fr/windows-server/administration/windows-commands/setx">https://docs.microsoft.com/fr-fr/windows-server/administration/windows-commands/setx</a></dt><dd><p>La commande <code class="docutils literal notranslate"><span class="pre">setx</span></code>, pour modifier de façon permanente les variables d'environnement</p>
</dd>
</dl>
</div>
</section>
<section id="finding-the-python-executable">
<span id="windows-path-mod"></span><h3><span class="section-number">4.6.2. </span>Trouver l'exécutable Python<a class="headerlink" href="#finding-the-python-executable" title="Lien permanent vers ce titre">¶</a></h3>
<div class="versionchanged">
<p><span class="versionmodified changed">Modifié dans la version 3.5.</span></p>
</div>
<p>En plus d'utiliser l'entrée du menu Démarrer automatiquement créée pour l'interpréteur Python, vous souhaiterez peut-être démarrer Python depuis l'invite de commandes. L'installateur a une option pour installer cela pour vous.</p>
<p>Sur la première page de l'installateur, une option intitulée « Ajouter Python au <em>PATH</em> » peut être sélectionnée pour que l'installateur ajoute l'emplacement d'installation dans le <span class="target" id="index-87"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code>. L'emplacement du dossier <code class="file docutils literal notranslate"><span class="pre">Scripts\</span></code> y est également ajouté. Cela vous permet de taper <strong class="command">Python</strong> pour exécuter l'interpréteur, et <strong class="command">pip</strong> pour l'installateur de paquets. Ainsi, vous pouvez également exécuter vos scripts avec les options de ligne de commande, voir la documentation <a class="reference internal" href="cmdline.html#using-on-cmdline"><span class="std std-ref">Ligne de commande</span></a>.</p>
<p>Si vous n'activez pas cette option au moment de l'installation, vous pouvez toujours ré-exécuter l'installateur, sélectionner Modifier et l'activer. Vous pouvez également modifier manuellement le <span class="target" id="index-88"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> à l'aide des instructions de <a class="reference internal" href="#setting-envvars"><span class="std std-ref">Digression : définition des variables d'environnement</span></a>. Vous devez définir votre variable d'environnement <span class="target" id="index-89"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> pour inclure le répertoire de votre installation Python, délimité par un point-virgule des autres entrées. Une variable d'exemple pourrait ressembler à ceci (en supposant que les deux premières entrées existaient déjà) :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>C:\WINDOWS\system32;C:\WINDOWS;C:\Program Files\Python 3.9
</pre></div>
</div>
</section>
</section>
<section id="utf-8-mode">
<span id="win-utf8-mode"></span><h2><span class="section-number">4.7. </span>Mode UTF-8<a class="headerlink" href="#utf-8-mode" title="Lien permanent vers ce titre">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">Nouveau dans la version 3.7.</span></p>
</div>
<p>Windows utilise toujours les anciens codages pour l'encodage du système (la page de code ANSI).  Python l'utilise pour le codage par défaut des fichiers texte (par exemple <a class="reference internal" href="../library/locale.html#locale.getencoding" title="locale.getencoding"><code class="xref py py-func docutils literal notranslate"><span class="pre">locale.getencoding()</span></code></a>).</p>
<p>Cela peut poser des problèmes car l'UTF-8 est largement utilisé sur Internet et sur la plupart des systèmes Unix, y compris le WSL (<em>Windows Subsystem for Linux</em>).</p>
<p>Vous pouvez utiliser le <a class="reference internal" href="../library/os.html#utf8-mode"><span class="std std-ref">mode UTF-8</span></a> pour changer le codage de texte par défaut en UTF-8. Vous pouvez activer le <a class="reference internal" href="../library/os.html#utf8-mode"><span class="std std-ref">mode UTF-8</span></a> via l'option de ligne de commande <code class="docutils literal notranslate"><span class="pre">-X</span> <span class="pre">utf8</span></code> ou la variable d'environnement <code class="docutils literal notranslate"><span class="pre">PYTHONUTF8=1</span></code>.  Voir <span class="target" id="index-90"></span><a class="reference internal" href="cmdline.html#envvar-PYTHONUTF8"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONUTF8</span></code></a> pour activer le mode UTF-8, et <a class="reference internal" href="#setting-envvars"><span class="std std-ref">Digression : définition des variables d'environnement</span></a> pour savoir comment modifier les variables d'environnement.</p>
<p>Lorsque le <a class="reference internal" href="../library/os.html#utf8-mode"><span class="std std-ref">mode UTF-8</span></a> est activé, vous pouvez toujours utiliser l’encodage système (la page de code ANSI) via le codec « <em>mbcs</em> ».</p>
<p>Notez que l'ajout de <code class="docutils literal notranslate"><span class="pre">PYTHONUTF8=1</span></code> aux variables d'environnement par défaut affectera toutes les applications Python 3.7+ sur votre système. Si vous avez des applications Python 3.7+ qui dépendent de l'encodage du système existant, il est recommandé de définir la variable d'environnement temporairement ou d'utiliser l'option de ligne de commande <code class="docutils literal notranslate"><span class="pre">-X</span> <span class="pre">utf8</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>même lorsque le mode UTF-8 est désactivé, Python utilise UTF-8 par défaut sur Windows pour :</p>
<ul class="simple">
<li><p>Les E/S de la console, y compris les E/S standards (voir <span class="target" id="index-91"></span><a class="pep reference external" href="https://peps.python.org/pep-0528/"><strong>PEP 528</strong></a> pour plus de détails).</p></li>
<li><p>L'<a class="reference internal" href="../glossary.html#term-filesystem-encoding-and-error-handler"><span class="xref std std-term">encodage du système de fichiers</span></a> (voir <span class="target" id="index-92"></span><a class="pep reference external" href="https://peps.python.org/pep-0529/"><strong>PEP 529</strong></a> pour plus de détails).</p></li>
</ul>
</div>
</section>
<section id="python-launcher-for-windows">
<span id="launcher"></span><h2><span class="section-number">4.8. </span>Lanceur Python pour Windows<a class="headerlink" href="#python-launcher-for-windows" title="Lien permanent vers ce titre">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">Nouveau dans la version 3.3.</span></p>
</div>
<p>Le lanceur Python pour Windows est un utilitaire qui facilite la recherche et l'exécution de différentes versions de Python. Il permet aux scripts (ou à la ligne de commande) d'indiquer une préférence pour une version Python spécifique, cherchera et exécutera cette version.</p>
<p>Contrairement à la variable <span class="target" id="index-93"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code>, le lanceur sélectionne correctement la version la plus appropriée de Python. Il préfère les installations par utilisateur sur celles du système, et les trie par version plutôt que d'utiliser la version la plus récente installée.</p>
<p>Le lanceur a été initialement spécifié dans <span class="target" id="index-94"></span><a class="pep reference external" href="https://peps.python.org/pep-0397/"><strong>PEP 397</strong></a>.</p>
<section id="getting-started">
<h3><span class="section-number">4.8.1. </span>Pour commencer<a class="headerlink" href="#getting-started" title="Lien permanent vers ce titre">¶</a></h3>
<section id="from-the-command-line">
<h4><span class="section-number">4.8.1.1. </span>Depuis la ligne de commande<a class="headerlink" href="#from-the-command-line" title="Lien permanent vers ce titre">¶</a></h4>
<div class="versionchanged">
<p><span class="versionmodified changed">Modifié dans la version 3.6.</span></p>
</div>
<p>Les installations systèmes de Python 3.3 et ultérieur placent le lanceur dans votre <span class="target" id="index-95"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code>. Le lanceur est compatible avec toutes les versions disponibles de Python, peu importe lesquelles sont installées. Pour vérifier que le lanceur est disponible, exécutez la commande suivante dans l'invite de commandes :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>py
</pre></div>
</div>
<p>Vous devriez voir se lancer la dernière version de Python installée — il peut être quitté normalement, et tous les arguments de ligne de commande supplémentaires spécifiés seront envoyés directement à Python.</p>
<p>Si plusieurs versions de Python sont installées (par exemple, 3.7 et 3.12), vous aurez remarqué que Python 3.12 se lance -- pour lancer Python 3.7, essayez la commande :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>py -3.7
</pre></div>
</div>
<p>Si vous voulez que la dernière version de Python 2.x que vous avez installé, essayez la commande :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>py -2
</pre></div>
</div>
<p>Si vous voyez l'erreur suivante, le lanceur n'est pas installé :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;py&#39; is not recognized as an internal or external command,
operable program or batch file.
</pre></div>
</div>
<p>La commande :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>py --list
</pre></div>
</div>
<p>affiche la ou les versions actuellement installées de Python.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">-x.y</span></code> argument is the short form of the <code class="docutils literal notranslate"><span class="pre">-V:Company/Tag</span></code> argument,
which allows selecting a specific Python runtime, including those that may have
come from somewhere other than python.org. Any runtime registered by following
<span class="target" id="index-21"></span><a class="pep reference external" href="https://peps.python.org/pep-0514/"><strong>PEP 514</strong></a> will be discoverable. The <code class="docutils literal notranslate"><span class="pre">--list</span></code> command lists all available
runtimes using the <code class="docutils literal notranslate"><span class="pre">-V:</span></code> format.</p>
<p>When using the <code class="docutils literal notranslate"><span class="pre">-V:</span></code> argument, specifying the Company will limit selection to
runtimes from that provider, while specifying only the Tag will select from all
providers. Note that omitting the slash implies a tag:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># Select any &#39;3.*&#39; tagged runtime
py -V:3

# Select any &#39;PythonCore&#39; released runtime
py -V:PythonCore/

# Select PythonCore&#39;s latest Python 3 runtime
py -V:PythonCore/3
</pre></div>
</div>
<p>The short form of the argument (<code class="docutils literal notranslate"><span class="pre">-3</span></code>) only ever selects from core Python
releases, and not other distributions. However, the longer form (<code class="docutils literal notranslate"><span class="pre">-V:3</span></code>) will
select from any.</p>
<p>The Company is matched on the full string, case-insenitive. The Tag is matched
oneither the full string, or a prefix, provided the next character is a dot or a
hyphen. This allows <code class="docutils literal notranslate"><span class="pre">-V:3.1</span></code> to match <code class="docutils literal notranslate"><span class="pre">3.1-32</span></code>, but not <code class="docutils literal notranslate"><span class="pre">3.10</span></code>. Tags are
sorted using numerical ordering (<code class="docutils literal notranslate"><span class="pre">3.10</span></code> is newer than <code class="docutils literal notranslate"><span class="pre">3.1</span></code>), but are
compared using text (<code class="docutils literal notranslate"><span class="pre">-V:3.01</span></code> does not match <code class="docutils literal notranslate"><span class="pre">3.1</span></code>).</p>
</section>
<section id="virtual-environments">
<h4><span class="section-number">4.8.1.2. </span>Environnements virtuels<a class="headerlink" href="#virtual-environments" title="Lien permanent vers ce titre">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Nouveau dans la version 3.5.</span></p>
</div>
<p>Si le lanceur est exécuté sans version de Python explicite et qu'un environnement virtuel (créé avec le module de la bibliothèque standard <a class="reference internal" href="../library/venv.html#module-venv" title="venv: Creation of virtual environments."><code class="xref py py-mod docutils literal notranslate"><span class="pre">venv</span></code></a> ou l'outil externe <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code>) est actif, le lanceur exécute l'interpréteur de l'environnement virtuel plutôt que l'interpréteur global. Pour exécuter l'interpréteur global, désactivez l'environnement virtuel ou spécifiez explicitement la version Python globale.</p>
</section>
<section id="from-a-script">
<h4><span class="section-number">4.8.1.3. </span>À partir d'un script<a class="headerlink" href="#from-a-script" title="Lien permanent vers ce titre">¶</a></h4>
<p>Créons un script Python de test, créez un fichier appelé <code class="docutils literal notranslate"><span class="pre">hello.py</span></code> avec le contenu suivant</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#! python</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;hello from Python </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">version</span><span class="p">,))</span>
</pre></div>
</div>
<p>À partir du répertoire dans lequel se trouve <code class="docutils literal notranslate"><span class="pre">hello.py</span></code>, exécutez la commande :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>py hello.py
</pre></div>
</div>
<p>Vous devriez voir le numéro de version du Python 2.x le plus récemment installé. Maintenant, essayez de changer la première ligne en :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#! python3</span>
</pre></div>
</div>
<p>La commande doit maintenant afficher les dernières informations de Python 3.x. Comme pour les exemples de ligne de commande ci-dessus, vous pouvez spécifier un qualificateur de version plus explicite. En supposant que vous avez installé Python 3.7, essayez de changer la première ligne en <code class="docutils literal notranslate"><span class="pre">#!</span> <span class="pre">python3.7</span></code> et vous devriez trouver les informations de version 3.7 affichées.</p>
<p>Notez que, contrairement à l'utilisation interactive, un &quot;python&quot; nu utilisera la dernière version de Python 2.x que vous avez installé. C'est pour la compatibilité ascendante et pour la compatibilité avec UNIX, où la commande <code class="docutils literal notranslate"><span class="pre">python</span></code> fait généralement référence à Python 2.</p>
</section>
<section id="from-file-associations">
<h4><span class="section-number">4.8.1.4. </span>À partir d'associations de fichiers<a class="headerlink" href="#from-file-associations" title="Lien permanent vers ce titre">¶</a></h4>
<p>Le lanceur aurait dû être associé à des fichiers Python (des fichiers comme <code class="docutils literal notranslate"><span class="pre">.py</span></code>, <code class="docutils literal notranslate"><span class="pre">.pyw</span></code>, <code class="docutils literal notranslate"><span class="pre">.pyc</span></code>) lorsqu'il a été installé. Cela signifie que lorsque vous double-cliquez sur l'un de ces fichiers à partir de l'Explorateur Windows, le lanceur sera utilisé, et donc vous pouvez utiliser les mêmes installations décrites ci-dessus pour que le script spécifie la version qui doit être utilisée.</p>
<p>L'avantage principal de ceci est qu'un seul lanceur peut prendre en charge plusieurs versions de Python en même temps en fonction du contenu de la première ligne.</p>
</section>
</section>
<section id="shebang-lines">
<h3><span class="section-number">4.8.2. </span>Lignes Shebang<a class="headerlink" href="#shebang-lines" title="Lien permanent vers ce titre">¶</a></h3>
<p>Si la première ligne d'un fichier de script commence par <code class="docutils literal notranslate"><span class="pre">#!</span></code>, elle est connue sous le nom de ligne « <em>shebang</em> ». Linux et d'autres systèmes basés sur Unix ont une prise en charge native de ces lignes et les <em>shebangs</em> sont couramment utilisés sur ces systèmes pour indiquer comment un script doit être exécuté. Ce lanceur permet aux mêmes installations d'être utilisés avec des scripts Python sur Windows et les exemples ci-dessus démontrent leur utilisation.</p>
<p>Pour permettre aux <em>shebang</em> dans les scripts Python d'être portables entre UNIX et Windows, ce lanceur prend en charge un certain nombre de commandes « virtuelles » pour spécifier l'interpréteur à utiliser. Les commandes virtuelles prises en charge sont :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/bin/env</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/bin/python</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/local/bin/python</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python</span></code></p></li>
</ul>
<p>Par exemple, si la première ligne de votre script commence par</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="ch">#! /usr/bin/python</span>
</pre></div>
</div>
<p>Le Python par défaut sera trouvé et utilisé. Comme de nombreux scripts Python écrits pour fonctionner sur UNIX auront déjà cette ligne, ils devraient fonctionner avec le lanceur sans modification. Si vous écrivez un nouveau script sur Windows et que vous pensez qu'il sera utile sur UNIX, vous devez utiliser l'une des lignes <em>shebang</em> commençant par <code class="docutils literal notranslate"><span class="pre">/usr</span></code>.</p>
<p>Les commandes virtuelles ci-dessus peuvent être suffixées avec une version explicite (soit seulement la version principale, soit la version principale et mineure). De plus la version 32-bit peut être demandée en ajoutant <strong>-32</strong> après le numéro de version mineur. Par exemple <code class="docutils literal notranslate"><span class="pre">/usr/bin/python3.7-32</span></code> demande d’utiliser la version 32-bit de Python 3.7.</p>
<div class="versionadded">
<p><span class="versionmodified added">Nouveau dans la version 3.7: </span>Depuis la version 3.7 du lanceur Python, il est possible de demander une version <em>64-bit</em> en utilisant le suffixe <strong>-64</strong>. De plus il est possible de spécifier une version majeure et une architecture sans version mineure (par exemple <code class="docutils literal notranslate"><span class="pre">/usr/bin/python3-64</span></code>).</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Modifié dans la version 3.11: </span>The &quot;-64&quot; suffix is deprecated, and now implies &quot;any architecture that is
not provably i386/32-bit&quot;. To request a specific environment, use the new
<code class="samp docutils literal notranslate"><span class="pre">-V:</span><em><span class="pre">TAG</span></em></code> argument with the complete tag.</p>
</div>
<p>La forme <code class="docutils literal notranslate"><span class="pre">/usr/bin/env</span></code> de la ligne shebang possède une autre propriété spéciale. Avant de rechercher les interpréteurs Python installés, cette forme recherchera dans <span class="target" id="index-96"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> un exécutable Python correspondant au nom fourni en premier argument. Cela correspond au comportement du programme Unix <code class="docutils literal notranslate"><span class="pre">env</span></code>, qui effectue une recherche dans <span class="target" id="index-97"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code>. Si un exécutable correspondant au premier argument de la commande <code class="docutils literal notranslate"><span class="pre">env</span></code> ne peut être trouvé, mais que l'argument commence par <code class="docutils literal notranslate"><span class="pre">python</span></code>, il sera traité comme décrit pour les autres commandes virtuelles. La variable d'environnement <span class="target" id="index-98"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYLAUNCHER_NO_SEARCH_PATH</span></code> peut être définie (à n'importe quelle valeur) pour ignorer cette recherche dans <span class="target" id="index-99"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code>.</p>
<p>Shebang lines that do not match any of these patterns are looked up in the
<code class="docutils literal notranslate"><span class="pre">[commands]</span></code> section of the launcher's <a class="reference internal" href="#launcher-ini"><span class="std std-ref">.INI file</span></a>.
This may be used to handle certain commands in a way that makes sense for your
system. The name of the command must be a single argument (no spaces in the
shebang executable), and the value substituted is the full path to the
executable (additional arguments specified in the .INI will be quoted as part
of the filename).</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[commands]</span>
<span class="na">/bin/xpython</span><span class="o">=</span><span class="s">C:\Program Files\XPython\python.exe</span>
</pre></div>
</div>
<p>Any commands not found in the .INI file are treated as <strong>Windows</strong> executable
paths that are absolute or relative to the directory containing the script file.
This is a convenience for Windows-only scripts, such as those generated by an
installer, since the behavior is not compatible with Unix-style shells.
These paths may be quoted, and may include multiple arguments, after which the
path to the script and any additional arguments will be appended.</p>
</section>
<section id="arguments-in-shebang-lines">
<h3><span class="section-number">4.8.3. </span>Arguments dans les lignes <em>shebang</em><a class="headerlink" href="#arguments-in-shebang-lines" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les lignes <em>shebang</em> peuvent également spécifier des options supplémentaires à passer à l'interpréteur Python. Par exemple, si vous avez une ligne <em>shebang</em> :</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="ch">#! /usr/bin/python -v</span>
</pre></div>
</div>
<p>Alors, Python sera démarré avec l'option <code class="docutils literal notranslate"><span class="pre">-v</span></code></p>
</section>
<section id="customization">
<h3><span class="section-number">4.8.4. </span>Personnalisation<a class="headerlink" href="#customization" title="Lien permanent vers ce titre">¶</a></h3>
<section id="customization-via-ini-files">
<span id="launcher-ini"></span><h4><span class="section-number">4.8.4.1. </span>Personnalisation via des fichiers INI<a class="headerlink" href="#customization-via-ini-files" title="Lien permanent vers ce titre">¶</a></h4>
<p>Deux fichiers <code class="docutils literal notranslate"><span class="pre">.ini</span></code> seront recherchés par le lanceur - <code class="docutils literal notranslate"><span class="pre">py.ini</span></code> dans le répertoire de données de l'application de l'utilisateur courant (<code class="docutils literal notranslate"><span class="pre">%LOCALAPPDATA%</span></code> ou <code class="docutils literal notranslate"><span class="pre">$env:LocalAppData</span></code>) et <code class="docutils literal notranslate"><span class="pre">py.ini</span></code> dans le même répertoire que le lanceur. Les mêmes fichiers <code class="docutils literal notranslate"><span class="pre">.ini</span></code> sont utilisés à la fois pour la version <em>console</em> du lanceur (i.e. <code class="docutils literal notranslate"><span class="pre">py.exe</span></code>) et pour la version <em>windows</em> (i.e. <code class="docutils literal notranslate"><span class="pre">pyw.exe</span></code>).</p>
<p>La personnalisation spécifiée dans le « répertoire de l'application » aura la priorité sur celle à côté de l'exécutable, de sorte qu'un utilisateur, qui peut ne pas avoir accès en écriture au fichier <code class="docutils literal notranslate"><span class="pre">.ini</span></code> à côté du lanceur, peut substituer des commandes dans ce fichier <code class="docutils literal notranslate"><span class="pre">.ini</span></code> global)</p>
</section>
<section id="customizing-default-python-versions">
<h4><span class="section-number">4.8.4.2. </span>Personnalisation des versions Python par défaut<a class="headerlink" href="#customizing-default-python-versions" title="Lien permanent vers ce titre">¶</a></h4>
<p>Dans certains cas, un qualificateur de version peut être inclus dans une commande pour dicter quelle version de Python sera utilisée par la commande. Un qualificateur de version commence par un numéro de version majeure et peut éventuellement être suivi d'un point (<code class="docutils literal notranslate"><span class="pre">.</span></code>) et d'un spécificateur de version secondaire. De plus il est possible de préciser si une implémentation 32 ou 64 bit doit être demandée en ajoutant <strong>-32</strong> ou <strong>-64</strong>.</p>
<p>Par exemple, une ligne <em>shebang</em> valant <code class="docutils literal notranslate"><span class="pre">#!python</span></code> n'a pas de qualificateur de version, tandis que <code class="docutils literal notranslate"><span class="pre">#!python3</span></code> a un qualificateur de version qui ne spécifie qu'une version majeure.</p>
<p>Si aucun qualificateur de version n'est trouvé dans une commande, la variable d'environnement <span class="target" id="index-100"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PY_PYTHON</span></code> peut être définie pour spécifier le qualificateur de version par défaut. Si non définie, la valeur par défaut est <code class="docutils literal notranslate"><span class="pre">3</span></code>. La variable peut spécifier n’importe quelle valeur qui peut être passée dans la ligne de commande telle que <code class="docutils literal notranslate"><span class="pre">3</span></code>, <code class="docutils literal notranslate"><span class="pre">3.7</span></code>, <code class="docutils literal notranslate"><span class="pre">3.7-32</span></code> ou <code class="docutils literal notranslate"><span class="pre">3.7-64</span></code>. (Notez que l’option <strong>-64</strong> est seulement disponible avec le lanceur inclus avec Python 3.7 ou plus récent.)</p>
<p>Si aucun qualificateur de version mineure n'est trouvé, la variable d'environnement <code class="docutils literal notranslate"><span class="pre">PY_PYTHON{major}</span></code> (où <code class="docutils literal notranslate"><span class="pre">{major}</span></code> est le qualificateur de version principale actuelle tel que déterminé ci-dessus) peut être définie pour spécifier la version complète. Si aucune option de ce type n'est trouvée, le lanceur énumérera les versions de Python installées et utilisera la dernière version mineure trouvée pour la version principale, qui est probablement la plus récemment installée dans cette famille.</p>
<p>Sur Windows 64-bits avec les implémentations 32-bits et 64-bits de la même version Python (<code class="docutils literal notranslate"><span class="pre">major.minor</span></code>) installée, la version 64-bit est toujours préférée. Cela est vrai pour les implémentations 32-bits et 64-bits du lanceur – un lanceur 32-bits préfère exécuter une installation Python de 64-bits de la version spécifiée si elle est disponible. Le comportement du lanceur est donc prévisible en sachant seulement quelles versions sont installées sur le PC et sans tenir compte de l'ordre dans lequel ils ont été installés (c.-à-d. sans savoir si une version 32 ou 64-bit de Python et le lanceur correspondant a été installé en dernier). Comme indiqué ci-dessus, un suffixe optionnel <code class="docutils literal notranslate"><span class="pre">-32</span></code> ou <code class="docutils literal notranslate"><span class="pre">-64</span></code> peut être utilisé sur un spécificateur de version pour modifier ce comportement.</p>
<p>Exemples :</p>
<ul class="simple">
<li><p>Si aucune option pertinente n'est définie, les commandes <code class="docutils literal notranslate"><span class="pre">python</span></code> et <code class="docutils literal notranslate"><span class="pre">python2</span></code> utiliseront la dernière version de Python 2.x installée et la commande <code class="docutils literal notranslate"><span class="pre">python3</span></code> utilisera le dernier Python 3.x installé.</p></li>
<li><p>La commande <code class="docutils literal notranslate"><span class="pre">python3.7</span></code> ne consulte aucune option du tout car les versions sont entièrement spécifiées.</p></li>
<li><p>Si <code class="docutils literal notranslate"><span class="pre">PY_PYTHON=3</span></code>, les commandes <code class="docutils literal notranslate"><span class="pre">python</span></code> et <code class="docutils literal notranslate"><span class="pre">python3</span></code> utiliseront la dernière version de Python 3 installée.</p></li>
<li><p>Si <code class="docutils literal notranslate"><span class="pre">PY_PYTHON=3.7-32</span></code>, la commande <code class="docutils literal notranslate"><span class="pre">python</span></code> utilisera l'implémentation 32-bits de 3.7 alors que la commande <code class="docutils literal notranslate"><span class="pre">python3</span></code> utilisera le dernier Python installé (<em>PY_PYTHON</em> n'a pas été considéré du tout comme une version majeure a été spécifiée.)</p></li>
<li><p>Si <code class="docutils literal notranslate"><span class="pre">PY_PYTHON=3</span></code> et <code class="docutils literal notranslate"><span class="pre">PY_PYTHON3=3.7</span></code>, les commandes <code class="docutils literal notranslate"><span class="pre">python</span></code> et <code class="docutils literal notranslate"><span class="pre">python3</span></code> utiliseront spécifiquement 3.7</p></li>
</ul>
<p>En plus des variables d'environnement, les mêmes paramètres peuvent être configurés dans le <code class="docutils literal notranslate"><span class="pre">.INI</span></code> utilisé par le lanceur. La section dans le fichier INI est appelée <code class="docutils literal notranslate"><span class="pre">[defaults]</span></code> et le nom de la clé sera le même que les variables d'environnement sans le préfixe <code class="docutils literal notranslate"><span class="pre">PY_</span></code> principal (et notez que les noms de clés dans le fichier <strong>INI</strong> sont insensibles à la case.) Le contenu d'une variable d'environnement remplacera les éléments spécifiés dans le fichier <em>INI</em>.</p>
<p>Par exemple :</p>
<ul class="simple">
<li><p>Le paramètre <code class="docutils literal notranslate"><span class="pre">PY_PYTHON=3.7</span></code> équivaut au fichier <strong>INI</strong> contenant :</p></li>
</ul>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[defaults]</span>
<span class="na">python</span><span class="o">=</span><span class="s">3.7</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Le paramètre <code class="docutils literal notranslate"><span class="pre">PY_PYTHON=3</span></code> et <code class="docutils literal notranslate"><span class="pre">PY_PYTHON3=3.7</span></code> équivaut au fichier <em>INI</em> contenant :</p></li>
</ul>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[defaults]</span>
<span class="na">python</span><span class="o">=</span><span class="s">3</span>
<span class="na">python3</span><span class="o">=</span><span class="s">3.7</span>
</pre></div>
</div>
</section>
</section>
<section id="diagnostics">
<h3><span class="section-number">4.8.5. </span>Diagnostics<a class="headerlink" href="#diagnostics" title="Lien permanent vers ce titre">¶</a></h3>
<p>Si une variable d'environnement <span class="target" id="index-101"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYLAUNCHER_DEBUG</span></code> est définie (à n'importe quelle valeur), le lanceur affiche des informations de diagnostic sur <em>stderr</em> (c'est-à-dire sur la console). Bien que ces informations parviennent à être en même temps nombreuses et concises, elles devraient vous permettre de voir quelles versions de Python ont été trouvées, pourquoi une version particulière a été choisie et la ligne de commande exacte utilisée pour exécuter le Python cible.</p>
</section>
<section id="dry-run">
<h3><span class="section-number">4.8.6. </span>Exécution à vide<a class="headerlink" href="#dry-run" title="Lien permanent vers ce titre">¶</a></h3>
<p>Si une variable d'environnement <span class="target" id="index-102"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYLAUNCHER_DRYRUN</span></code> est définie (à n'importe quelle valeur), le lanceur affiche la commande qu'il aurait exécutée, mais ne lance pas réellement Python. Cela peut être utile pour les outils qui souhaitent utiliser le lanceur pour détecter puis lancer Python directement. Notez que la commande écrite sur la sortie standard est toujours codée en UTF-8 et peut ne pas s'afficher correctement dans la console.</p>
</section>
<section id="install-on-demand">
<h3><span class="section-number">4.8.7. </span>Installation à la demande<a class="headerlink" href="#install-on-demand" title="Lien permanent vers ce titre">¶</a></h3>
<p>Si une variable d'environnement <span class="target" id="index-103"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYLAUNCHER_ALLOW_INSTALL</span></code> est définie (à n'importe quelle valeur) et que la version de Python demandée n'est pas installée mais est disponible sur le Microsoft Store, le lanceur tente de l'installer. Cela peut nécessiter une intervention de l'utilisateur et il faudra peut-être exécuter à nouveau la commande.</p>
<p>Une variable supplémentaire <span class="target" id="index-104"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYLAUNCHER_ALWAYS_INSTALL</span></code> oblige le lanceur à toujours essayer d'installer Python, même s'il est détecté. Ceci est principalement destiné aux tests (et doit être utilisé avec <span class="target" id="index-105"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYLAUNCHER_DRYRUN</span></code>).</p>
</section>
<section id="return-codes">
<h3><span class="section-number">4.8.8. </span>Codes de retour<a class="headerlink" href="#return-codes" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les codes de retour suivants peuvent être renvoyés par le lanceur Python. Malheureusement, il n'y a aucun moyen de les distinguer du code de sortie de Python lui-même.</p>
<p>Les noms des codes sont tels qu'utilisés dans les sources et ne sont donnés qu'à titre de référence. Il n'y a aucun moyen d'y accéder ou de les résoudre en dehors de la lecture de cette page. Les entrées sont classées par ordre alphabétique des noms.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 26%" />
<col style="width: 10%" />
<col style="width: 64%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Nom</p></th>
<th class="head"><p>Valeur</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>RC_BAD_VENV_CFG</p></td>
<td><p>107</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">pyvenv.cfg</span></code> a été trouvé mais est corrompu.</p></td>
</tr>
<tr class="row-odd"><td><p>RC_CREATE_PROCESS</p></td>
<td><p>101</p></td>
<td><p>Échec du lancement de Python.</p></td>
</tr>
<tr class="row-even"><td><p>RC_INSTALLING</p></td>
<td><p>111</p></td>
<td><p>Une installation a commencé, mais la commande doit être relancée après qu'elle a terminé.</p></td>
</tr>
<tr class="row-odd"><td><p>RC_INTERNAL_ERROR</p></td>
<td><p>109</p></td>
<td><p>Erreur non prévue. Merci de remonter un bogue.</p></td>
</tr>
<tr class="row-even"><td><p>RC_NO_COMMANDLINE</p></td>
<td><p>108</p></td>
<td><p>Le système d'exploitation n'a pas fourni de ligne de commande.</p></td>
</tr>
<tr class="row-odd"><td><p>RC_NO_PYTHON</p></td>
<td><p>103</p></td>
<td><p>Impossible de trouver la version demandée.</p></td>
</tr>
<tr class="row-even"><td><p>RC_NO_VENV_CFG</p></td>
<td><p>106</p></td>
<td><p><code class="file docutils literal notranslate"><span class="pre">pyvenv.cfg</span></code> est requis mais n'a pas été trouvé.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="finding-modules">
<span id="windows-finding-modules"></span><h2><span class="section-number">4.9. </span>Recherche de modules<a class="headerlink" href="#finding-modules" title="Lien permanent vers ce titre">¶</a></h2>
<p>Ces notes complètent la description de <a class="reference internal" href="../library/sys_path_init.html#sys-path-init"><span class="std std-ref">The initialization of the sys.path module search path</span></a> avec des notes Windows détaillées.</p>
<p>Lorsque aucun fichier <code class="docutils literal notranslate"><span class="pre">._pth</span></code> n'est trouvé, voilà comment <a class="reference internal" href="../library/sys.html#sys.path" title="sys.path"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a> est construit sur Windows :</p>
<ul class="simple">
<li><p>Une entrée vide est ajoutée au début, qui correspond au répertoire courant.</p></li>
<li><p>Si la variable d'environnement <span class="target" id="index-106"></span><a class="reference internal" href="cmdline.html#envvar-PYTHONPATH"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONPATH</span></code></a> existe, comme décrit dans <a class="reference internal" href="cmdline.html#using-on-envvars"><span class="std std-ref">Variables d'environnement</span></a>, ses entrées sont ajoutées ensuite. Notez que sur Windows, les chemins d'accès de cette variable doivent être séparés par des points-virgules, pour les distinguer des deux points utilisés dans les identificateurs de lecteur (<code class="docutils literal notranslate"><span class="pre">C:\</span></code> etc.).</p></li>
<li><p>Des &quot;chemins d'accès d'application&quot; supplémentaires peuvent être ajoutés dans le registre en tant que sous-clés de <code class="samp docutils literal notranslate"><span class="pre">\SOFTWARE\Python\PythonCore{version}\PythonPath</span></code> sous les ruches <code class="docutils literal notranslate"><span class="pre">HKEY_CURRENT_USER</span></code> et <code class="docutils literal notranslate"><span class="pre">HKEY_LOCAL_MACHINE</span></code>. Les sous-clés qui ont des chaînes de chemin délimitées par des points-virgules comme valeur par défaut entraînent l'ajout de chaque chemin d'accès à <a class="reference internal" href="../library/sys.html#sys.path" title="sys.path"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a>. (Notez que tous les installateurs connus utilisent seulement HKLM, donc HKCU est généralement vide.)</p></li>
<li><p>Si la variable d'environnement <span class="target" id="index-107"></span><a class="reference internal" href="cmdline.html#envvar-PYTHONHOME"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONHOME</span></code></a> est définie, elle est supposée comme &quot;Python Home&quot;. Sinon, le chemin de l'exécutable principal de Python est utilisé pour chercher un &quot;fichier de repère&quot; (soit <code class="docutils literal notranslate"><span class="pre">Lib\os.py</span></code> ou <code class="docutils literal notranslate"><span class="pre">pythonXY.zip</span></code>) pour déduire le &quot;Python Home&quot;. Si un &quot;Python Home&quot; est trouvé, les sous-répertoires correspondants ajoutés à <a class="reference internal" href="../library/sys.html#sys.path" title="sys.path"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a> (<code class="docutils literal notranslate"><span class="pre">Lib</span></code>, <code class="docutils literal notranslate"><span class="pre">plat-win</span></code>, etc) sont basés sur ce dossier. Sinon, le chemin d'accès Python principal est construit à partir du PythonPath stocké dans le registre.</p></li>
<li><p>Si le &quot;Python Home&quot; ne peut pas être trouvé, <span class="target" id="index-108"></span><a class="reference internal" href="cmdline.html#envvar-PYTHONPATH"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONPATH</span></code></a> n'est pas spécifié dans l'environnement et aucune entrée de registre ne peut être trouvée, un chemin par défaut avec des entrées relatives est utilisé (par exemple <code class="docutils literal notranslate"><span class="pre">.\Lib</span></code> ; <code class="docutils literal notranslate"><span class="pre">.\plat-win</span></code>, etc.).</p></li>
</ul>
<p>Si un fichier <code class="docutils literal notranslate"><span class="pre">pyvenv.cfg</span></code> se trouve à côté de l'exécutable principal ou dans le répertoire un niveau au-dessus de l'exécutable, les variantes suivantes s'appliquent :</p>
<ul class="simple">
<li><p>Si <code class="docutils literal notranslate"><span class="pre">home</span></code> est un chemin absolu et <span class="target" id="index-109"></span><a class="reference internal" href="cmdline.html#envvar-PYTHONHOME"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONHOME</span></code></a> n'est pas défini, ce chemin d'accès est utilisé au lieu du chemin d'accès à l'exécutable principal lors de la déduction de l'emplacement du <code class="docutils literal notranslate"><span class="pre">home</span></code>.</p></li>
</ul>
<p>Le résultat final de tout ceci est :</p>
<ul class="simple">
<li><p>Lors de l'exécution de <code class="file docutils literal notranslate"><span class="pre">python.exe</span></code>, ou tout autre <code class="docutils literal notranslate"><span class="pre">.exe</span></code> dans le répertoire principal de Python (soit une version installée, soit directement à partir du répertoire PCbuild), le chemin principal est déduit et les chemins d'accès principaux dans le Registre sont ignorés. D'autres &quot;chemins d'application&quot; dans le registre sont toujours lus.</p></li>
<li><p>Lorsque Python est hébergé dans un autre fichier <code class="docutils literal notranslate"><span class="pre">.exe</span></code> (répertoire différent, intégré via COM, etc.), le &quot;Python Home&quot; ne sera pas déduit, de sorte que le chemin d'accès principal du registre est utilisé. D'autres &quot;chemins d'application&quot; dans le registre sont toujours lus.</p></li>
<li><p>Si Python ne peut pas trouver son &quot;home&quot; et il n'y a pas de valeur de registre (<em>.exe</em> figé, une installation très étrange) vous obtenez un chemin d'accès avec certains chemins par défaut, mais relatif.</p></li>
</ul>
<p>Pour ceux qui veulent intégrer Python dans leur application ou leur distribution, les conseils suivants empêcheront les conflits avec d'autres installations :</p>
<ul class="simple">
<li><p>Incluez un fichier <code class="docutils literal notranslate"><span class="pre">._pth</span></code> à côté de votre exécutable contenant les répertoires à inclure. Ceci ignorera les chemins répertoriés dans le registre et les variables d'environnement, et ignorera également <a class="reference internal" href="../library/site.html#module-site" title="site: Module responsible for site-specific configuration."><code class="xref py py-mod docutils literal notranslate"><span class="pre">site</span></code></a> à moins que <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">site</span></code> soit listé.</p></li>
<li><p>Si vous chargez <code class="file docutils literal notranslate"><span class="pre">python3.dll</span></code> ou <code class="file docutils literal notranslate"><span class="pre">python37.dll</span></code> dans votre propre exécutable, appelez explicitement <a class="reference internal" href="../c-api/init.html#c.Py_SetPath" title="Py_SetPath"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_SetPath()</span></code></a> ou (au moins) <a class="reference internal" href="../c-api/init.html#c.Py_SetProgramName" title="Py_SetProgramName"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_SetProgramName()</span></code></a> avant <a class="reference internal" href="../c-api/init.html#c.Py_Initialize" title="Py_Initialize"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_Initialize()</span></code></a>.</p></li>
<li><p>Effacer et/ou écraser <span class="target" id="index-110"></span><a class="reference internal" href="cmdline.html#envvar-PYTHONPATH"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONPATH</span></code></a> et configurez <span class="target" id="index-111"></span><a class="reference internal" href="cmdline.html#envvar-PYTHONHOME"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONHOME</span></code></a> avant de lancer le <code class="file docutils literal notranslate"><span class="pre">python.exe</span></code> de votre application.</p></li>
<li><p>Si vous ne pouvez pas utiliser les suggestions précédentes (par exemple, vous êtes une distribution qui permet aux gens d'exécuter <code class="file docutils literal notranslate"><span class="pre">python.exe</span></code> directement), assurez-vous que le point de repère <code class="file docutils literal notranslate"><span class="pre">Lib\os.py</span></code> existe dans votre répertoire d'installation. (Notez qu'il ne sera pas détecté à l'intérieur d'un fichier ZIP, mais un fichier ZIP correctement nommé sera détecté à la place.)</p></li>
</ul>
<p>Ceux-ci garantiront que les fichiers d'une installation à l'échelle du système n'auront pas la priorité sur la copie de la bibliothèque standard livrée avec votre application. Sinon, vos utilisateurs pourraient rencontrer des problèmes en utilisant votre application. Notez que la première suggestion est la meilleure, car les autres peuvent encore être sensibles aux chemins non-standard dans le registre et le <em>site-packages</em> utilisateur.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Modifié dans la version 3.6: </span>Add <code class="docutils literal notranslate"><span class="pre">._pth</span></code> file support and removes <code class="docutils literal notranslate"><span class="pre">applocal</span></code> option from
<code class="docutils literal notranslate"><span class="pre">pyvenv.cfg</span></code>.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Modifié dans la version 3.6: </span>Add <code class="file docutils literal notranslate"><span class="pre">python</span><em><span class="pre">XX</span></em><span class="pre">.zip</span></code> as a potential landmark when directly adjacent
to the executable.</p>
</div>
<div class="deprecated">
<p><span class="versionmodified deprecated">Obsolète depuis la version 3.6: </span>Modules specified in the registry under <code class="docutils literal notranslate"><span class="pre">Modules</span></code> (not <code class="docutils literal notranslate"><span class="pre">PythonPath</span></code>)
may be imported by <a class="reference internal" href="../library/importlib.html#importlib.machinery.WindowsRegistryFinder" title="importlib.machinery.WindowsRegistryFinder"><code class="xref py py-class docutils literal notranslate"><span class="pre">importlib.machinery.WindowsRegistryFinder</span></code></a>.
This finder is enabled on Windows in 3.6.0 and earlier, but may need to
be explicitly added to <a class="reference internal" href="../library/sys.html#sys.meta_path" title="sys.meta_path"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.meta_path</span></code></a> in the future.</p>
</div>
</section>
<section id="additional-modules">
<h2><span class="section-number">4.10. </span>Modules supplémentaires<a class="headerlink" href="#additional-modules" title="Lien permanent vers ce titre">¶</a></h2>
<p>Même si Python a l'ambition d'être portable parmi toutes les plates-formes, il existe des fonctionnalités propres à Windows. Certains modules, à la fois dans la bibliothèque standard et externe, et des exemples existent pour utiliser ces fonctionnalités.</p>
<p>Les modules standard de Windows sont documentés dans <a class="reference internal" href="../library/windows.html#mswin-specific-services"><span class="std std-ref">Services spécifiques à MS Windows</span></a>.</p>
<section id="pywin32">
<h3><span class="section-number">4.10.1. </span>PyWin32<a class="headerlink" href="#pywin32" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le module <a class="reference external" href="https://pypi.org/project/pywin32">PyWin32</a> de Mark Hammond est une collection de modules pour un support avancé spécifique à Windows. Cela inclut les services pour :</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.microsoft.com/fr-fr/windows/win32/com/component-object-model--com--portal">Component Object Model</a> (COM)</p></li>
<li><p>Appels à l'API Win32</p></li>
<li><p>Registre</p></li>
<li><p>Journal d'événement</p></li>
<li><p><a class="reference external" href="https://docs.microsoft.com/fr-fr/cpp/mfc/mfc-desktop-applications">Microsoft Foundation Classes</a> (MFC) interfaces utilisateur</p></li>
</ul>
<p><a class="reference external" href="http://web.archive.org/web/20060524042422/http://www.python.org/windows/pythonwin/">PythonWin</a> est un exemple d'application MFC livrée avec PyWin32. Il s'agit d'un IDE embarqué avec débogueur intégré.</p>
<div class="admonition seealso">
<p class="admonition-title">Voir aussi</p>
<dl class="simple">
<dt><a class="reference external" href="http://timgolden.me.uk/python/win32_how_do_i.html">Win32 How Do I...?</a></dt><dd><p>par Tim Golden</p>
</dd>
<dt><a class="reference external" href="https://www.boddie.org.uk/python/COM.html">Python and COM</a></dt><dd><p>par David et Paul Boddie</p>
</dd>
</dl>
</div>
</section>
<section id="cx-freeze">
<h3><span class="section-number">4.10.2. </span>cx_Freeze<a class="headerlink" href="#cx-freeze" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference external" href="https://cx-freeze.readthedocs.io/en/latest/">cx_Freeze</a>
wraps Python scripts into executable Windows programs
(<code class="file docutils literal notranslate"><em><span class="pre">*</span></em><span class="pre">.exe</span></code> files).  When you have done this, you can distribute your
application without requiring your users to install Python.</p>
</section>
</section>
<section id="compiling-python-on-windows">
<h2><span class="section-number">4.11. </span>Compiler Python sous Windows<a class="headerlink" href="#compiling-python-on-windows" title="Lien permanent vers ce titre">¶</a></h2>
<p>Si vous voulez compiler CPython vous-même, la première chose à faire est obtenir la <a class="reference external" href="https://www.python.org/downloads/source/">source</a>. Vous pouvez télécharger soit la source de la dernière version ou tout simplement prendre un <a class="reference external" href="https://devguide.python.org/setup/#get-the-source-code">checkout</a>.</p>
<p>L'arborescence source contient une solution de compilation et des fichiers projet pour Microsoft Visual Studio, qui est le compilateur utilisé pour générer les versions officielles de Python. Ces fichiers se trouvent dans le répertoire <code class="file docutils literal notranslate"><span class="pre">PCbuild</span></code>.</p>
<p>Consultez <code class="file docutils literal notranslate"><span class="pre">PC/readme.txt</span></code> pour des informations générales sur le processus de construction.</p>
<p>Pour les modules d'extension, consultez <a class="reference internal" href="../extending/windows.html#building-on-windows"><span class="std std-ref">Construire des extensions C et C++ sur Windows</span></a>.</p>
</section>
<section id="other-platforms">
<h2><span class="section-number">4.12. </span>Autres plateformes<a class="headerlink" href="#other-platforms" title="Lien permanent vers ce titre">¶</a></h2>
<p>Avec le développement continu de Python, certaines plateformes qui étaient auparavant prises en charge ne sont plus prises en charge (en raison du manque d'utilisateurs ou de développeurs). Voir <span class="target" id="index-112"></span><a class="pep reference external" href="https://peps.python.org/pep-0011/"><strong>PEP 11</strong></a> pour plus de détails sur toutes les plateformes non prises en charge.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://pythonce.sourceforge.net/">Windows CE</a> n’est plus pris en charge <a class="reference external" href="https://github.com/python/cpython/issues/71542">https://github.com/python/cpython/issues/71542</a> depuis Python 3 (s’il l’a jamais été).</p></li>
<li><p>Le programme d’installation de <a class="reference external" href="https://cygwin.com/">Cygwin</a> propose d’installer également <a class="reference external" href="https://cygwin.com/packages/summary/python3.html">l’interpréteur Python</a>.</p></li>
</ul>
<p>Voir <a class="reference external" href="https://www.python.org/downloads/windows/">Python pour Windows</a> pour des instructions détaillées sur les plateformes avec installateurs pré-compilés.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../contents.html">Table des matières</a></h3>
    <ul>
<li><a class="reference internal" href="#">4. Utilisation de Python sur Windows</a><ul>
<li><a class="reference internal" href="#the-full-installer">4.1. L'installateur complet</a><ul>
<li><a class="reference internal" href="#installation-steps">4.1.1. Étapes d'installation</a></li>
<li><a class="reference internal" href="#removing-the-max-path-limitation">4.1.2. Suppression de la limitation <code class="docutils literal notranslate"><span class="pre">MAX_PATH</span></code></a></li>
<li><a class="reference internal" href="#installing-without-ui">4.1.3. Installation sans l'interface utilisateur</a></li>
<li><a class="reference internal" href="#installing-without-downloading">4.1.4. Installation sans téléchargement</a></li>
<li><a class="reference internal" href="#modifying-an-install">4.1.5. Modification d'une installation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-microsoft-store-package">4.2. Le paquet Microsoft Store</a><ul>
<li><a class="reference internal" href="#known-issues">4.2.1. Problèmes connus</a><ul>
<li><a class="reference internal" href="#redirection-of-local-data-registry-and-temporary-paths">4.2.1.1. Redirection des données locales, du registre et des chemins temporaires</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#the-nuget-org-packages">4.3. Les paquets <em>nuget.org</em></a></li>
<li><a class="reference internal" href="#the-embeddable-package">4.4. Le paquet intégrable</a><ul>
<li><a class="reference internal" href="#python-application">4.4.1. Application Python</a></li>
<li><a class="reference internal" href="#embedding-python">4.4.2. Embarquer Python</a></li>
</ul>
</li>
<li><a class="reference internal" href="#alternative-bundles">4.5. Paquets alternatifs</a></li>
<li><a class="reference internal" href="#configuring-python">4.6. Configurer Python</a><ul>
<li><a class="reference internal" href="#excursus-setting-environment-variables">4.6.1. Digression : définition des variables d'environnement</a></li>
<li><a class="reference internal" href="#finding-the-python-executable">4.6.2. Trouver l'exécutable Python</a></li>
</ul>
</li>
<li><a class="reference internal" href="#utf-8-mode">4.7. Mode UTF-8</a></li>
<li><a class="reference internal" href="#python-launcher-for-windows">4.8. Lanceur Python pour Windows</a><ul>
<li><a class="reference internal" href="#getting-started">4.8.1. Pour commencer</a><ul>
<li><a class="reference internal" href="#from-the-command-line">4.8.1.1. Depuis la ligne de commande</a></li>
<li><a class="reference internal" href="#virtual-environments">4.8.1.2. Environnements virtuels</a></li>
<li><a class="reference internal" href="#from-a-script">4.8.1.3. À partir d'un script</a></li>
<li><a class="reference internal" href="#from-file-associations">4.8.1.4. À partir d'associations de fichiers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#shebang-lines">4.8.2. Lignes Shebang</a></li>
<li><a class="reference internal" href="#arguments-in-shebang-lines">4.8.3. Arguments dans les lignes <em>shebang</em></a></li>
<li><a class="reference internal" href="#customization">4.8.4. Personnalisation</a><ul>
<li><a class="reference internal" href="#customization-via-ini-files">4.8.4.1. Personnalisation via des fichiers INI</a></li>
<li><a class="reference internal" href="#customizing-default-python-versions">4.8.4.2. Personnalisation des versions Python par défaut</a></li>
</ul>
</li>
<li><a class="reference internal" href="#diagnostics">4.8.5. Diagnostics</a></li>
<li><a class="reference internal" href="#dry-run">4.8.6. Exécution à vide</a></li>
<li><a class="reference internal" href="#install-on-demand">4.8.7. Installation à la demande</a></li>
<li><a class="reference internal" href="#return-codes">4.8.8. Codes de retour</a></li>
</ul>
</li>
<li><a class="reference internal" href="#finding-modules">4.9. Recherche de modules</a></li>
<li><a class="reference internal" href="#additional-modules">4.10. Modules supplémentaires</a><ul>
<li><a class="reference internal" href="#pywin32">4.10.1. PyWin32</a></li>
<li><a class="reference internal" href="#cx-freeze">4.10.2. cx_Freeze</a></li>
</ul>
</li>
<li><a class="reference internal" href="#compiling-python-on-windows">4.11. Compiler Python sous Windows</a></li>
<li><a class="reference internal" href="#other-platforms">4.12. Autres plateformes</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Sujet précédent</h4>
    <p class="topless"><a href="configure.html"
                          title="Chapitre précédent"><span class="section-number">3. </span>Configurer Python</a></p>
  </div>
  <div>
    <h4>Sujet suivant</h4>
    <p class="topless"><a href="mac.html"
                          title="Chapitre suivant"><span class="section-number">5. </span>Utilisation de Python sur un Mac</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Signalement de bogue</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/main/Doc/using/windows.rst"
            rel="nofollow">Voir la source
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Index des modules Python"
             >modules</a> |</li>
        <li class="right" >
          <a href="mac.html" title="5. Utilisation de Python sur un Mac"
             >suivant</a> |</li>
        <li class="right" >
          <a href="configure.html" title="3. Configurer Python"
             >précédent</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.12.0 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Installation et utilisation de Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">4. </span>Utilisation de Python sur Windows</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Recherche rapide" aria-label="Recherche rapide" type="search" name="q" id="search-box" />
          <input type="submit" value="Go" />
        </form>
    </div>
                     |
                </li>
            <li class="right">
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label> |</li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 2001-2023, Python Software Foundation.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    See <a href="/license.html">History and License</a> for more information.<br />
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    Mis à jour le oct. 26, 2023.
    <a href="/bugs.html">Found a bug</a>?
    <br />

    Créé en utilisant <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>

  </body>
</html>