
<!DOCTYPE html>

<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta property="og:title" content="4. Modèle d'exécution" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://docs.python.org/3/reference/executionmodel.html" />
<meta property="og:site_name" content="Python documentation" />
<meta property="og:description" content="Structure d'un programme: Un programme Python est construit à partir de blocs de code. Un bloc <block> est un morceau de texte de programme Python qui est exécuté en tant qu'unité. Les éléments sui..." />
<meta property="og:image" content="https://docs.python.org/3/_static/og-image.png" />
<meta property="og:image:alt" content="Python documentation" />
<meta name="description" content="Structure d'un programme: Un programme Python est construit à partir de blocs de code. Un bloc <block> est un morceau de texte de programme Python qui est exécuté en tant qu'unité. Les éléments sui..." />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta name="theme-color" content="#3776ab" />

    <title>4. Modèle d&#39;exécution &#8212; Documentation Python 3.12.0</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/pydoctheme.css?digest=b37c26da2f7529d09fe70b41c4b2133fe4931a90" />
    <link id="pygments_dark_css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css" href="../_static/pygments_dark.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Recherchez dans Documentation Python 3.12.0"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="À propos de ces documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="5. Le système d&#39;importation" href="import.html" />
    <link rel="prev" title="3. Modèle de données" href="datamodel.html" />
    <link rel="canonical" href="https://docs.python.org/3/reference/executionmodel.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="stylesheet" href="../_static/pydoctheme_dark.css" media="(prefers-color-scheme: dark)" id="pydoctheme_dark_css">
    <link rel="shortcut icon" type="image/png" href="../_static/py.svg" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script>
            <script type="text/javascript" src="../_static/search-focus.js"></script>
            <script type="text/javascript" src="../_static/themetoggle.js"></script> 

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <nav class="nav-content" role="navigation">
        <label for="menuToggler" class="toggler__label">
            <span></span>
        </label>
        <span class="nav-items-wrapper">
            <a href="https://www.python.org/" class="nav-logo">
                <img src="../_static/py.svg" alt="Logo"/>
            </a>
            <span class="version_switcher_placeholder"></span>
            <form role="search" class="search" action="../search.html" method="get">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                    <path fill-rule="nonzero" fill="currentColor" d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                </svg>
                <input placeholder="Recherche rapide" aria-label="Recherche rapide" type="search" name="q" />
                <input type="submit" value="Go"/>
            </form>
        </span>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
            
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label>
  <div>
    <h3><a href="../contents.html">Table des matières</a></h3>
    <ul>
<li><a class="reference internal" href="#">4. Modèle d'exécution</a><ul>
<li><a class="reference internal" href="#structure-of-a-program">4.1. Structure d'un programme</a></li>
<li><a class="reference internal" href="#naming-and-binding">4.2. Noms et liaisons</a><ul>
<li><a class="reference internal" href="#binding-of-names">4.2.1. Liaisons des noms</a></li>
<li><a class="reference internal" href="#resolution-of-names">4.2.2. Résolution des noms</a></li>
<li><a class="reference internal" href="#annotation-scopes">4.2.3. Annotation scopes</a></li>
<li><a class="reference internal" href="#lazy-evaluation">4.2.4. Lazy evaluation</a></li>
<li><a class="reference internal" href="#builtins-and-restricted-execution">4.2.5. Noms natifs et restrictions d'exécution</a></li>
<li><a class="reference internal" href="#interaction-with-dynamic-features">4.2.6. Interaction avec les fonctionnalités dynamiques</a></li>
</ul>
</li>
<li><a class="reference internal" href="#exceptions">4.3. Exceptions</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Sujet précédent</h4>
    <p class="topless"><a href="datamodel.html"
                          title="Chapitre précédent"><span class="section-number">3. </span>Modèle de données</a></p>
  </div>
  <div>
    <h4>Sujet suivant</h4>
    <p class="topless"><a href="import.html"
                          title="Chapitre suivant"><span class="section-number">5. </span>Le système d'importation</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Signalement de bogue</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/main/Doc/reference/executionmodel.rst"
            rel="nofollow">Voir la source
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Index des modules Python"
             >modules</a> |</li>
        <li class="right" >
          <a href="import.html" title="5. Le système d&#39;importation"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="datamodel.html" title="3. Modèle de données"
             accesskey="P">précédent</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.12.0 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">La référence du langage Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">4. </span>Modèle d'exécution</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Recherche rapide" aria-label="Recherche rapide" type="search" name="q" id="search-box" />
          <input type="submit" value="Go" />
        </form>
    </div>
                     |
                </li>
            <li class="right">
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label> |</li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="execution-model">
<span id="execmodel"></span><h1><span class="section-number">4. </span>Modèle d'exécution<a class="headerlink" href="#execution-model" title="Lien permanent vers ce titre">¶</a></h1>
<section id="structure-of-a-program">
<span id="prog-structure"></span><span id="index-0"></span><h2><span class="section-number">4.1. </span>Structure d'un programme<a class="headerlink" href="#structure-of-a-program" title="Lien permanent vers ce titre">¶</a></h2>
<p id="index-1">Un programme Python est construit à partir de blocs de code. Un <em class="dfn">bloc &lt;block&gt;</em> est un morceau de texte de programme Python qui est exécuté en tant qu'unité. Les éléments suivants sont des blocs : un module, un corps de fonction et une définition de classe. Chaque commande écrite dans l'interpréteur interactif de Python est un bloc. Un fichier de script (un fichier donné en entrée standard à l'interpréteur ou spécifié en tant qu'argument de ligne de commande à l'interpréteur) est un bloc de code. Une commande de script (une commande spécifiée en ligne de commande à l'interpréteur avec l'option <a class="reference internal" href="../using/cmdline.html#cmdoption-c"><code class="xref std std-option docutils literal notranslate"><span class="pre">-c</span></code></a>) est un bloc de code. Un module exécuté en tant que script principal (module <code class="docutils literal notranslate"><span class="pre">__main__</span></code>) depuis la ligne de commande en utilisant l'option <a class="reference internal" href="../using/cmdline.html#cmdoption-m"><code class="xref std std-option docutils literal notranslate"><span class="pre">-m</span></code></a> est aussi un bloc de code. La chaîne passée en argument aux fonctions natives <a class="reference internal" href="../library/functions.html#eval" title="eval"><code class="xref py py-func docutils literal notranslate"><span class="pre">eval()</span></code></a> et <a class="reference internal" href="../library/functions.html#exec" title="exec"><code class="xref py py-func docutils literal notranslate"><span class="pre">exec()</span></code></a> est un bloc de code.</p>
<p id="index-2">Un bloc de code est exécuté dans un <em class="dfn">cadre d'exécution</em>. Un cadre contient des informations administratives (utilisées pour le débogage) et détermine où et comment l'exécution se poursuit après la fin de l'exécution du bloc de code.</p>
</section>
<section id="naming-and-binding">
<span id="naming"></span><h2><span class="section-number">4.2. </span>Noms et liaisons<a class="headerlink" href="#naming-and-binding" title="Lien permanent vers ce titre">¶</a></h2>
<section id="binding-of-names">
<span id="bind-names"></span><span id="index-3"></span><h3><span class="section-number">4.2.1. </span>Liaisons des noms<a class="headerlink" href="#binding-of-names" title="Lien permanent vers ce titre">¶</a></h3>
<p id="index-4">Les <em class="dfn">noms</em> sont des références aux objets. Ils sont créés lors des opérations de liaisons de noms (<em>name binding</em> en anglais).</p>
<p id="index-5">Les noms sont liés <em>via</em> les constructions suivantes :</p>
<ul class="simple">
<li><p>paramètres formels de fonctions,</p></li>
<li><p>définitions de classes,</p></li>
<li><p>définitions de fonctions,</p></li>
<li><p>expressions d'affectation,</p></li>
<li><p><a class="reference internal" href="simple_stmts.html#assignment"><span class="std std-ref">cibles</span></a> qui sont des identifiants, lorsque c'est une affectation :</p>
<ul>
<li><p>de l'entête d'une boucle <a class="reference internal" href="compound_stmts.html#for"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">for</span></code></a>,</p></li>
<li><p>after <code class="xref std std-keyword docutils literal notranslate"><span class="pre">as</span></code> in a <a class="reference internal" href="compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> statement, <a class="reference internal" href="compound_stmts.html#except"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">except</span></code></a>
clause, <a class="reference internal" href="compound_stmts.html#except-star"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">except*</span></code></a> clause, or in the as-pattern in structural pattern matching,</p></li>
<li><p>dans un champ de recherche d'un filtrage par motifs</p></li>
</ul>
</li>
<li><p>des instructions <a class="reference internal" href="simple_stmts.html#import"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">import</span></code></a>.</p></li>
<li><p><a class="reference internal" href="simple_stmts.html#type"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">type</span></code></a> statements.</p></li>
<li><p><a class="reference internal" href="compound_stmts.html#type-params"><span class="std std-ref">type parameter lists</span></a>.</p></li>
</ul>
<p>L'instruction <code class="xref std std-keyword docutils literal notranslate"><span class="pre">import</span></code> sous la forme <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">...</span> <span class="pre">import</span> <span class="pre">*</span></code> lie tous les noms définis dans le module importé, sauf ceux qui commencent par le caractère souligné. Cette écriture ne peut être utilisée qu'au niveau du module.</p>
<p>Une cible qui apparaît dans une instruction <a class="reference internal" href="simple_stmts.html#del"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">del</span></code></a> est aussi considérée comme une liaison à un nom dans ce cadre (bien que la sémantique véritable soit de délier le nom).</p>
<p>Chaque affectation ou instruction <em>import</em> a lieu dans un bloc défini par une définition de classe ou de fonction, ou au niveau du module (le bloc de code de plus haut niveau).</p>
<p id="index-6">Si un nom est lié dans un bloc, c'est une variable locale de ce bloc, à moins qu'il ne soit déclaré <a class="reference internal" href="simple_stmts.html#nonlocal"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">nonlocal</span></code></a> ou <a class="reference internal" href="simple_stmts.html#global"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">global</span></code></a>. Si un nom est lié au niveau du module, c'est une variable globale (les variables du bloc de code de niveau module sont locales et globales). Si une variable est utilisée dans un bloc de code alors qu'elle n'y est pas définie, c'est une <em class="dfn">variable libre</em>.</p>
<p>Chaque occurrence d'un nom dans un programme fait référence à la <em class="dfn">liaison</em> de ce nom établie par les règles de résolution des noms suivantes.</p>
</section>
<section id="resolution-of-names">
<span id="resolve-names"></span><h3><span class="section-number">4.2.2. </span>Résolution des noms<a class="headerlink" href="#resolution-of-names" title="Lien permanent vers ce titre">¶</a></h3>
<p id="index-7">La <em class="dfn">portée</em> définit la visibilité d'un nom dans un bloc. Si une variable locale est définie dans un bloc, sa portée comprend ce bloc. Si la définition intervient dans le bloc d'une fonction, la portée s'étend à tous les blocs contenus dans celui qui comprend la définition, à moins qu'un bloc intérieur ne définisse une autre liaison pour ce nom.</p>
<p id="index-8">Quand un nom est utilisé dans un bloc de code, la résolution utilise la portée la plus petite. L'ensemble de toutes les portées visibles dans un bloc de code s'appelle <em class="dfn">l'environnement</em> du bloc.</p>
<p id="index-9">Quand un nom n'est trouvé nulle part, une exception <a class="reference internal" href="../library/exceptions.html#NameError" title="NameError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NameError</span></code></a> est levée. Si la portée courante est celle d'une fonction et que le nom fait référence à une variable locale qui n'a pas encore été liée au moment où le nom est utilisé, une exception <a class="reference internal" href="../library/exceptions.html#UnboundLocalError" title="UnboundLocalError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UnboundLocalError</span></code></a> est levée. <a class="reference internal" href="../library/exceptions.html#UnboundLocalError" title="UnboundLocalError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UnboundLocalError</span></code></a> est une sous-classe de <a class="reference internal" href="../library/exceptions.html#NameError" title="NameError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NameError</span></code></a>.</p>
<p>If a name binding operation occurs anywhere within a code block, all uses of the
name within the block are treated as references to the current block.  This can
lead to errors when a name is used within a block before it is bound.  This rule
is subtle.  Python lacks declarations and allows name binding operations to
occur anywhere within a code block.  The local variables of a code block can be
determined by scanning the entire text of the block for name binding operations.
See <a class="reference internal" href="../faq/programming.html#faq-unboundlocalerror"><span class="std std-ref">the FAQ entry on UnboundLocalError</span></a>
for examples.</p>
<p>Si l'instruction <a class="reference internal" href="simple_stmts.html#global"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">global</span></code></a> apparaît dans un bloc, toutes les utilisations du nom spécifié dans l'instruction font référence à la liaison de ce nom dans l'espace de nommage de plus haut niveau. Les noms sont résolus dans cet espace de nommage de plus haut niveau en recherchant l'espace des noms globaux, c'est-à-dire l'espace de nommage du module contenant le bloc de code ainsi que dans l'espace de nommage natif, celui du module <a class="reference internal" href="../library/builtins.html#module-builtins" title="builtins: The module that provides the built-in namespace."><code class="xref py py-mod docutils literal notranslate"><span class="pre">builtins</span></code></a>. La recherche commence dans l'espace de nommage global. Si le nom n'y est pas trouvé, la recherche se poursuit dans l'espace de nommage natif. L'instruction <code class="xref std std-keyword docutils literal notranslate"><span class="pre">global</span></code> doit précéder toute utilisation des noms considérés.</p>
<p>L'instruction <a class="reference internal" href="simple_stmts.html#global"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">global</span></code></a> a la même porte qu'une opération de liaison du même bloc. Si la portée englobante la plus petite pour une variable libre contient une instruction <em>global</em>, la variable libre est considérée globale.</p>
<p>The <a class="reference internal" href="simple_stmts.html#nonlocal"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">nonlocal</span></code></a> statement causes corresponding names to refer
to previously bound variables in the nearest enclosing function scope.
<a class="reference internal" href="../library/exceptions.html#SyntaxError" title="SyntaxError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxError</span></code></a> is raised at compile time if the given name does not
exist in any enclosing function scope. <a class="reference internal" href="compound_stmts.html#type-params"><span class="std std-ref">Type parameters</span></a>
cannot be rebound with the <code class="xref std std-keyword docutils literal notranslate"><span class="pre">nonlocal</span></code> statement.</p>
<p id="index-10">L'espace de nommage pour un module est créé automatiquement la première fois que le module est importé. Le module principal d'un script s'appelle toujours <a class="reference internal" href="../library/__main__.html#module-__main__" title="__main__: The environment where top-level code is run. Covers command-line interfaces, import-time behavior, and ``__name__ == '__main__'``."><code class="xref py py-mod docutils literal notranslate"><span class="pre">__main__</span></code></a>.</p>
<p>Class definition blocks and arguments to <a class="reference internal" href="../library/functions.html#exec" title="exec"><code class="xref py py-func docutils literal notranslate"><span class="pre">exec()</span></code></a> and <a class="reference internal" href="../library/functions.html#eval" title="eval"><code class="xref py py-func docutils literal notranslate"><span class="pre">eval()</span></code></a> are
special in the context of name resolution.
A class definition is an executable statement that may use and define names.
These references follow the normal rules for name resolution with an exception
that unbound local variables are looked up in the global namespace.
The namespace of the class definition becomes the attribute dictionary of
the class. The scope of names defined in a class block is limited to the
class block; it does not extend to the code blocks of methods. This includes
comprehensions and generator expressions, but it does not include
<a class="reference internal" href="#annotation-scopes"><span class="std std-ref">annotation scopes</span></a>,
which have access to their enclosing class scopes.
This means that the following will fail:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">42</span>
    <span class="n">b</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
<p>However, the following will succeed:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="nb">type</span> <span class="n">Alias</span> <span class="o">=</span> <span class="n">Nested</span>
    <span class="k">class</span> <span class="nc">Nested</span><span class="p">:</span> <span class="k">pass</span>

<span class="nb">print</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">Alias</span><span class="o">.</span><span class="n">__value__</span><span class="p">)</span>  <span class="c1"># &lt;type &#39;A.Nested&#39;&gt;</span>
</pre></div>
</div>
</section>
<section id="annotation-scopes">
<span id="id1"></span><h3><span class="section-number">4.2.3. </span>Annotation scopes<a class="headerlink" href="#annotation-scopes" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference internal" href="compound_stmts.html#type-params"><span class="std std-ref">Type parameter lists</span></a> and <a class="reference internal" href="simple_stmts.html#type"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">type</span></code></a> statements
introduce <em>annotation scopes</em>, which behave mostly like function scopes,
but with some exceptions discussed below. <a class="reference internal" href="../glossary.html#term-annotation"><span class="xref std std-term">Annotations</span></a>
currently do not use annotation scopes, but they are expected to use
annotation scopes in Python 3.13 when <span class="target" id="index-11"></span><a class="pep reference external" href="https://peps.python.org/pep-0649/"><strong>PEP 649</strong></a> is implemented.</p>
<p>Annotation scopes are used in the following contexts:</p>
<ul class="simple">
<li><p>Type parameter lists for <a class="reference internal" href="compound_stmts.html#generic-type-aliases"><span class="std std-ref">generic type aliases</span></a>.</p></li>
<li><p>Type parameter lists for <a class="reference internal" href="compound_stmts.html#generic-functions"><span class="std std-ref">generic functions</span></a>.
A generic function's annotations are
executed within the annotation scope, but its defaults and decorators are not.</p></li>
<li><p>Type parameter lists for <a class="reference internal" href="compound_stmts.html#generic-classes"><span class="std std-ref">generic classes</span></a>.
A generic class's base classes and
keyword arguments are executed within the annotation scope, but its decorators are not.</p></li>
<li><p>The bounds and constraints for type variables
(<a class="reference internal" href="#lazy-evaluation"><span class="std std-ref">lazily evaluated</span></a>).</p></li>
<li><p>The value of type aliases (<a class="reference internal" href="#lazy-evaluation"><span class="std std-ref">lazily evaluated</span></a>).</p></li>
</ul>
<p>Annotation scopes differ from function scopes in the following ways:</p>
<ul class="simple">
<li><p>Annotation scopes have access to their enclosing class namespace.
If an annotation scope is immediately within a class scope, or within another
annotation scope that is immediately within a class scope, the code in the
annotation scope can use names defined in the class scope as if it were
executed directly within the class body. This contrasts with regular
functions defined within classes, which cannot access names defined in the class scope.</p></li>
<li><p>Expressions in annotation scopes cannot contain <a class="reference internal" href="simple_stmts.html#yield"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">yield</span></code></a>, <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code>,
<a class="reference internal" href="expressions.html#await"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">await</span></code></a>, or <a class="reference internal" href="expressions.html#grammar-token-python-grammar-assignment_expression"><code class="xref std std-token docutils literal notranslate"><span class="pre">:=</span></code></a>
expressions. (These expressions are allowed in other scopes contained within the
annotation scope.)</p></li>
<li><p>Names defined in annotation scopes cannot be rebound with <a class="reference internal" href="simple_stmts.html#nonlocal"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">nonlocal</span></code></a>
statements in inner scopes. This includes only type parameters, as no other
syntactic elements that can appear within annotation scopes can introduce new names.</p></li>
<li><p>While annotation scopes have an internal name, that name is not reflected in the
<a class="reference internal" href="../glossary.html#term-qualified-name"><span class="xref std std-term">__qualname__</span></a> of objects defined within the scope.
Instead, the <code class="xref py py-attr docutils literal notranslate"><span class="pre">__qualname__</span></code>
of such objects is as if the object were defined in the enclosing scope.</p></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">Nouveau dans la version 3.12: </span>Annotation scopes were introduced in Python 3.12 as part of <span class="target" id="index-12"></span><a class="pep reference external" href="https://peps.python.org/pep-0695/"><strong>PEP 695</strong></a>.</p>
</div>
</section>
<section id="lazy-evaluation">
<span id="id2"></span><h3><span class="section-number">4.2.4. </span>Lazy evaluation<a class="headerlink" href="#lazy-evaluation" title="Lien permanent vers ce titre">¶</a></h3>
<p>The values of type aliases created through the <a class="reference internal" href="simple_stmts.html#type"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">type</span></code></a> statement are
<em>lazily evaluated</em>. The same applies to the bounds and constraints of type
variables created through the <a class="reference internal" href="compound_stmts.html#type-params"><span class="std std-ref">type parameter syntax</span></a>.
This means that they are not evaluated when the type alias or type variable is
created. Instead, they are only evaluated when doing so is necessary to resolve
an attribute access.</p>
<p>Example:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span> <span class="n">Alias</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Alias</span><span class="o">.</span><span class="n">__value__</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="w">  </span><span class="c">...</span>
<span class="gr">ZeroDivisionError</span>: <span class="n">division by zero</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">func</span><span class="p">[</span><span class="n">T</span><span class="p">:</span> <span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="p">]():</span> <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="n">__type_params__</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span><span class="o">.</span><span class="n">__bound__</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="w">  </span><span class="c">...</span>
<span class="gr">ZeroDivisionError</span>: <span class="n">division by zero</span>
</pre></div>
</div>
<p>Here the exception is raised only when the <code class="docutils literal notranslate"><span class="pre">__value__</span></code> attribute
of the type alias or the <code class="docutils literal notranslate"><span class="pre">__bound__</span></code> attribute of the type variable
is accessed.</p>
<p>This behavior is primarily useful for references to types that have not
yet been defined when the type alias or type variable is created. For example,
lazy evaluation enables creation of mutually recursive type aliases:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Literal</span>

<span class="nb">type</span> <span class="n">SimpleExpr</span> <span class="o">=</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">Parenthesized</span>
<span class="nb">type</span> <span class="n">Parenthesized</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;(&quot;</span><span class="p">],</span> <span class="n">Expr</span><span class="p">,</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;)&quot;</span><span class="p">]]</span>
<span class="nb">type</span> <span class="n">Expr</span> <span class="o">=</span> <span class="n">SimpleExpr</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">SimpleExpr</span><span class="p">,</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">],</span> <span class="n">Expr</span><span class="p">]</span>
</pre></div>
</div>
<p>Lazily evaluated values are evaluated in <a class="reference internal" href="#annotation-scopes"><span class="std std-ref">annotation scope</span></a>,
which means that names that appear inside the lazily evaluated value are looked up
as if they were used in the immediately enclosing scope.</p>
<div class="versionadded">
<p><span class="versionmodified added">Nouveau dans la version 3.12.</span></p>
</div>
</section>
<section id="builtins-and-restricted-execution">
<span id="restrict-exec"></span><h3><span class="section-number">4.2.5. </span>Noms natifs et restrictions d'exécution<a class="headerlink" href="#builtins-and-restricted-execution" title="Lien permanent vers ce titre">¶</a></h3>
<div class="impl-detail compound" id="index-13">
<p><strong>Particularité de l'implémentation CPython :</strong> L'utilisateur ne doit pas toucher à <code class="docutils literal notranslate"><span class="pre">__builtins__</span></code> ; c'est et cela doit rester réservé aux besoins de l'implémentation. Les utilisateurs qui souhaitent surcharger des valeurs dans l'espace de nommage natif doivent <a class="reference internal" href="simple_stmts.html#import"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">importer</span></code></a> le module <a class="reference internal" href="../library/builtins.html#module-builtins" title="builtins: The module that provides the built-in namespace."><code class="xref py py-mod docutils literal notranslate"><span class="pre">builtins</span></code></a> et modifier ses attributs judicieusement.</p>
</div>
<p>L'espace de nommage natif associé à l'exécution d'un bloc de code est effectivement trouvé en cherchant le nom <code class="docutils literal notranslate"><span class="pre">__builtins__</span></code> dans l'espace de nommage globaux ; ce doit être un dictionnaire ou un module (dans ce dernier cas, le dictionnaire du module est utilisé). Par défaut, lorsque l'on se trouve dans le module <a class="reference internal" href="../library/__main__.html#module-__main__" title="__main__: The environment where top-level code is run. Covers command-line interfaces, import-time behavior, and ``__name__ == '__main__'``."><code class="xref py py-mod docutils literal notranslate"><span class="pre">__main__</span></code></a>, <code class="docutils literal notranslate"><span class="pre">__builtins__</span></code> est le module natif <a class="reference internal" href="../library/builtins.html#module-builtins" title="builtins: The module that provides the built-in namespace."><code class="xref py py-mod docutils literal notranslate"><span class="pre">builtins</span></code></a> ; lorsque l'on se trouve dans tout autre module, <code class="docutils literal notranslate"><span class="pre">__builtins__</span></code> est un pseudonyme du dictionnaire du module <a class="reference internal" href="../library/builtins.html#module-builtins" title="builtins: The module that provides the built-in namespace."><code class="xref py py-mod docutils literal notranslate"><span class="pre">builtins</span></code></a> lui-même.</p>
</section>
<section id="interaction-with-dynamic-features">
<span id="dynamic-features"></span><h3><span class="section-number">4.2.6. </span>Interaction avec les fonctionnalités dynamiques<a class="headerlink" href="#interaction-with-dynamic-features" title="Lien permanent vers ce titre">¶</a></h3>
<p>La résolution des noms de variables libres intervient à l'exécution, pas à la compilation. Cela signifie que le code suivant affiche 42 :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">42</span>
<span class="n">f</span><span class="p">()</span>
</pre></div>
</div>
<p>Les fonctions <a class="reference internal" href="../library/functions.html#eval" title="eval"><code class="xref py py-func docutils literal notranslate"><span class="pre">eval()</span></code></a> et <a class="reference internal" href="../library/functions.html#exec" title="exec"><code class="xref py py-func docutils literal notranslate"><span class="pre">exec()</span></code></a> n'ont pas accès à l'environnement complet pour résoudre les noms. Les noms doivent être résolus dans les espaces de nommage locaux et globaux de l'appelant. Les variables libres ne sont pas résolues dans l'espace de nommage englobant le plus proche mais dans l'espace de nommage globaux <a class="footnote-reference brackets" href="#id5" id="id3">1</a>. Les fonctions <a class="reference internal" href="../library/functions.html#eval" title="eval"><code class="xref py py-func docutils literal notranslate"><span class="pre">eval()</span></code></a> et <a class="reference internal" href="../library/functions.html#exec" title="exec"><code class="xref py py-func docutils literal notranslate"><span class="pre">exec()</span></code></a> possèdent des arguments optionnels pour surcharger les espaces de nommage globaux et locaux. Si seulement un espace de nommage est spécifié, il est utilisé pour les deux.</p>
</section>
</section>
<section id="exceptions">
<span id="id4"></span><h2><span class="section-number">4.3. </span>Exceptions<a class="headerlink" href="#exceptions" title="Lien permanent vers ce titre">¶</a></h2>
<span class="target" id="index-14"></span><p id="index-15">Les exceptions sont un moyen de sortir du flot normal d'exécution d'un bloc de code de manière à gérer des erreurs ou des conditions exceptionnelles. Une exception est <em>levée</em> au moment où l'erreur est détectée ; elle doit être <em>gérée</em> par le bloc de code qui l'entoure ou par tout bloc de code qui a, directement ou indirectement, invoqué le bloc de code où l'erreur s'est produite.</p>
<p>L'interpréteur Python lève une exception quand il détecte une erreur à l'exécution (telle qu'une division par zéro). Un programme Python peut aussi lever explicitement une exception avec l'instruction <a class="reference internal" href="simple_stmts.html#raise"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">raise</span></code></a>. Les gestionnaires d'exception sont spécifiés avec l'instruction <a class="reference internal" href="compound_stmts.html#try"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">try</span></code></a> … <a class="reference internal" href="compound_stmts.html#except"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">except</span></code></a>. La clause <a class="reference internal" href="compound_stmts.html#finally"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">finally</span></code></a> d'une telle instruction peut être utilisée pour spécifier un code de nettoyage qui ne gère pas l'exception mais qui est exécuté quoi qu'il arrive (exception ou pas).</p>
<p id="index-16">Python utilise le modèle par <em>terminaison</em> de gestion des erreurs : un gestionnaire d'exception peut trouver ce qui est arrivé et continuer l'exécution à un niveau plus élevé, mais il ne peut pas réparer l'origine de l'erreur et ré-essayer l'opération qui a échoué (sauf à entrer à nouveau dans le code en question par le haut).</p>
<p id="index-17">Quand une exception n'est pas du tout gérée, l'interpréteur termine l'exécution du programme ou retourne à la boucle interactive. Dans ces cas, il affiche une trace de la pile d'appels, sauf si l'exception est <a class="reference internal" href="../library/exceptions.html#SystemExit" title="SystemExit"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SystemExit</span></code></a>.</p>
<p>Les exceptions sont identifiées par des instances de classe. La clause <a class="reference internal" href="compound_stmts.html#except"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">except</span></code></a> sélectionnée dépend de la classe de l'instance : elle doit faire référence à la classe de l'instance ou à une de ses <a class="reference internal" href="../glossary.html#term-abstract-base-class"><span class="xref std std-term">classes ancêtres non virtuelles</span></a>. L'instance peut être transmise au gestionnaire et peut apporter des informations complémentaires sur les conditions de l'exception.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Les messages d'exception ne font pas partie de l'API Python. Leur contenu peut changer d'une version de Python à une autre sans avertissement et le code ne doit pas reposer sur ceux-ci s'il doit fonctionner sur plusieurs versions de l'interpréteur.</p>
</div>
<p>Reportez-vous aussi aux descriptions de l'instruction <a class="reference internal" href="compound_stmts.html#try"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">try</span></code></a> dans la section <a class="reference internal" href="compound_stmts.html#try"><span class="std std-ref">L'instruction try</span></a> et de l'instruction <a class="reference internal" href="simple_stmts.html#raise"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">raise</span></code></a> dans la section <a class="reference internal" href="simple_stmts.html#raise"><span class="std std-ref">L'instruction raise</span></a>.</p>
<p class="rubric">Notes</p>
<dl class="footnote brackets">
<dt class="label" id="id5"><span class="brackets"><a class="fn-backref" href="#id3">1</a></span></dt>
<dd><p>En effet, le code qui est exécuté par ces opérations n'est pas connu au moment où le module est compilé.</p>
</dd>
</dl>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../contents.html">Table des matières</a></h3>
    <ul>
<li><a class="reference internal" href="#">4. Modèle d'exécution</a><ul>
<li><a class="reference internal" href="#structure-of-a-program">4.1. Structure d'un programme</a></li>
<li><a class="reference internal" href="#naming-and-binding">4.2. Noms et liaisons</a><ul>
<li><a class="reference internal" href="#binding-of-names">4.2.1. Liaisons des noms</a></li>
<li><a class="reference internal" href="#resolution-of-names">4.2.2. Résolution des noms</a></li>
<li><a class="reference internal" href="#annotation-scopes">4.2.3. Annotation scopes</a></li>
<li><a class="reference internal" href="#lazy-evaluation">4.2.4. Lazy evaluation</a></li>
<li><a class="reference internal" href="#builtins-and-restricted-execution">4.2.5. Noms natifs et restrictions d'exécution</a></li>
<li><a class="reference internal" href="#interaction-with-dynamic-features">4.2.6. Interaction avec les fonctionnalités dynamiques</a></li>
</ul>
</li>
<li><a class="reference internal" href="#exceptions">4.3. Exceptions</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Sujet précédent</h4>
    <p class="topless"><a href="datamodel.html"
                          title="Chapitre précédent"><span class="section-number">3. </span>Modèle de données</a></p>
  </div>
  <div>
    <h4>Sujet suivant</h4>
    <p class="topless"><a href="import.html"
                          title="Chapitre suivant"><span class="section-number">5. </span>Le système d'importation</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Signalement de bogue</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/main/Doc/reference/executionmodel.rst"
            rel="nofollow">Voir la source
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Index des modules Python"
             >modules</a> |</li>
        <li class="right" >
          <a href="import.html" title="5. Le système d&#39;importation"
             >suivant</a> |</li>
        <li class="right" >
          <a href="datamodel.html" title="3. Modèle de données"
             >précédent</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.12.0 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >La référence du langage Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">4. </span>Modèle d'exécution</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Recherche rapide" aria-label="Recherche rapide" type="search" name="q" id="search-box" />
          <input type="submit" value="Go" />
        </form>
    </div>
                     |
                </li>
            <li class="right">
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label> |</li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 2001-2023, Python Software Foundation.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    See <a href="/license.html">History and License</a> for more information.<br />
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    Mis à jour le oct. 26, 2023.
    <a href="/bugs.html">Found a bug</a>?
    <br />

    Créé en utilisant <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>

  </body>
</html>