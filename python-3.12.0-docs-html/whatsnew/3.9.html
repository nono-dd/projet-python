
<!DOCTYPE html>

<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta property="og:title" content="Les nouveautés de Python 3.9" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://docs.python.org/3/whatsnew/3.9.html" />
<meta property="og:site_name" content="Python documentation" />
<meta property="og:description" content="Éditeur, Łukasz Langa,. This article explains the new features in Python 3.9, compared to 3.8. Python 3.9 was released on October 5, 2020. For full details, see the changelog. Résumé – Points marqu..." />
<meta property="og:image" content="https://docs.python.org/3/_static/og-image.png" />
<meta property="og:image:alt" content="Python documentation" />
<meta name="description" content="Éditeur, Łukasz Langa,. This article explains the new features in Python 3.9, compared to 3.8. Python 3.9 was released on October 5, 2020. For full details, see the changelog. Résumé – Points marqu..." />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta name="theme-color" content="#3776ab" />

    <title>Les nouveautés de Python 3.9 &#8212; Documentation Python 3.12.0</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/pydoctheme.css?digest=b37c26da2f7529d09fe70b41c4b2133fe4931a90" />
    <link id="pygments_dark_css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css" href="../_static/pygments_dark.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Recherchez dans Documentation Python 3.12.0"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="À propos de ces documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Nouveautés de Python 3.8" href="3.8.html" />
    <link rel="prev" title="Les nouveautés de Python 3.10" href="3.10.html" />
    <link rel="canonical" href="https://docs.python.org/3/whatsnew/3.9.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="stylesheet" href="../_static/pydoctheme_dark.css" media="(prefers-color-scheme: dark)" id="pydoctheme_dark_css">
    <link rel="shortcut icon" type="image/png" href="../_static/py.svg" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script>
            <script type="text/javascript" src="../_static/search-focus.js"></script>
            <script type="text/javascript" src="../_static/themetoggle.js"></script> 

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <nav class="nav-content" role="navigation">
        <label for="menuToggler" class="toggler__label">
            <span></span>
        </label>
        <span class="nav-items-wrapper">
            <a href="https://www.python.org/" class="nav-logo">
                <img src="../_static/py.svg" alt="Logo"/>
            </a>
            <span class="version_switcher_placeholder"></span>
            <form role="search" class="search" action="../search.html" method="get">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                    <path fill-rule="nonzero" fill="currentColor" d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                </svg>
                <input placeholder="Recherche rapide" aria-label="Recherche rapide" type="search" name="q" />
                <input type="submit" value="Go"/>
            </form>
        </span>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
            
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label>
  <div>
    <h3><a href="../contents.html">Table des matières</a></h3>
    <ul>
<li><a class="reference internal" href="#">Les nouveautés de Python 3.9</a><ul>
<li><a class="reference internal" href="#summary-release-highlights">Résumé – Points marquants de cette version</a></li>
<li><a class="reference internal" href="#you-should-check-for-deprecationwarning-in-your-code">Vous devez vérifier la présence de <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> dans votre code</a></li>
<li><a class="reference internal" href="#new-features">Nouvelles fonctionnalités</a><ul>
<li><a class="reference internal" href="#dictionary-merge-update-operators">Opérateurs de fusion et de mise à jour de dictionnaires</a></li>
<li><a class="reference internal" href="#new-string-methods-to-remove-prefixes-and-suffixes">Nouvelles méthodes sur les chaînes pour retirer des préfixes et des suffixes</a></li>
<li><a class="reference internal" href="#type-hinting-generics-in-standard-collections">Indication des types paramétrables dans les collections natives</a></li>
<li><a class="reference internal" href="#new-parser">Nouvel analyseur syntaxique</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-language-changes">Autres changements au langage</a></li>
<li><a class="reference internal" href="#new-modules">Nouveaux modules</a><ul>
<li><a class="reference internal" href="#zoneinfo"><em>zoneinfo</em></a></li>
<li><a class="reference internal" href="#graphlib"><em>graphlib</em></a></li>
</ul>
</li>
<li><a class="reference internal" href="#improved-modules">Modules améliorés</a><ul>
<li><a class="reference internal" href="#ast"><em>ast</em></a></li>
<li><a class="reference internal" href="#asyncio"><em>asyncio</em></a></li>
<li><a class="reference internal" href="#compileall"><em>compileall</em></a></li>
<li><a class="reference internal" href="#concurrent-futures"><em>concurrent.futures</em></a></li>
<li><a class="reference internal" href="#curses"><em>curses</em></a></li>
<li><a class="reference internal" href="#datetime"><em>datetime</em></a></li>
<li><a class="reference internal" href="#distutils"><em>distutils</em></a></li>
<li><a class="reference internal" href="#fcntl"><em>fcntl</em></a></li>
<li><a class="reference internal" href="#ftplib"><em>ftplib</em></a></li>
<li><a class="reference internal" href="#gc"><em>gc</em></a></li>
<li><a class="reference internal" href="#hashlib"><em>hashlib</em></a></li>
<li><a class="reference internal" href="#http"><em>http</em></a></li>
<li><a class="reference internal" href="#idle-and-idlelib"><em>IDLE</em> et <em>idlelib</em></a></li>
<li><a class="reference internal" href="#imaplib"><em>imaplib</em></a></li>
<li><a class="reference internal" href="#importlib"><em>importlib</em></a></li>
<li><a class="reference internal" href="#inspect"><em>inspect</em></a></li>
<li><a class="reference internal" href="#ipaddress"><em>ipaddress</em></a></li>
<li><a class="reference internal" href="#math"><em>math</em></a></li>
<li><a class="reference internal" href="#multiprocessing"><em>multiprocessing</em></a></li>
<li><a class="reference internal" href="#nntplib"><em>nntplib</em></a></li>
<li><a class="reference internal" href="#os"><em>os</em></a></li>
<li><a class="reference internal" href="#pathlib"><em>pathlib</em></a></li>
<li><a class="reference internal" href="#pdb"><em>pdb</em></a></li>
<li><a class="reference internal" href="#poplib"><em>poplib</em></a></li>
<li><a class="reference internal" href="#pprint"><em>pprint</em></a></li>
<li><a class="reference internal" href="#pydoc"><em>pydoc</em></a></li>
<li><a class="reference internal" href="#random"><em>random</em></a></li>
<li><a class="reference internal" href="#signal"><em>signal</em></a></li>
<li><a class="reference internal" href="#smtplib"><em>smtplib</em></a></li>
<li><a class="reference internal" href="#socket"><em>socket</em></a></li>
<li><a class="reference internal" href="#time"><em>time</em></a></li>
<li><a class="reference internal" href="#sys"><em>sys</em></a></li>
<li><a class="reference internal" href="#tracemalloc"><em>tracemalloc</em></a></li>
<li><a class="reference internal" href="#typing"><em>typing</em></a></li>
<li><a class="reference internal" href="#unicodedata"><em>unicodedata</em></a></li>
<li><a class="reference internal" href="#venv"><em>venv</em></a></li>
<li><a class="reference internal" href="#xml"><em>xml</em></a></li>
</ul>
</li>
<li><a class="reference internal" href="#optimizations">Optimisations</a></li>
<li><a class="reference internal" href="#deprecated">Obsolescence</a></li>
<li><a class="reference internal" href="#removed">Retraits</a></li>
<li><a class="reference internal" href="#porting-to-python-3-9">Portage vers Python 3.9</a><ul>
<li><a class="reference internal" href="#changes-in-the-python-api">Changements dans l'API Python</a></li>
<li><a class="reference internal" href="#changes-in-the-c-api">Changements dans l'API C</a></li>
<li><a class="reference internal" href="#cpython-bytecode-changes">Changements au code intermédiaire CPython</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-changes">Changements à la compilation</a></li>
<li><a class="reference internal" href="#c-api-changes">Changements à l'API C</a><ul>
<li><a class="reference internal" href="#id1">Nouvelles fonctionnalités</a></li>
<li><a class="reference internal" href="#id2">Portage vers Python 3.9</a></li>
<li><a class="reference internal" href="#id3">Retraits</a></li>
</ul>
</li>
<li><a class="reference internal" href="#notable-changes-in-python-3-9-1">Changements importants dans Python 3.9.1</a><ul>
<li><a class="reference internal" href="#id4"><em>typing</em></a></li>
<li><a class="reference internal" href="#macos-11-0-big-sur-and-apple-silicon-mac-support">Prise en charge de <em>macOS</em> 11.0 (Big Sur) et de Mac sur processeur Apple</a></li>
</ul>
</li>
<li><a class="reference internal" href="#notable-changes-in-python-3-9-2">Changements importants dans Python 3.9.2</a><ul>
<li><a class="reference internal" href="#collections-abc"><em>collections.abc</em></a></li>
<li><a class="reference internal" href="#urllib-parse"><em>urllib.parse</em></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Sujet précédent</h4>
    <p class="topless"><a href="3.10.html"
                          title="Chapitre précédent">Les nouveautés de Python 3.10</a></p>
  </div>
  <div>
    <h4>Sujet suivant</h4>
    <p class="topless"><a href="3.8.html"
                          title="Chapitre suivant">Nouveautés de Python 3.8</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Signalement de bogue</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/main/Doc/whatsnew/3.9.rst"
            rel="nofollow">Voir la source
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Index des modules Python"
             >modules</a> |</li>
        <li class="right" >
          <a href="3.8.html" title="Nouveautés de Python 3.8"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="3.10.html" title="Les nouveautés de Python 3.10"
             accesskey="P">précédent</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.12.0 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Nouveautés de Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Les nouveautés de Python 3.9</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Recherche rapide" aria-label="Recherche rapide" type="search" name="q" id="search-box" />
          <input type="submit" value="Go" />
        </form>
    </div>
                     |
                </li>
            <li class="right">
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label> |</li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="what-s-new-in-python-3-9">
<h1>Les nouveautés de Python 3.9<a class="headerlink" href="#what-s-new-in-python-3-9" title="Lien permanent vers ce titre">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Éditeur</dt>
<dd class="field-odd"><p>Łukasz Langa</p>
</dd>
</dl>
<p>This article explains the new features in Python 3.9, compared to 3.8.
Python 3.9 was released on October 5, 2020.
For full details, see the <a class="reference internal" href="changelog.html#changelog"><span class="std std-ref">changelog</span></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">Voir aussi</p>
<p><span class="target" id="index-53"></span><a class="pep reference external" href="https://peps.python.org/pep-0596/"><strong>PEP 596</strong></a> – Calendrier de sortie de Python 3.9</p>
</div>
<section id="summary-release-highlights">
<h2>Résumé – Points marquants de cette version<a class="headerlink" href="#summary-release-highlights" title="Lien permanent vers ce titre">¶</a></h2>
<p>Nouvelles fonctionnalités de syntaxe :</p>
<ul class="simple">
<li><p><span class="target" id="index-54"></span><a class="pep reference external" href="https://peps.python.org/pep-0584/"><strong>PEP 584</strong></a>, ajout de l'opérateur d'union à <code class="docutils literal notranslate"><span class="pre">dict</span></code> ;</p></li>
<li><p><span class="target" id="index-55"></span><a class="pep reference external" href="https://peps.python.org/pep-0585/"><strong>PEP 585</strong></a>, indications des types paramétrables dans les collections natives ;</p></li>
<li><p><span class="target" id="index-56"></span><a class="pep reference external" href="https://peps.python.org/pep-0614/"><strong>PEP 614</strong></a>, restrictions grammaticales assouplies pour les décorateurs.</p></li>
</ul>
<p>Nouvelles fonctionnalités natives :</p>
<ul class="simple">
<li><p><span class="target" id="index-57"></span><a class="pep reference external" href="https://peps.python.org/pep-0616/"><strong>PEP 616</strong></a>, méthodes sur les chaînes pour enlever des préfixes et des suffixes.</p></li>
</ul>
<p>Nouvelles fonctionnalités dans la bibliothèque standard :</p>
<ul class="simple">
<li><p><span class="target" id="index-58"></span><a class="pep reference external" href="https://peps.python.org/pep-0593/"><strong>PEP 593</strong></a>, annotations flexibles pour les fonctions et les variables ;</p></li>
<li><p>ajout de <a class="reference internal" href="../library/os.html#os.pidfd_open" title="os.pidfd_open"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.pidfd_open()</span></code></a> qui permet la gestion de processus sans concurrence critique et sans signaux.</p></li>
</ul>
<p>Améliorations de l'interpréteur :</p>
<ul class="simple">
<li><p><span class="target" id="index-59"></span><a class="pep reference external" href="https://peps.python.org/pep-0573/"><strong>PEP 573</strong></a>, accès rapide à l'état des modules à partir des méthodes des types dans les extensions C ;</p></li>
<li><p><span class="target" id="index-60"></span><a class="pep reference external" href="https://peps.python.org/pep-0617/"><strong>PEP 617</strong></a>, CPython utilise maintenant un analyseur lexical <em>PEG</em> (<em>Parsing Expression Grammar</em>) ;</p></li>
<li><p>certains types Python natifs (<em>range</em>, <em>tuple</em>, <em>set</em>, <em>frozenset</em>, <em>list</em>, <em>dict</em>) sont maintenant plus rapides grâce aux appels <em>vectorcall</em> (<span class="target" id="index-61"></span><a class="pep reference external" href="https://peps.python.org/pep-0590/"><strong>PEP 590</strong></a>) ;</p></li>
<li><p>le ramasse-miettes ne bloque pas sur les objets ressuscités ;</p></li>
<li><p>certains modules Python (<code class="xref py py-mod docutils literal notranslate"><span class="pre">_abc</span></code>, <a class="reference internal" href="../library/audioop.html#module-audioop" title="audioop: Manipulate raw audio data. (obsolète)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">audioop</span></code></a>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_bz2</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_codecs</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_contextvars</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_crypt</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_functools</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_json</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_locale</span></code>, <a class="reference internal" href="../library/math.html#module-math" title="math: Mathematical functions (sin() etc.)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">math</span></code></a>, <a class="reference internal" href="../library/operator.html#module-operator" title="operator: Functions corresponding to the standard operators."><code class="xref py py-mod docutils literal notranslate"><span class="pre">operator</span></code></a>, <a class="reference internal" href="../library/resource.html#module-resource" title="resource: An interface to provide resource usage information on the current process. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">resource</span></code></a>, <a class="reference internal" href="../library/time.html#module-time" title="time: Time access and conversions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">time</span></code></a>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_weakref</span></code>) utilisent maintenant l'initialisation multi-phase telle que définie dans PEP 489 ;</p></li>
<li><p>certains modules de la bibliothèque standard (<a class="reference internal" href="../library/audioop.html#module-audioop" title="audioop: Manipulate raw audio data. (obsolète)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">audioop</span></code></a>, <a class="reference internal" href="../library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ast</span></code></a>, <a class="reference internal" href="../library/grp.html#module-grp" title="grp: The group database (getgrnam() and friends). (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">grp</span></code></a>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_hashlib</span></code>, <a class="reference internal" href="../library/pwd.html#module-pwd" title="pwd: The password database (getpwnam() and friends). (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pwd</span></code></a>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_posixsubprocess</span></code>, <a class="reference internal" href="../library/random.html#module-random" title="random: Generate pseudo-random numbers with various common distributions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">random</span></code></a>, <a class="reference internal" href="../library/select.html#module-select" title="select: Wait for I/O completion on multiple streams."><code class="xref py py-mod docutils literal notranslate"><span class="pre">select</span></code></a>, <a class="reference internal" href="../library/struct.html#module-struct" title="struct: Interpret bytes as packed binary data."><code class="xref py py-mod docutils literal notranslate"><span class="pre">struct</span></code></a>, <a class="reference internal" href="../library/termios.html#module-termios" title="termios: POSIX style tty control. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">termios</span></code></a>, <a class="reference internal" href="../library/zlib.html#module-zlib" title="zlib: Low-level interface to compression and decompression routines compatible with gzip."><code class="xref py py-mod docutils literal notranslate"><span class="pre">zlib</span></code></a>) utilisent maintenant l'<em>ABI</em> (<em>Application Binary Interface</em>) stable définie dans PEP 384.</p></li>
</ul>
<p>Nouveaux modules de la bibliothèque :</p>
<ul class="simple">
<li><p><span class="target" id="index-62"></span><a class="pep reference external" href="https://peps.python.org/pep-0615/"><strong>PEP 615</strong></a>, la base de données des fuseaux horaires de l'IANA est maintenant incluse dans le module <a class="reference internal" href="../library/zoneinfo.html#module-zoneinfo" title="zoneinfo: IANA time zone support"><code class="xref py py-mod docutils literal notranslate"><span class="pre">zoneinfo</span></code></a> de la bibliothèque standard ;</p></li>
<li><p>une implémentation du tri topologique d'un graphe est maintenant disponible dans le nouveau module <a class="reference internal" href="../library/graphlib.html#module-graphlib" title="graphlib: Functionality to operate with graph-like structures"><code class="xref py py-mod docutils literal notranslate"><span class="pre">graphlib</span></code></a>.</p></li>
</ul>
<p>Changements aux procédures de publication :</p>
<ul class="simple">
<li><p><span class="target" id="index-63"></span><a class="pep reference external" href="https://peps.python.org/pep-0602/"><strong>PEP 602</strong></a>, CPython adopte un cycle annuel de publications.</p></li>
</ul>
</section>
<section id="you-should-check-for-deprecationwarning-in-your-code">
<h2>Vous devez vérifier la présence de <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> dans votre code<a class="headerlink" href="#you-should-check-for-deprecationwarning-in-your-code" title="Lien permanent vers ce titre">¶</a></h2>
<p>Quand Python 2.7 était encore pris en charge, plusieurs fonctionnalités dans Python 3 étaient gardées pour la rétro-compatibilité avec Python 2.7. Avec la fin de la prise en charge de Python 2, ces couches de rétro-compatibilité ont été retirées ou le seront bientôt. La plupart d'entre elles émettaient un avertissement <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> depuis plusieurs années. Par exemple, utiliser <code class="docutils literal notranslate"><span class="pre">collections.Mapping</span></code> plutôt que <code class="docutils literal notranslate"><span class="pre">collections.abc.Mapping</span></code> émettait un <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> depuis Python 3.3, publié en 2012.</p>
<p>Testez votre application avec l'option de ligne de commande <a class="reference internal" href="../using/cmdline.html#cmdoption-W"><code class="xref std std-option docutils literal notranslate"><span class="pre">-W</span></code></a> <code class="docutils literal notranslate"><span class="pre">default</span></code> pour voir les <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> et les <a class="reference internal" href="../library/exceptions.html#PendingDeprecationWarning" title="PendingDeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">PendingDeprecationWarning</span></code></a>, ou même avec <a class="reference internal" href="../using/cmdline.html#cmdoption-W"><code class="xref std std-option docutils literal notranslate"><span class="pre">-W</span></code></a> <code class="docutils literal notranslate"><span class="pre">error</span></code> pour les traiter comme des erreurs. <a class="reference internal" href="../library/warnings.html#warning-filter"><span class="std std-ref">Le filtre des avertissements</span></a> peut être utilisé pour ignorer les avertissements provenant de code de tierces parties.</p>
<p>Python 3.9 est la dernière version qui fournit ces couches de rétro compatibilité avec Python 2, afin de donner plus de temps aux mainteneurs de projets Python pour organiser l'arrêt de la prise en charge de Python 2 et pour assurer celle de Python 3.9.</p>
<p>Les alias vers <a class="reference internal" href="../library/collections.abc.html#collections-abstract-base-classes"><span class="std std-ref">Abstract Base Classes</span></a> dans le module <a class="reference internal" href="../library/collections.html#module-collections" title="collections: Container datatypes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">collections</span></code></a>, comme l'alias <code class="docutils literal notranslate"><span class="pre">collections.Mapping</span></code> vers <a class="reference internal" href="../library/collections.abc.html#collections.abc.Mapping" title="collections.abc.Mapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Mapping</span></code></a>, sont conservés pour une dernière version au titre de la rétrocompatibilité. Ils seront supprimés de Python 3.10.</p>
<p>Plus généralement, essayez d'exécuter vos tests dans le <a class="reference internal" href="../library/devmode.html#devmode"><span class="std std-ref">Python Development Mode</span></a> qui aide à préparer votre code pour le rendre compatible avec la prochaine version de Python.</p>
<p>Note : certaines déclarations d’obsolescence pré-existantes ont été retirées de cette version de Python. Voir la section <a class="reference internal" href="#removed-in-python-39"><span class="std std-ref">Retraits</span></a>.</p>
</section>
<section id="new-features">
<h2>Nouvelles fonctionnalités<a class="headerlink" href="#new-features" title="Lien permanent vers ce titre">¶</a></h2>
<section id="dictionary-merge-update-operators">
<h3>Opérateurs de fusion et de mise à jour de dictionnaires<a class="headerlink" href="#dictionary-merge-update-operators" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout des opérateurs de fusion (<code class="docutils literal notranslate"><span class="pre">|</span></code>) et de mise-à-jour (<code class="docutils literal notranslate"><span class="pre">|=</span></code>) à la classe native <a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>. Ils viennent compléter les méthodes existantes <code class="docutils literal notranslate"><span class="pre">dict.update</span></code> et <code class="docutils literal notranslate"><span class="pre">{**d1,</span> <span class="pre">**d2}</span></code> pour fusionner des dictionnaires.</p>
<p>Exemple :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;key1&quot;</span><span class="p">:</span> <span class="s2">&quot;value1 from x&quot;</span><span class="p">,</span> <span class="s2">&quot;key2&quot;</span><span class="p">:</span> <span class="s2">&quot;value2 from x&quot;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;key2&quot;</span><span class="p">:</span> <span class="s2">&quot;value2 from y&quot;</span><span class="p">,</span> <span class="s2">&quot;key3&quot;</span><span class="p">:</span> <span class="s2">&quot;value3 from y&quot;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">|</span> <span class="n">y</span>
<span class="go">{&#39;key1&#39;: &#39;value1 from x&#39;, &#39;key2&#39;: &#39;value2 from y&#39;, &#39;key3&#39;: &#39;value3 from y&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">|</span> <span class="n">x</span>
<span class="go">{&#39;key2&#39;: &#39;value2 from x&#39;, &#39;key3&#39;: &#39;value3 from y&#39;, &#39;key1&#39;: &#39;value1 from x&#39;}</span>
</pre></div>
</div>
<p>Voir <span class="target" id="index-64"></span><a class="pep reference external" href="https://peps.python.org/pep-0584/"><strong>PEP 584</strong></a> pour une description complète (contribution de <em>Brandt Bucher</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36144">bpo-36144</a>).</p>
</section>
<section id="new-string-methods-to-remove-prefixes-and-suffixes">
<h3>Nouvelles méthodes sur les chaînes pour retirer des préfixes et des suffixes<a class="headerlink" href="#new-string-methods-to-remove-prefixes-and-suffixes" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference internal" href="../library/stdtypes.html#str.removeprefix" title="str.removeprefix"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.removeprefix(préfixe)</span></code></a> et <a class="reference internal" href="../library/stdtypes.html#str.removesuffix" title="str.removesuffix"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.removesuffix(suffixe)</span></code></a> ont été ajoutées pour supprimer facilement un préfixe ou un suffixe inutile d'une chaîne. Les méthodes correspondantes de <code class="docutils literal notranslate"><span class="pre">bytes</span></code>, <code class="docutils literal notranslate"><span class="pre">bytearray</span></code> et <code class="docutils literal notranslate"><span class="pre">collections.UserString</span></code> ont également été ajoutées. Voir <span class="target" id="index-65"></span><a class="pep reference external" href="https://peps.python.org/pep-0616/"><strong>PEP 616</strong></a> pour une description complète (contribution de <em>Dennis Sweeney</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39939">bpo-39939</a>).</p>
</section>
<section id="type-hinting-generics-in-standard-collections">
<h3>Indication des types paramétrables dans les collections natives<a class="headerlink" href="#type-hinting-generics-in-standard-collections" title="Lien permanent vers ce titre">¶</a></h3>
<p>Dans les annotations de type, vous pouvez maintenant utiliser les types de collection natifs tels que <code class="docutils literal notranslate"><span class="pre">list</span></code> et <code class="docutils literal notranslate"><span class="pre">dict</span></code> comme types génériques au lieu d'importer les types en majuscules correspondants (par exemple <code class="docutils literal notranslate"><span class="pre">List</span></code> ou <code class="docutils literal notranslate"><span class="pre">Dict</span></code>) à partir de <code class="docutils literal notranslate"><span class="pre">typing</span></code>.  D'autres types de la bibliothèque standard sont maintenant génériques, par exemple <code class="docutils literal notranslate"><span class="pre">queue.Queue</span></code>.</p>
<p>Exemple :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">greet_all</span><span class="p">(</span><span class="n">names</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>Voir <span class="target" id="index-66"></span><a class="pep reference external" href="https://peps.python.org/pep-0585/"><strong>PEP 585</strong></a> pour plus de détails (contribution de <em>Guido van Rossum</em>, <em>Ethan Smith</em> et <em>Batuhan Taşkaya</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39481">bpo-39481</a>).</p>
</section>
<section id="new-parser">
<h3>Nouvel analyseur syntaxique<a class="headerlink" href="#new-parser" title="Lien permanent vers ce titre">¶</a></h3>
<p>Python 3.9 utilise un nouvel analyseur syntaxique, basé sur <a class="reference external" href="https://en.wikipedia.org/wiki/Parsing_expression_grammar">PEG</a> au lieu de <a class="reference external" href="https://fr.wikipedia.org/wiki/Analyse_LL">LL(1)</a>. Les performances du nouvel analyseur sont à peu près comparables à celles de l'ancien, mais le formalisme <em>PEG</em> est plus souple que <em>LL(1)</em> lorsqu'il s'agit de concevoir des nouvelles fonctionnalités du langage. Nous commencerons à utiliser cette flexibilité dans Python 3.10 et les versions suivantes.</p>
<p>Le module <a class="reference internal" href="../library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ast</span></code></a> utilise le nouvel analyseur syntaxique et produit le même AST que l'ancien analyseur.</p>
<p>Dans Python 3.10, l'ancien analyseur sera supprimé ainsi que toutes les fonctionnalités qui en dépendent (principalement le module <code class="xref py py-mod docutils literal notranslate"><span class="pre">parser</span></code>, qui est obsolète depuis longtemps). En Python 3.9 <em>seulement</em>, vous pouvez revenir à l'analyseur <em>LL(1)</em> en utilisant une option en ligne de commande (<code class="docutils literal notranslate"><span class="pre">-X</span> <span class="pre">oldparser</span></code>) ou une variable d'environnement (<code class="docutils literal notranslate"><span class="pre">PYTHONOLDPARSER=1</span></code>).</p>
<p>Voir <span class="target" id="index-67"></span><a class="pep reference external" href="https://peps.python.org/pep-0617/"><strong>PEP 617</strong></a> pour plus de détails (contribution de <em>Guido van Rossum</em>, <em>Pablo Galindo</em> et <em>Lysandros Nikolaou</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40334">bpo-40334</a>).</p>
</section>
</section>
<section id="other-language-changes">
<h2>Autres changements au langage<a class="headerlink" href="#other-language-changes" title="Lien permanent vers ce titre">¶</a></h2>
<ul>
<li><p><a class="reference internal" href="../library/functions.html#import__" title="__import__"><code class="xref py py-func docutils literal notranslate"><span class="pre">__import__()</span></code></a> lève maintenant <a class="reference internal" href="../library/exceptions.html#ImportError" title="ImportError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ImportError</span></code></a> plutôt que <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a>, ce qui se produisait lorsqu’un import relatif remontait plus loin que le répertoire racine du paquet (contribution de <em>Ngalim Siregar</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37444">bpo-37444</a>).</p></li>
<li><p>Python récupère maintenant le chemin absolu du nom de fichier du script spécifié sur la ligne de commande (ex. : <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">script.py</span></code>) : l'attribut <code class="docutils literal notranslate"><span class="pre">__file__</span></code> du module <a class="reference internal" href="../library/__main__.html#module-__main__" title="__main__: The environment where top-level code is run. Covers command-line interfaces, import-time behavior, and ``__name__ == '__main__'``."><code class="xref py py-mod docutils literal notranslate"><span class="pre">__main__</span></code></a> est devenu un chemin absolu, plutôt qu'un chemin relatif. Ces nouveaux chemins restent valides même après que le répertoire courant est changé par <a class="reference internal" href="../library/os.html#os.chdir" title="os.chdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.chdir()</span></code></a>. En conséquence, les traces d'appels affichent le chemin absolu pour les cadres du module <a class="reference internal" href="../library/__main__.html#module-__main__" title="__main__: The environment where top-level code is run. Covers command-line interfaces, import-time behavior, and ``__name__ == '__main__'``."><code class="xref py py-mod docutils literal notranslate"><span class="pre">__main__</span></code></a> dans ce cas (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=20443">bpo-20443</a>).</p></li>
<li><p>Dans le <a class="reference internal" href="../library/devmode.html#devmode"><span class="std std-ref">mode de développement de Python</span></a> et dans les <a class="reference internal" href="../using/configure.html#debug-build"><span class="std std-ref">compilations en mode débogage</span></a>, les arguments <em>encoding</em> et <em>errors</em> sont maintenant vérifiés pour les opérations d'encodage et de décodage de chaînes. Exemples : <a class="reference internal" href="../library/functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#str.encode" title="str.encode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.encode()</span></code></a> et <a class="reference internal" href="../library/stdtypes.html#bytes.decode" title="bytes.decode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">bytes.decode()</span></code></a>.</p>
<p>Par défaut, afin d'améliorer les performances, l'argument <em>errors</em> n'est consulté qu'au moment de la première erreur d'encodage-décodage et l'argument <em>encoding</em> est parfois ignoré pour les chaînes vides (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37388">bpo-37388</a>).</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;&quot;.replace(&quot;&quot;,</span> <span class="pre">s,</span> <span class="pre">n)</span></code> renvoie maintenant <code class="docutils literal notranslate"><span class="pre">s</span></code> plutôt qu'une chaîne vide pour toute valeur non-nulles de <code class="docutils literal notranslate"><span class="pre">n</span></code>. Ce comportement est maintenant cohérent avec <code class="docutils literal notranslate"><span class="pre">&quot;&quot;.replace(&quot;&quot;,</span> <span class="pre">s)</span></code>. Les instances de <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> et <a class="reference internal" href="../library/stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a> ont le même comportement (contribution de <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=28029">bpo-28029</a>).</p></li>
<li><p>Toute expression valide peut maintenant être utilisée comme décorateur (voir <a class="reference internal" href="../glossary.html#term-decorator"><span class="xref std std-term">decorator</span></a>). Préalablement, la grammaire était beaucoup plus contraignante. Voir <span class="target" id="index-68"></span><a class="pep reference external" href="https://peps.python.org/pep-0614/"><strong>PEP 614</strong></a> pour les détails (contributions de <em>Brandt Bucher</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39702">bpo-39702</a>).</p></li>
<li><p>Aide améliorée pour le module <a class="reference internal" href="../library/typing.html#module-typing" title="typing: Support for type hints (see :pep:`484`)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">typing</span></code></a>. La documentation est maintenant visible pour toutes les formes spéciales et les alias générique spéciaux (comme <code class="docutils literal notranslate"><span class="pre">Union</span></code> et <code class="docutils literal notranslate"><span class="pre">List</span></code>). Utiliser <a class="reference internal" href="../library/functions.html#help" title="help"><code class="xref py py-func docutils literal notranslate"><span class="pre">help()</span></code></a> sur un alias générique comme <code class="docutils literal notranslate"><span class="pre">List[int]</span></code> montre l'aide correspondant au type réel (<code class="docutils literal notranslate"><span class="pre">list</span></code> dans ce cas). (Contribution de Serhiy Storchaka dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40257">bpo-40257</a>).</p></li>
<li><p>L'exécution parallèle de <a class="reference internal" href="../reference/expressions.html#agen.aclose" title="agen.aclose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aclose()</span></code></a> / <a class="reference internal" href="../reference/expressions.html#agen.asend" title="agen.asend"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asend()</span></code></a> / <a class="reference internal" href="../reference/expressions.html#agen.athrow" title="agen.athrow"><code class="xref py py-meth docutils literal notranslate"><span class="pre">athrow()</span></code></a> est maintenant interdite, et <code class="docutils literal notranslate"><span class="pre">ag_running</span></code> reflète maintenant le statut réel du générateur asynchrone. (Contribué par Yury Selivanov dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=30773">bpo-30773</a>.)</p></li>
<li><p>Les erreurs inattendues lors d'un appel de la méthode <code class="docutils literal notranslate"><span class="pre">__iter__</span></code> ne sont plus masquées par <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> dans l'opérateur <a class="reference internal" href="../reference/expressions.html#in"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">in</span></code></a> et les fonctions <a class="reference internal" href="../library/operator.html#operator.contains" title="operator.contains"><code class="xref py py-func docutils literal notranslate"><span class="pre">contains()</span></code></a>, <a class="reference internal" href="../library/operator.html#operator.indexOf" title="operator.indexOf"><code class="xref py py-func docutils literal notranslate"><span class="pre">indexOf()</span></code></a> et <a class="reference internal" href="../library/operator.html#operator.countOf" title="operator.countOf"><code class="xref py py-func docutils literal notranslate"><span class="pre">countOf()</span></code></a> du module <a class="reference internal" href="../library/operator.html#module-operator" title="operator: Functions corresponding to the standard operators."><code class="xref py py-mod docutils literal notranslate"><span class="pre">operator</span></code></a>. (Contribué par Serhiy Storchaka dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40824">bpo-40824</a>.)</p></li>
<li><p>Les expressions lambda sans parenthèses ne peuvent plus être la partie expression dans une clause <code class="docutils literal notranslate"><span class="pre">if</span></code> dans les compréhensions de liste et les expressions de générateur. Voir <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41848">bpo-41848</a> et <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43755">bpo-43755</a> pour plus de détails.</p></li>
</ul>
</section>
<section id="new-modules">
<h2>Nouveaux modules<a class="headerlink" href="#new-modules" title="Lien permanent vers ce titre">¶</a></h2>
<section id="zoneinfo">
<h3><em>zoneinfo</em><a class="headerlink" href="#zoneinfo" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le module <a class="reference internal" href="../library/zoneinfo.html#module-zoneinfo" title="zoneinfo: IANA time zone support"><code class="xref py py-mod docutils literal notranslate"><span class="pre">zoneinfo</span></code></a> ajoute la prise en charge de la base de donnée des fuseaux horaires de l'IANA dans la bibliothèque standard. Il ajoute <a class="reference internal" href="../library/zoneinfo.html#zoneinfo.ZoneInfo" title="zoneinfo.ZoneInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">zoneinfo.ZoneInfo</span></code></a>, une implémentation concrète de <a class="reference internal" href="../library/datetime.html#datetime.tzinfo" title="datetime.tzinfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.tzinfo</span></code></a> à partir des données de fuseaux horaires du système.</p>
<p>Exemple :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zoneinfo</span> <span class="kn">import</span> <span class="n">ZoneInfo</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Daylight saving time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">ZoneInfo</span><span class="p">(</span><span class="s2">&quot;America/Los_Angeles&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="go">2020-10-31 12:00:00-07:00</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span><span class="o">.</span><span class="n">tzname</span><span class="p">()</span>
<span class="go">&#39;PDT&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Standard time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="go">2020-11-07 12:00:00-08:00</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">tzname</span><span class="p">())</span>
<span class="go">PST</span>
</pre></div>
</div>
<p>Comme option de rabat pour les plateformes qui n'incluent pas la base de donnée de l'IANA, le module quasi-natif <a class="reference external" href="https://pypi.org/project/tzdata/"><code class="docutils literal notranslate"><span class="pre">tzdata</span></code></a> été publié –– il est distribué sur PyPI et maintenu par l'équipe principale de CPython.</p>
<div class="admonition seealso">
<p class="admonition-title">Voir aussi</p>
<dl class="simple">
<dt><span class="target" id="index-69"></span><a class="pep reference external" href="https://peps.python.org/pep-0615/"><strong>PEP 615</strong></a> — Prise en charge de la base de donnée des fuseaux horaires de l'IANA dans la bibliothèque standard</dt><dd><p>PEP écrit et implémenté par <em>Paul Ganssle</em></p>
</dd>
</dl>
</div>
</section>
<section id="graphlib">
<h3><em>graphlib</em><a class="headerlink" href="#graphlib" title="Lien permanent vers ce titre">¶</a></h3>
<p>Un nouveau module, <a class="reference internal" href="../library/graphlib.html#module-graphlib" title="graphlib: Functionality to operate with graph-like structures"><code class="xref py py-mod docutils literal notranslate"><span class="pre">graphlib</span></code></a>, a été ajouté. Il contient la classe <a class="reference internal" href="../library/graphlib.html#graphlib.TopologicalSorter" title="graphlib.TopologicalSorter"><code class="xref py py-class docutils literal notranslate"><span class="pre">graphlib.TopologicalSorter</span></code></a> qui offre des fonctionnalités pour faire le tri topologique de graphes (contribution de <em>Pablo Galindo</em>, <em>Tim Peters</em> et <em>Larry Hastings</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=17005">bpo-17005</a>).</p>
</section>
</section>
<section id="improved-modules">
<h2>Modules améliorés<a class="headerlink" href="#improved-modules" title="Lien permanent vers ce titre">¶</a></h2>
<section id="ast">
<h3><em>ast</em><a class="headerlink" href="#ast" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout de l'option <em>indent</em> à <a class="reference internal" href="../library/ast.html#ast.dump" title="ast.dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">dump()</span></code></a> qui permet de produire une sortie multi-ligne indentée (contribution de <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37995">bpo-37995</a>).</p>
<p>Ajout de la fonction <a class="reference internal" href="../library/ast.html#ast.unparse" title="ast.unparse"><code class="xref py py-func docutils literal notranslate"><span class="pre">ast.unparse()</span></code></a> au module <a class="reference internal" href="../library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ast</span></code></a> pour renverser l'analyse syntaxique d'un objet <a class="reference internal" href="../library/ast.html#ast.AST" title="ast.AST"><code class="xref py py-class docutils literal notranslate"><span class="pre">ast.AST</span></code></a> et produire une chaîne de code qui produirait un <a class="reference internal" href="../library/ast.html#ast.AST" title="ast.AST"><code class="xref py py-class docutils literal notranslate"><span class="pre">ast.AST</span></code></a> équivalent lorsqu'il est analysé (contribution de <em>Pablo Galindo</em> et <em>Batuhan Taskaya</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38870">bpo-38870</a>).</p>
<p>Ajout de chaînes de documentation aux nœuds AST qui contiennent les signatures <em>ASDL</em> utilisées pour construire ce nœud (contribution de <em>Batuhan Taskaya</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39638">bpo-39638</a>).</p>
</section>
<section id="asyncio">
<h3><em>asyncio</em><a class="headerlink" href="#asyncio" title="Lien permanent vers ce titre">¶</a></h3>
<p>En raison de problèmes de sécurité importants, le paramètre <em>reuse_address</em> de <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.create_datagram_endpoint" title="asyncio.loop.create_datagram_endpoint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.loop.create_datagram_endpoint()</span></code></a> n'est plus supporté. C'est à cause du comportement de l'option socket <code class="docutils literal notranslate"><span class="pre">SO_REUSEADDR</span></code> en UDP. Pour plus de détails, voir la documentation de <code class="docutils literal notranslate"><span class="pre">loop.create_datagram_endpoint()</span></code>. (Contribué par Kyle Stanley, Antoine Pitrou, et Yury Selivanov dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37228">bpo-37228</a>.)</p>
<p>Ajout d'une nouvelle <a class="reference internal" href="../glossary.html#term-coroutine"><span class="xref std std-term">coroutine</span></a> <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.shutdown_default_executor" title="asyncio.loop.shutdown_default_executor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">shutdown_default_executor()</span></code></a> qui programme une extinction de l'exécuteur par défaut qui attend que <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" title="concurrent.futures.ThreadPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ThreadPoolExecutor</span></code></a> se termine. Aussi, <a class="reference internal" href="../library/asyncio-runner.html#asyncio.run" title="asyncio.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.run()</span></code></a> à été mis à jour pour utiliser la nouvelle <a class="reference internal" href="../glossary.html#term-coroutine"><span class="xref std std-term">coroutine</span></a>. (Contribué par Kyle Stanley dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34037">bpo-34037</a>.)</p>
<p>Ajout de <a class="reference internal" href="../library/asyncio-policy.html#asyncio.PidfdChildWatcher" title="asyncio.PidfdChildWatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.PidfdChildWatcher</span></code></a>, un surveillant de processus enfants spécifique à Linux qui interroge le descripteur de ficher du processus. (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38692">bpo-38692</a>)</p>
<p>Added a new <a class="reference internal" href="../glossary.html#term-coroutine"><span class="xref std std-term">coroutine</span></a> <a class="reference internal" href="../library/asyncio-task.html#asyncio.to_thread" title="asyncio.to_thread"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.to_thread()</span></code></a>. It is mainly used for
running IO-bound functions in a separate thread to avoid blocking the event
loop, and essentially works as a high-level version of
<a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.run_in_executor" title="asyncio.loop.run_in_executor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_in_executor()</span></code></a> that can directly take keyword arguments.
(Contributed by Kyle Stanley and Yury Selivanov in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32309">bpo-32309</a>.)</p>
<p>When cancelling the task due to a timeout, <a class="reference internal" href="../library/asyncio-task.html#asyncio.wait_for" title="asyncio.wait_for"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.wait_for()</span></code></a> will now
wait until the cancellation is complete also in the case when <em>timeout</em> is
&lt;= 0, like it does with positive timeouts.
(Contributed by Elvis Pranskevichus in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32751">bpo-32751</a>.)</p>
<p><a class="reference internal" href="../library/asyncio.html#module-asyncio" title="asyncio: Asynchronous I/O."><code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code></a> lève maintenant une <code class="xref py py-exc docutils literal notranslate"><span class="pre">TyperError</span></code> lors d'un appel à des méthodes incompatibles avec un socket <a class="reference internal" href="../library/ssl.html#ssl.SSLSocket" title="ssl.SSLSocket"><code class="xref py py-class docutils literal notranslate"><span class="pre">ssl.SSLSocket</span></code></a>. (Contribué par Ido Michael dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37404">bpo-37404</a>.)</p>
</section>
<section id="compileall">
<h3><em>compileall</em><a class="headerlink" href="#compileall" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout de la possibilité d'utiliser des liens physiques pour les fichiers <code class="docutils literal notranslate"><span class="pre">.pyc</span></code> dupliqués : paramètre <em>hardlink_dupes</em> et option de ligne de commande <code class="docutils literal notranslate"><span class="pre">--hardlink-dupes</span></code> (contribution de <em>Lumír 'Frenzy' Balhar</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40495">bpo-40495</a>).</p>
<p>Ajout d'options pour manipuler les chemins des fichiers <code class="docutils literal notranslate"><span class="pre">.pyc</span></code> résultants : paramètres <em>stripdir</em>, <em>prependdir</em>, <em>limit_sl_dest</em> et options de la ligne de commande <code class="docutils literal notranslate"><span class="pre">-s</span></code>, <code class="docutils literal notranslate"><span class="pre">-p</span></code>, <code class="docutils literal notranslate"><span class="pre">-e</span></code>. Ajout de la possibilité de spécifier l'option pour un niveau d'optimisation plus d'une fois (contribution de <em>Lumír 'Frenzy' Balhar</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38112">bpo-38112</a>).</p>
</section>
<section id="concurrent-futures">
<h3><em>concurrent.futures</em><a class="headerlink" href="#concurrent-futures" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout du nouveau paramètre <em>cancel_futures</em> à <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.Executor.shutdown" title="concurrent.futures.Executor.shutdown"><code class="xref py py-meth docutils literal notranslate"><span class="pre">concurrent.futures.Executor.shutdown()</span></code></a> qui annule tous les futurs en attente qui n'ont pas commencé leur exécution, plutôt que d'attendre qu'ils aient complété avant d'arrêter l'exécuteur (contribution <em>Kyle Stanley</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39349">bpo-39349</a>).</p>
<p>Removed daemon threads from <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" title="concurrent.futures.ThreadPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ThreadPoolExecutor</span></code></a>
and <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.ProcessPoolExecutor" title="concurrent.futures.ProcessPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProcessPoolExecutor</span></code></a>. This improves
compatibility with subinterpreters and predictability in their shutdown
processes. (Contributed by Kyle Stanley in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39812">bpo-39812</a>.)</p>
<p>Workers in <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.ProcessPoolExecutor" title="concurrent.futures.ProcessPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProcessPoolExecutor</span></code></a> are now spawned on
demand, only when there are no available idle workers to reuse. This optimizes
startup overhead and reduces the amount of lost CPU time to idle workers.
(Contributed by Kyle Stanley in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39207">bpo-39207</a>.)</p>
</section>
<section id="curses">
<h3><em>curses</em><a class="headerlink" href="#curses" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout des fonctions <a class="reference internal" href="../library/curses.html#curses.get_escdelay" title="curses.get_escdelay"><code class="xref py py-func docutils literal notranslate"><span class="pre">curses.get_escdelay()</span></code></a>, <a class="reference internal" href="../library/curses.html#curses.set_escdelay" title="curses.set_escdelay"><code class="xref py py-func docutils literal notranslate"><span class="pre">curses.set_escdelay()</span></code></a>, <a class="reference internal" href="../library/curses.html#curses.get_tabsize" title="curses.get_tabsize"><code class="xref py py-func docutils literal notranslate"><span class="pre">curses.get_tabsize()</span></code></a>, et <a class="reference internal" href="../library/curses.html#curses.set_tabsize" title="curses.set_tabsize"><code class="xref py py-func docutils literal notranslate"><span class="pre">curses.set_tabsize()</span></code></a> (contribution d'<em>Anthony Sottile</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38312">bpo-38312</a>).</p>
</section>
<section id="datetime">
<h3><em>datetime</em><a class="headerlink" href="#datetime" title="Lien permanent vers ce titre">¶</a></h3>
<p>The <a class="reference internal" href="../library/datetime.html#datetime.date.isocalendar" title="datetime.date.isocalendar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">isocalendar()</span></code></a> of <a class="reference internal" href="../library/datetime.html#datetime.date" title="datetime.date"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.date</span></code></a>
and <a class="reference internal" href="../library/datetime.html#datetime.datetime.isocalendar" title="datetime.datetime.isocalendar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">isocalendar()</span></code></a> of <a class="reference internal" href="../library/datetime.html#datetime.datetime" title="datetime.datetime"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.datetime</span></code></a>
methods now returns a <a class="reference internal" href="../library/collections.html#collections.namedtuple" title="collections.namedtuple"><code class="xref py py-func docutils literal notranslate"><span class="pre">namedtuple()</span></code></a> instead of a <a class="reference internal" href="../library/stdtypes.html#tuple" title="tuple"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a>.
(Contributed by Donghee Na in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=24416">bpo-24416</a>.)</p>
</section>
<section id="distutils">
<h3><em>distutils</em><a class="headerlink" href="#distutils" title="Lien permanent vers ce titre">¶</a></h3>
<p>La commande <strong class="command">upload</strong> crée maintenant des condensats SHA2-256 et Blake2b-256. Elle ne produit pas MD5 sur les plateformes qui bloquent les condensats MD5 (contribution de <em>Christian Heimes</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40698">bpo-40698</a>).</p>
</section>
<section id="fcntl">
<h3><em>fcntl</em><a class="headerlink" href="#fcntl" title="Lien permanent vers ce titre">¶</a></h3>
<p>Added constants <code class="xref py py-const docutils literal notranslate"><span class="pre">F_OFD_GETLK</span></code>, <code class="xref py py-const docutils literal notranslate"><span class="pre">F_OFD_SETLK</span></code>
and <code class="xref py py-const docutils literal notranslate"><span class="pre">F_OFD_SETLKW</span></code>.
(Contributed by Donghee Na in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38602">bpo-38602</a>.)</p>
</section>
<section id="ftplib">
<h3><em>ftplib</em><a class="headerlink" href="#ftplib" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference internal" href="../library/ftplib.html#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> and <code class="xref py py-class docutils literal notranslate"><span class="pre">FTP_TLS</span></code> now raise a <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></a>
if the given timeout for their constructor is zero to prevent the creation of
a non-blocking socket. (Contributed by Donghee Na in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39259">bpo-39259</a>.)</p>
</section>
<section id="gc">
<h3><em>gc</em><a class="headerlink" href="#gc" title="Lien permanent vers ce titre">¶</a></h3>
<p>Quand le ramasse-miettes fait un ramassage pour lequel certains objets sont ressuscités (ils sont atteignables à partir de l'extérieur des cycles isolés après que les <em>finaliseurs</em> soient exécutés), le ramassage des objets qui sont toujours inatteignables n'est pas suspendu (contribution de <em>Pablo Galindo</em> et <em>Tim Peters</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38379">bpo-38379</a>).</p>
<p>Ajout de la fonction <a class="reference internal" href="../library/gc.html#gc.is_finalized" title="gc.is_finalized"><code class="xref py py-func docutils literal notranslate"><span class="pre">gc.is_finalized()</span></code></a> pour vérifier si un objet a été finalisé par le ramasse-miettes (contribution de <em>Pablo Galindo</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39322">bpo-39322</a>).</p>
</section>
<section id="hashlib">
<h3><em>hashlib</em><a class="headerlink" href="#hashlib" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le module <a class="reference internal" href="../library/hashlib.html#module-hashlib" title="hashlib: Secure hash and message digest algorithms."><code class="xref py py-mod docutils literal notranslate"><span class="pre">hashlib</span></code></a> peut maintenant utiliser les algorithmes de hachage SHA3 et SHAKE XOF de <em>OpenSSL</em> quand ils sont disponibles (contribution de <em>Christian Heimes</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37630">bpo-37630</a>).</p>
<p>Les modules de hachage natifs peuvent être désactivés avec <code class="docutils literal notranslate"><span class="pre">./configure</span> <span class="pre">--without-builtin-hashlib-hashes</span></code> ou activés sélectivement avec par exemple <code class="docutils literal notranslate"><span class="pre">./configure</span> <span class="pre">--with-builtin-hashlib-hashes=sha3,blake2</span></code> pour forcer l'utilisation de l’implémentation <em>OpenSSL</em> (contribution de <em>Christian Heimes</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40479">bpo-40479</a>).</p>
</section>
<section id="http">
<h3><em>http</em><a class="headerlink" href="#http" title="Lien permanent vers ce titre">¶</a></h3>
<p>HTTP status codes <code class="docutils literal notranslate"><span class="pre">103</span> <span class="pre">EARLY_HINTS</span></code>, <code class="docutils literal notranslate"><span class="pre">418</span> <span class="pre">IM_A_TEAPOT</span></code> and <code class="docutils literal notranslate"><span class="pre">425</span> <span class="pre">TOO_EARLY</span></code> are added to
<a class="reference internal" href="../library/http.html#http.HTTPStatus" title="http.HTTPStatus"><code class="xref py py-class docutils literal notranslate"><span class="pre">http.HTTPStatus</span></code></a>. (Contributed by Donghee Na in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39509">bpo-39509</a> and Ross Rhodes in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39507">bpo-39507</a>.)</p>
</section>
<section id="idle-and-idlelib">
<h3><em>IDLE</em> et <em>idlelib</em><a class="headerlink" href="#idle-and-idlelib" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout d'une option pour désactiver le clignotement du curseur (contribution de <em>Zackery Spytz</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4603">bpo-4603</a>).</p>
<p>La fenêtre de complétion de IDLE est maintenant fermée par la touche d'échappement (contribution de <em>Johnny Najera</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38944">bpo-38944</a>).</p>
<p>Ajout de mots clés à la liste de complétion de noms de modules (contribution de <em>Terry J. Reedy</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37765">bpo-37765</a>).</p>
<p>New in 3.9 maintenance releases</p>
<p>Make IDLE invoke <a class="reference internal" href="../library/sys.html#sys.excepthook" title="sys.excepthook"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.excepthook()</span></code></a> (when started without '-n').
User hooks were previously ignored.  (Contributed by Ken Hilton in
<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43008">bpo-43008</a>.)</p>
<p>Les changements ci-haut ont été rétro-portés dans la version de maintenance de 3.8.</p>
<p>Rearrange the settings dialog.  Split the General tab into Windows
and Shell/Ed tabs.  Move help sources, which extend the Help menu, to the
Extensions tab.  Make space for new options and shorten the dialog. The
latter makes the dialog better fit small screens.  (Contributed by Terry Jan
Reedy in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40468">bpo-40468</a>.)  Move the indent space setting from the Font tab to
the new Windows tab.  (Contributed by Mark Roseman and Terry Jan Reedy in
<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33962">bpo-33962</a>.)</p>
<p>Apply syntax highlighting to <code class="docutils literal notranslate"><span class="pre">.pyi</span></code> files. (Contributed by Alex
Waygood and Terry Jan Reedy in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45447">bpo-45447</a>.)</p>
</section>
<section id="imaplib">
<h3><em>imaplib</em><a class="headerlink" href="#imaplib" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4" title="imaplib.IMAP4"><code class="xref py py-class docutils literal notranslate"><span class="pre">IMAP4</span></code></a> and <a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4_SSL" title="imaplib.IMAP4_SSL"><code class="xref py py-class docutils literal notranslate"><span class="pre">IMAP4_SSL</span></code></a> now have
an optional <em>timeout</em> parameter for their constructors.
Also, the <a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4.open" title="imaplib.IMAP4.open"><code class="xref py py-meth docutils literal notranslate"><span class="pre">open()</span></code></a> method now has an optional <em>timeout</em> parameter
with this change. The overridden methods of <a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4_SSL" title="imaplib.IMAP4_SSL"><code class="xref py py-class docutils literal notranslate"><span class="pre">IMAP4_SSL</span></code></a> and
<a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4_stream" title="imaplib.IMAP4_stream"><code class="xref py py-class docutils literal notranslate"><span class="pre">IMAP4_stream</span></code></a> were applied to this change.
(Contributed by Donghee Na in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38615">bpo-38615</a>.)</p>
<p><a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4.unselect" title="imaplib.IMAP4.unselect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">imaplib.IMAP4.unselect()</span></code></a> is added.
<a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4.unselect" title="imaplib.IMAP4.unselect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">imaplib.IMAP4.unselect()</span></code></a> frees server's resources associated with the
selected mailbox and returns the server to the authenticated
state. This command performs the same actions as <a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4.close" title="imaplib.IMAP4.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">imaplib.IMAP4.close()</span></code></a>, except
that no messages are permanently removed from the currently
selected mailbox. (Contributed by Donghee Na in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40375">bpo-40375</a>.)</p>
</section>
<section id="importlib">
<h3><em>importlib</em><a class="headerlink" href="#importlib" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour plus de cohérence avec les instructions d'import, <a class="reference internal" href="../library/importlib.html#importlib.util.resolve_name" title="importlib.util.resolve_name"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.util.resolve_name()</span></code></a> lève maintenant <a class="reference internal" href="../library/exceptions.html#ImportError" title="ImportError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ImportError</span></code></a> plutôt que <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> pour les tentatives d'import relatifs invalides (contribution de <em>Ngalim Siregar</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37444">bpo-37444</a>).</p>
<p>Les chargeurs d'importation qui publient des objets modules immuables peuvent maintenant aussi publier des paquets immuables en plus des modules individuels (contribution de <em>Dino Viehland</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39336">bpo-39336</a>).</p>
<p>Ajout de la fonction <a class="reference internal" href="../library/importlib.resources.html#importlib.resources.files" title="importlib.resources.files"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.resources.files()</span></code></a> qui prend en charge les sous-répertoires dans les données du paquet. Aussi rétro-porté pour les version précédentes de Python dans <code class="docutils literal notranslate"><span class="pre">importlib_resources</span></code> version 1.5 (contribution de <em>Jason R. Coombs</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39791">bpo-39791</a>).</p>
<p>Mise à jour de <code class="docutils literal notranslate"><span class="pre">importlib.metadata</span></code> à partir de <code class="docutils literal notranslate"><span class="pre">importlib_metadata</span></code> version 1.6.1.</p>
</section>
<section id="inspect">
<h3><em>inspect</em><a class="headerlink" href="#inspect" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference internal" href="../library/inspect.html#inspect.BoundArguments.arguments" title="inspect.BoundArguments.arguments"><code class="xref py py-attr docutils literal notranslate"><span class="pre">inspect.BoundArguments.arguments</span></code></a>, qui était un <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code>, devient un <code class="docutils literal notranslate"><span class="pre">dict</span></code> natif régulier (contribution de <em>Inada Naoki</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36350">bpo-36350</a> et <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39775">bpo-39775</a>).</p>
</section>
<section id="ipaddress">
<h3><em>ipaddress</em><a class="headerlink" href="#ipaddress" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference internal" href="../library/ipaddress.html#module-ipaddress" title="ipaddress: IPv4/IPv6 manipulation library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ipaddress</span></code></a> prend désormais en charge les IPv6 avec une portée spécifiée (adresses IPv6 avec un suffixe <code class="docutils literal notranslate"><span class="pre">%&lt;scope_id&gt;</span></code>).</p>
<p>Les adresses IPv6 avec une portée spécifiée peuvent être analysées avec <a class="reference internal" href="../library/ipaddress.html#ipaddress.IPv6Address" title="ipaddress.IPv6Address"><code class="xref py py-class docutils literal notranslate"><span class="pre">ipaddress.IPv6Address</span></code></a>. S'il est présent, l'indice de la zone de la portée est disponible dans l'attribut <a class="reference internal" href="../library/ipaddress.html#ipaddress.IPv6Address.scope_id" title="ipaddress.IPv6Address.scope_id"><code class="xref py py-attr docutils literal notranslate"><span class="pre">scope_id</span></code></a> (contribution de <em>Oleksandr Pavliuk</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34788">bpo-34788</a>).</p>
<p>À partir de Python 3.9.5, le module <a class="reference internal" href="../library/ipaddress.html#module-ipaddress" title="ipaddress: IPv4/IPv6 manipulation library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ipaddress</span></code></a> n'accepte plus aucun zéro en tête des chaînes de caractères IPv4. (Contribué par Christian Heimes dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36384">bpo-36384</a>).</p>
</section>
<section id="math">
<h3><em>math</em><a class="headerlink" href="#math" title="Lien permanent vers ce titre">¶</a></h3>
<p>Extension de la fonction <a class="reference internal" href="../library/math.html#math.gcd" title="math.gcd"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.gcd()</span></code></a> pour gérer les arguments multiples. Préalablement, elle ne gérait que deux arguments (contribution de <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39648">bpo-39648</a>).</p>
<p>Ajout de <a class="reference internal" href="../library/math.html#math.lcm" title="math.lcm"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.lcm()</span></code></a> : renvoie le plus petit commun multiple des arguments spécifiés (contribution de <em>Mark Dickinson</em>, <em>Ananthakrishnan</em> et <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39479">bpo-39479</a> et <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39648">bpo-39648</a>).</p>
<p>Ajout de <a class="reference internal" href="../library/math.html#math.nextafter" title="math.nextafter"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.nextafter()</span></code></a> : renvoie la prochaine valeur à point flottant après <em>x</em> en direction de <em>y</em> (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39288">bpo-39288</a>).</p>
<p>Ajout de <a class="reference internal" href="../library/math.html#math.ulp" title="math.ulp"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.ulp()</span></code></a> : renvoie la valeur du bit le moins significatif d'un <em>float</em> (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39310">bpo-39310</a>).</p>
</section>
<section id="multiprocessing">
<h3><em>multiprocessing</em><a class="headerlink" href="#multiprocessing" title="Lien permanent vers ce titre">¶</a></h3>
<p>La classe <a class="reference internal" href="../library/multiprocessing.html#multiprocessing.SimpleQueue" title="multiprocessing.SimpleQueue"><code class="xref py py-class docutils literal notranslate"><span class="pre">multiprocessing.SimpleQueue</span></code></a> a une nouvelle méthode <a class="reference internal" href="../library/multiprocessing.html#multiprocessing.SimpleQueue.close" title="multiprocessing.SimpleQueue.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> pour fermer la queue de façon explicite (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=30966">bpo-30966</a>).</p>
</section>
<section id="nntplib">
<h3><em>nntplib</em><a class="headerlink" href="#nntplib" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference internal" href="../library/nntplib.html#nntplib.NNTP" title="nntplib.NNTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">NNTP</span></code></a> and <a class="reference internal" href="../library/nntplib.html#nntplib.NNTP_SSL" title="nntplib.NNTP_SSL"><code class="xref py py-class docutils literal notranslate"><span class="pre">NNTP_SSL</span></code></a> now raise a <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></a>
if the given timeout for their constructor is zero to prevent the creation of
a non-blocking socket. (Contributed by Donghee Na in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39259">bpo-39259</a>.)</p>
</section>
<section id="os">
<h3><em>os</em><a class="headerlink" href="#os" title="Lien permanent vers ce titre">¶</a></h3>
<p>Added <a class="reference internal" href="../library/os.html#os.CLD_KILLED" title="os.CLD_KILLED"><code class="xref py py-const docutils literal notranslate"><span class="pre">CLD_KILLED</span></code></a> and <a class="reference internal" href="../library/os.html#os.CLD_STOPPED" title="os.CLD_STOPPED"><code class="xref py py-const docutils literal notranslate"><span class="pre">CLD_STOPPED</span></code></a> for <code class="xref py py-attr docutils literal notranslate"><span class="pre">si_code</span></code>.
(Contributed by Donghee Na in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38493">bpo-38493</a>.)</p>
<p>Exposed the Linux-specific <a class="reference internal" href="../library/os.html#os.pidfd_open" title="os.pidfd_open"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.pidfd_open()</span></code></a> (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38692">bpo-38692</a>) and
<a class="reference internal" href="../library/os.html#os.P_PIDFD" title="os.P_PIDFD"><code class="xref py py-const docutils literal notranslate"><span class="pre">os.P_PIDFD</span></code></a> (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38713">bpo-38713</a>) for process management with file
descriptors.</p>
<p>La fonction <a class="reference internal" href="../library/os.html#os.unsetenv" title="os.unsetenv"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.unsetenv()</span></code></a> est maintenant aussi disponible sur Windows (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39413">bpo-39413</a>).</p>
<p>Les fonctions <a class="reference internal" href="../library/os.html#os.putenv" title="os.putenv"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.putenv()</span></code></a> et <a class="reference internal" href="../library/os.html#os.unsetenv" title="os.unsetenv"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.unsetenv()</span></code></a> sont maintenant toujours disponibles (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39395">bpo-39395</a>).</p>
<p>Ajout de la fonction <a class="reference internal" href="../library/os.html#os.waitstatus_to_exitcode" title="os.waitstatus_to_exitcode"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.waitstatus_to_exitcode()</span></code></a> : convertit la valeur de retour de <code class="docutils literal notranslate"><span class="pre">wait()</span></code> en code de sortie (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40094">bpo-40094</a>).</p>
</section>
<section id="pathlib">
<h3><em>pathlib</em><a class="headerlink" href="#pathlib" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout de <a class="reference internal" href="../library/pathlib.html#pathlib.Path.readlink" title="pathlib.Path.readlink"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pathlib.Path.readlink()</span></code></a> qui a un comportement similaire à <a class="reference internal" href="../library/os.html#os.readlink" title="os.readlink"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.readlink()</span></code></a> (contribution de <em>Girts Folkmanis</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=30618">bpo-30618</a>).</p>
</section>
<section id="pdb">
<h3><em>pdb</em><a class="headerlink" href="#pdb" title="Lien permanent vers ce titre">¶</a></h3>
<p>Sur Windows, <a class="reference internal" href="../library/pdb.html#pdb.Pdb" title="pdb.Pdb"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pdb</span></code></a> gère maintenant <code class="docutils literal notranslate"><span class="pre">~/.pdbrc</span></code> (contribution de <em>Tim Hopper</em> et <em>Dan Lidral-Porter</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=20523">bpo-20523</a>).</p>
</section>
<section id="poplib">
<h3><em>poplib</em><a class="headerlink" href="#poplib" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference internal" href="../library/poplib.html#poplib.POP3" title="poplib.POP3"><code class="xref py py-class docutils literal notranslate"><span class="pre">POP3</span></code></a> and <a class="reference internal" href="../library/poplib.html#poplib.POP3_SSL" title="poplib.POP3_SSL"><code class="xref py py-class docutils literal notranslate"><span class="pre">POP3_SSL</span></code></a> now raise a <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></a>
if the given timeout for their constructor is zero to prevent the creation of
a non-blocking socket. (Contributed by Donghee Na in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39259">bpo-39259</a>.)</p>
</section>
<section id="pprint">
<h3><em>pprint</em><a class="headerlink" href="#pprint" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference internal" href="../library/pprint.html#module-pprint" title="pprint: Data pretty printer."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pprint</span></code></a> peut maintenant faire l'affichage formaté de <a class="reference internal" href="../library/types.html#types.SimpleNamespace" title="types.SimpleNamespace"><code class="xref py py-class docutils literal notranslate"><span class="pre">types.SimpleNamespace</span></code></a> (contribution de <em>Carl Bordum Hansen</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37376">bpo-37376</a>).</p>
</section>
<section id="pydoc">
<h3><em>pydoc</em><a class="headerlink" href="#pydoc" title="Lien permanent vers ce titre">¶</a></h3>
<p>La chaîne de documentation est maintenant affichée non seulement pour les classes, fonctions, méthodes, etc., mais aussi pour tout objet qui a son propre attribut <code class="docutils literal notranslate"><span class="pre">__doc__</span></code> (contribution de <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40257">bpo-40257</a>).</p>
</section>
<section id="random">
<h3><em>random</em><a class="headerlink" href="#random" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout de la méthode <code class="xref py py-attr docutils literal notranslate"><span class="pre">random.Random.randbytes</span></code> : génère des octets aléatoires (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40286">bpo-40286</a>).</p>
</section>
<section id="signal">
<h3><em>signal</em><a class="headerlink" href="#signal" title="Lien permanent vers ce titre">¶</a></h3>
<p>Sur Linux, exposition de <a class="reference internal" href="../library/signal.html#signal.pidfd_send_signal" title="signal.pidfd_send_signal"><code class="xref py py-func docutils literal notranslate"><span class="pre">signal.pidfd_send_signal()</span></code></a> pour envoyer des signaux à un processus en utilisant un descripteur de fichier plutôt qu'un identifiant de processus (<em>pid</em>). (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38712">bpo-38712</a>)</p>
</section>
<section id="smtplib">
<h3><em>smtplib</em><a class="headerlink" href="#smtplib" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference internal" href="../library/smtplib.html#smtplib.SMTP" title="smtplib.SMTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">SMTP</span></code></a> and <a class="reference internal" href="../library/smtplib.html#smtplib.SMTP_SSL" title="smtplib.SMTP_SSL"><code class="xref py py-class docutils literal notranslate"><span class="pre">SMTP_SSL</span></code></a> now raise a <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></a>
if the given timeout for their constructor is zero to prevent the creation of
a non-blocking socket. (Contributed by Donghee Na in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39259">bpo-39259</a>.)</p>
<p><a class="reference internal" href="../library/smtplib.html#smtplib.LMTP" title="smtplib.LMTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">LMTP</span></code></a> constructor  now has an optional <em>timeout</em> parameter.
(Contributed by Donghee Na in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39329">bpo-39329</a>.)</p>
</section>
<section id="socket">
<h3><em>socket</em><a class="headerlink" href="#socket" title="Lien permanent vers ce titre">¶</a></h3>
<p>The <a class="reference internal" href="../library/socket.html#module-socket" title="socket: Low-level networking interface."><code class="xref py py-mod docutils literal notranslate"><span class="pre">socket</span></code></a> module now exports the <a class="reference internal" href="../library/socket.html#socket.CAN_RAW_JOIN_FILTERS" title="socket.CAN_RAW_JOIN_FILTERS"><code class="xref py py-const docutils literal notranslate"><span class="pre">CAN_RAW_JOIN_FILTERS</span></code></a>
constant on Linux 4.1 and greater.
(Contributed by Stefan Tatschner and Zackery Spytz in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=25780">bpo-25780</a>.)</p>
<p>The socket module now supports the <a class="reference internal" href="../library/socket.html#socket.CAN_J1939" title="socket.CAN_J1939"><code class="xref py py-const docutils literal notranslate"><span class="pre">CAN_J1939</span></code></a> protocol on
platforms that support it.  (Contributed by Karl Ding in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40291">bpo-40291</a>.)</p>
<p>Le module <code class="docutils literal notranslate"><span class="pre">socket</span></code> possède maintenant les fonctions <a class="reference internal" href="../library/socket.html#socket.send_fds" title="socket.send_fds"><code class="xref py py-func docutils literal notranslate"><span class="pre">socket.send_fds()</span></code></a> et <a class="reference internal" href="../library/socket.html#socket.recv_fds" title="socket.recv_fds"><code class="xref py py-func docutils literal notranslate"><span class="pre">socket.recv_fds()</span></code></a> (contribution de <em>Joannah Nanjekye</em>, <em>Shinya Okano</em> et <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=28724">bpo-28724</a>).</p>
</section>
<section id="time">
<h3><em>time</em><a class="headerlink" href="#time" title="Lien permanent vers ce titre">¶</a></h3>
<p>On AIX, <a class="reference internal" href="../library/time.html#time.thread_time" title="time.thread_time"><code class="xref py py-func docutils literal notranslate"><span class="pre">thread_time()</span></code></a> is now implemented with <code class="docutils literal notranslate"><span class="pre">thread_cputime()</span></code>
which has nanosecond resolution, rather than
<code class="docutils literal notranslate"><span class="pre">clock_gettime(CLOCK_THREAD_CPUTIME_ID)</span></code> which has a resolution of 10 milliseconds.
(Contributed by Batuhan Taskaya in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40192">bpo-40192</a>)</p>
</section>
<section id="sys">
<h3><em>sys</em><a class="headerlink" href="#sys" title="Lien permanent vers ce titre">¶</a></h3>
<p>Added a new <a class="reference internal" href="../library/sys.html#sys.platlibdir" title="sys.platlibdir"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.platlibdir</span></code></a> attribute: name of the platform-specific
library directory. It is used to build the path of standard library and the
paths of installed extension modules. It is equal to <code class="docutils literal notranslate"><span class="pre">&quot;lib&quot;</span></code> on most
platforms.  On Fedora and SuSE, it is equal to <code class="docutils literal notranslate"><span class="pre">&quot;lib64&quot;</span></code> on 64-bit platforms.
(Contributed by Jan Matějek, Matěj Cepl, Charalampos Stratakis and Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1294959">bpo-1294959</a>.)</p>
<p>Previously, <a class="reference internal" href="../library/sys.html#sys.stderr" title="sys.stderr"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stderr</span></code></a> was block-buffered when non-interactive. Now
<code class="docutils literal notranslate"><span class="pre">stderr</span></code> defaults to always being line-buffered.
(Contributed by Jendrik Seipp in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=13601">bpo-13601</a>.)</p>
</section>
<section id="tracemalloc">
<h3><em>tracemalloc</em><a class="headerlink" href="#tracemalloc" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout de <a class="reference internal" href="../library/tracemalloc.html#tracemalloc.reset_peak" title="tracemalloc.reset_peak"><code class="xref py py-func docutils literal notranslate"><span class="pre">tracemalloc.reset_peak()</span></code></a> qui affecte la taille d'apogée (la plus grande taille atteinte) du bloc mémoire tracé à la taille courante, pour mesurer la taille d'apogée de parties de code spécifiques (contribution de <em>Huon Wilson</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40630">bpo-40630</a>).</p>
</section>
<section id="typing">
<h3><em>typing</em><a class="headerlink" href="#typing" title="Lien permanent vers ce titre">¶</a></h3>
<p><span class="target" id="index-70"></span><a class="pep reference external" href="https://peps.python.org/pep-0593/"><strong>PEP 593</strong></a> ajoute le type <a class="reference internal" href="../library/typing.html#typing.Annotated" title="typing.Annotated"><code class="xref py py-data docutils literal notranslate"><span class="pre">typing.Annotated</span></code></a> pour décorer les types existants avec des métadonnées spécifiques au contexte et le nouveau paramètre <code class="docutils literal notranslate"><span class="pre">include_extras</span></code> à <a class="reference internal" href="../library/typing.html#typing.get_type_hints" title="typing.get_type_hints"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.get_type_hints()</span></code></a> pour récupérer les métadonnées à l'exécution (contribution de <em>Till Varoquaux</em> et <em>Konstantin Kashin</em>).</p>
</section>
<section id="unicodedata">
<h3><em>unicodedata</em><a class="headerlink" href="#unicodedata" title="Lien permanent vers ce titre">¶</a></h3>
<p>La base de donnée Unicode a été mise à jour à la version 13.0.0. (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39926">bpo-39926</a>).</p>
</section>
<section id="venv">
<h3><em>venv</em><a class="headerlink" href="#venv" title="Lien permanent vers ce titre">¶</a></h3>
<p>Tous les scripts d'activations fournis par <a class="reference internal" href="../library/venv.html#module-venv" title="venv: Creation of virtual environments."><code class="xref py py-mod docutils literal notranslate"><span class="pre">venv</span></code></a> spécifient maintenant la personnalisation de l'invite de façon cohérente en utilisant toujours la valeur spécifiée dans <code class="docutils literal notranslate"><span class="pre">__VENV_PROMPT__</span></code>. Précédemment certains scripts utilisaient toujours <code class="docutils literal notranslate"><span class="pre">__VENV_PROMPT__</span></code>, d'autres seulement quand la variable était affectée, et un utilisait plutôt <code class="docutils literal notranslate"><span class="pre">__VENV_NAME__</span></code> (contribution de <em>Brett Cannon</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37663">bpo-37663</a>).</p>
</section>
<section id="xml">
<h3><em>xml</em><a class="headerlink" href="#xml" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les caractères d'espacement à l'intérieur des attributs sont maintenant préservés lors de la sérialisation d'<a class="reference internal" href="../library/xml.etree.elementtree.html#module-xml.etree.ElementTree" title="xml.etree.ElementTree: Implementation of the ElementTree API."><code class="xref py py-mod docutils literal notranslate"><span class="pre">xml.etree.ElementTree</span></code></a> en fichier XML. Les fin de lignes ne sont plus normalisées par &quot;n&quot;. Ceci est le résultat d'une discussion sur comment interpréter la section 2.11 de la spécification XML (contribution de <em>Mefistotelis</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39011">bpo-39011</a>).</p>
</section>
</section>
<section id="optimizations">
<h2>Optimisations<a class="headerlink" href="#optimizations" title="Lien permanent vers ce titre">¶</a></h2>
<ul>
<li><p>L'affectation d'une variable temporaire dans les compréhensions est optimisée. Maintenant <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">y</span> <span class="pre">in</span> <span class="pre">[expr]</span></code> dans les compréhensions est aussi rapide qu'une affectation simple <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">expr</span></code>. Par exemple :</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">sums</span> <span class="pre">=</span> <span class="pre">[s</span> <span class="pre">for</span> <span class="pre">s</span> <span class="pre">in</span> <span class="pre">[0]</span> <span class="pre">for</span> <span class="pre">x</span> <span class="pre">in</span> <span class="pre">data</span> <span class="pre">for</span> <span class="pre">s</span> <span class="pre">in</span> <span class="pre">[s</span> <span class="pre">+</span> <span class="pre">x]]</span></code></p>
</div></blockquote>
<p>Contrairement à l'opérateur <code class="docutils literal notranslate"><span class="pre">:=</span></code>, cet idiome ne laisse pas déborder une variable dans la portée externe.</p>
<p>(contribution de <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32856">bpo-32856</a>).</p>
</li>
<li><p>Optimisation de la gestion des signaux dans les applications avec plus d'un fil d'exécution (<em>multithreaded applications</em>). Si un fil d'exécution autre que le fil principal reçoit un signal, la boucle d'évaluation du code intermédiaire (<em>bytecode</em>) n'est plus interrompue à chaque instruction intermédiaire pour vérifier s'il y a des signaux en attente qui ne peuvent être gérés. Seul le fil principal de l'interpréteur principal peut gérer les signaux.</p>
<p>Précédemment, la boucle d'évaluation du code intermédiaire était interrompue à chaque instruction jusqu'à ce que le fil principal gère les signaux (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40010">bpo-40010</a>).</p>
</li>
<li><p>Optimisation du module <a class="reference internal" href="../library/subprocess.html#module-subprocess" title="subprocess: Subprocess management."><code class="xref py py-mod docutils literal notranslate"><span class="pre">subprocess</span></code></a> sur FreeBSD en utilisant <code class="docutils literal notranslate"><span class="pre">closefrom()</span></code> (contribution de <em>Ed Maste</em>, <em>Conrad Meyer</em>, <em>Kyle Evans</em>, <em>Kubilay Kocak</em> et <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38061">bpo-38061</a>).</p></li>
<li><p><a class="reference internal" href="../c-api/long.html#c.PyLong_FromDouble" title="PyLong_FromDouble"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyLong_FromDouble()</span></code></a> is now up to 1.87x faster for values that
fit into <span class="c-expr sig sig-inline c"><span class="kt">long</span></span>.
(Contributed by Sergey Fedoseev in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37986">bpo-37986</a>.)</p></li>
<li><p>A number of Python builtins (<a class="reference internal" href="../library/stdtypes.html#range" title="range"><code class="xref py py-class docutils literal notranslate"><span class="pre">range</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#tuple" title="tuple"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#set" title="set"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a>,
<a class="reference internal" href="../library/stdtypes.html#frozenset" title="frozenset"><code class="xref py py-class docutils literal notranslate"><span class="pre">frozenset</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#list" title="list"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>) are now sped up by using
<span class="target" id="index-18"></span><a class="pep reference external" href="https://peps.python.org/pep-0590/"><strong>PEP 590</strong></a> vectorcall protocol.
(Contributed by Donghee Na, Mark Shannon, Jeroen Demeyer and Petr Viktorin in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37207">bpo-37207</a>.)</p></li>
<li><p>Optimisation de <code class="xref py py-func docutils literal notranslate"><span class="pre">difference_update()</span></code> pour le cas où l'autre <em>set</em> est beaucoup plus grand que celui de base. (Suggestion par <em>Evgeny Kapun</em> et codage contribué par <em>Michele Orrù</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8425">bpo-8425</a>.)</p></li>
<li><p>L'allocateur de petits objets de Python (<code class="docutils literal notranslate"><span class="pre">obmalloc.c</span></code>) alloue maintenant (au plus) un aréna vide qui reste disponible pour réutilisation immédiate, sans le renvoyer au système d'exploitation. Ceci prévient l'emballement (<em>thrashing</em>) dans les boucles simples où un aréna pourrait être créé puis détruit à nouveau à chaque itération (contribution de <em>Tim Peters</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37257">bpo-37257</a>).</p></li>
<li><p><a class="reference internal" href="../glossary.html#term-floor-division"><span class="xref std std-term">floor division</span></a> of float operation now has a better performance. Also
the message of <a class="reference internal" href="../library/exceptions.html#ZeroDivisionError" title="ZeroDivisionError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code></a> for this operation is updated.
(Contributed by Donghee Na in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39434">bpo-39434</a>.)</p></li>
<li><p>Le décodage de courtes chaînes ASCII avec les codecs <em>UTF-8</em> et <em>ascii</em> est maintenant 15 % plus rapide (contribution de <em>Inada Naoki</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37348">bpo-37348</a>).</p></li>
</ul>
<p>Voici un résumé des améliorations de performance de Python 3.4 à Python 3.9 :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Python version                       3.4     3.5     3.6     3.7     3.8    3.9
--------------                       ---     ---     ---     ---     ---    ---

Variable and attribute read access:
    read_local                       7.1     7.1     5.4     5.1     3.9    3.9
    read_nonlocal                    7.1     8.1     5.8     5.4     4.4    4.5
    read_global                     15.5    19.0    14.3    13.6     7.6    7.8
    read_builtin                    21.1    21.6    18.5    19.0     7.5    7.8
    read_classvar_from_class        25.6    26.5    20.7    19.5    18.4   17.9
    read_classvar_from_instance     22.8    23.5    18.8    17.1    16.4   16.9
    read_instancevar                32.4    33.1    28.0    26.3    25.4   25.3
    read_instancevar_slots          27.8    31.3    20.8    20.8    20.2   20.5
    read_namedtuple                 73.8    57.5    45.0    46.8    18.4   18.7
    read_boundmethod                37.6    37.9    29.6    26.9    27.7   41.1

Variable and attribute write access:
    write_local                      8.7     9.3     5.5     5.3     4.3    4.3
    write_nonlocal                  10.5    11.1     5.6     5.5     4.7    4.8
    write_global                    19.7    21.2    18.0    18.0    15.8   16.7
    write_classvar                  92.9    96.0   104.6   102.1    39.2   39.8
    write_instancevar               44.6    45.8    40.0    38.9    35.5   37.4
    write_instancevar_slots         35.6    36.1    27.3    26.6    25.7   25.8

Data structure read access:
    read_list                       24.2    24.5    20.8    20.8    19.0   19.5
    read_deque                      24.7    25.5    20.2    20.6    19.8   20.2
    read_dict                       24.3    25.7    22.3    23.0    21.0   22.4
    read_strdict                    22.6    24.3    19.5    21.2    18.9   21.5

Data structure write access:
    write_list                      27.1    28.5    22.5    21.6    20.0   20.0
    write_deque                     28.7    30.1    22.7    21.8    23.5   21.7
    write_dict                      31.4    33.3    29.3    29.2    24.7   25.4
    write_strdict                   28.4    29.9    27.5    25.2    23.1   24.5

Stack (or queue) operations:
    list_append_pop                 93.4   112.7    75.4    74.2    50.8   50.6
    deque_append_pop                43.5    57.0    49.4    49.2    42.5   44.2
    deque_append_popleft            43.7    57.3    49.7    49.7    42.8   46.4

Timing loop:
    loop_overhead                    0.5     0.6     0.4     0.3     0.3    0.3
</pre></div>
</div>
<p>These results were generated from the variable access benchmark script at:
<code class="docutils literal notranslate"><span class="pre">Tools/scripts/var_access_benchmark.py</span></code>. The benchmark script displays timings
in nanoseconds.  The benchmarks were measured on an
<a class="reference external" href="https://ark.intel.com/content/www/us/en/ark/products/76088/intel-core-i7-4960hq-processor-6m-cache-up-to-3-80-ghz.html">Intel® Core™ i7-4960HQ processor</a>
running the macOS 64-bit builds found at
<a class="reference external" href="https://www.python.org/downloads/macos/">python.org</a>.</p>
</section>
<section id="deprecated">
<h2>Obsolescence<a class="headerlink" href="#deprecated" title="Lien permanent vers ce titre">¶</a></h2>
<ul>
<li><p>La commande de <em>distutils</em> <code class="docutils literal notranslate"><span class="pre">bdist_msi</span></code> est maintenant obsolète, utilisez plutôt <code class="docutils literal notranslate"><span class="pre">bdist_wheel</span></code> (paquet <em>wheel</em>) (contribution de <em>Hugo van Kemenade</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39586">bpo-39586</a>).</p></li>
<li><p>Présentement, <a class="reference internal" href="../library/math.html#math.factorial" title="math.factorial"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.factorial()</span></code></a> accepte des instances de <a class="reference internal" href="../library/functions.html#float" title="float"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> qui sont des entiers non-négatifs (comme <code class="docutils literal notranslate"><span class="pre">5.0</span></code>). Elle lève une <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> pour les <em>floats</em> non-entiers et négatifs. Ceci est maintenant obsolète. Les versions futures de Python vont lever une <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> pour tous les <em>floats</em> (contribution de <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37315">bpo-37315</a>).</p></li>
<li><p>Les modules <code class="xref py py-mod docutils literal notranslate"><span class="pre">parser</span></code> et <code class="xref py py-mod docutils literal notranslate"><span class="pre">symbol</span></code> sont obsolètes et seront retirés des versions futures de Python. Pour la majorité des cas d'utilisation, les utilisateurs peuvent tirer profit des stades de génération et de compilation d'un arbre de syntaxe abstraite, en utilisant le module <a class="reference internal" href="../library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ast</span></code></a>.</p></li>
<li><p>The Public C API functions <code class="xref c c-func docutils literal notranslate"><span class="pre">PyParser_SimpleParseStringFlags()</span></code>,
<code class="xref c c-func docutils literal notranslate"><span class="pre">PyParser_SimpleParseStringFlagsFilename()</span></code>,
<code class="xref c c-func docutils literal notranslate"><span class="pre">PyParser_SimpleParseFileFlags()</span></code> and <code class="xref c c-func docutils literal notranslate"><span class="pre">PyNode_Compile()</span></code>
are deprecated and will be removed in Python 3.10 together with the old parser.</p></li>
<li><p>L'utilisation de <a class="reference internal" href="../library/constants.html#NotImplemented" title="NotImplemented"><code class="xref py py-data docutils literal notranslate"><span class="pre">NotImplemented</span></code></a> dans un contexte booléen est devenu obsolète, puisque c'est presque toujours le résultat d'une implémentation incorrecte des opérateurs de comparaison avancés. Ceci va devenir une <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> dans les versions futures de Python (contribution de <em>Josh Rosenberg</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35712">bpo-35712</a>).</p></li>
<li><p>Le module <a class="reference internal" href="../library/random.html#module-random" title="random: Generate pseudo-random numbers with various common distributions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">random</span></code></a> accepte présentement n'importe quel hachable comme valeur d'ensemencement. Malheureusement, certains de ces types ne garantissent pas une valeur de hachage déterministe. Après Python 3.9, le module va restreindre l'ensemencement à <a class="reference internal" href="../library/constants.html#None" title="None"><code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></a>, <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference internal" href="../library/functions.html#float" title="float"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> et <a class="reference internal" href="../library/stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a>.</p></li>
<li><p>Ouvrir un fichier <a class="reference internal" href="../library/gzip.html#gzip.GzipFile" title="gzip.GzipFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">GzipFile</span></code></a> en écriture sans spécifier l'argument <em>mode</em> est obsolète. Dans les futures versions de Python, il sera toujours ouvert en lecture par défaut. Spécifiez l'argument <em>mode</em> pour l'ouvrir en écriture et supprimer l'avertissement (contribution de <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=28286">bpo-28286</a>).</p></li>
<li><p>La méthode <code class="docutils literal notranslate"><span class="pre">split()</span></code> de <code class="xref py py-class docutils literal notranslate"><span class="pre">_tkinter.TkappType</span></code> est obsolète. La méthode <code class="docutils literal notranslate"><span class="pre">splitlist()</span></code> est plus favorable, car elle a un comportement plus cohérent et prévisible (contribution de <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38371">bpo-38371</a>).</p></li>
<li><p>Le passage explicite d'objets coroutine à <a class="reference internal" href="../library/asyncio-task.html#asyncio.wait" title="asyncio.wait"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.wait()</span></code></a> est devenu obsolète et sera retiré dans la version 3.11. (Contribution de <em>Yury Selivanov</em> et <em>Kyle Stanley</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34790">bpo-34790</a>.)</p></li>
<li><p>Les standards <em>binhex4</em> et <em>hexbin4</em> sont maintenant obsolètes. Le module <code class="xref py py-mod docutils literal notranslate"><span class="pre">binhex</span></code> et les fonctions suivantes du module <a class="reference internal" href="../library/binascii.html#module-binascii" title="binascii: Tools for converting between binary and various ASCII-encoded binary representations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">binascii</span></code></a> sont maintenant obsolètes :</p>
<ul class="simple">
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">b2a_hqx()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">a2b_hqx()</span></code></p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">rlecode_hqx()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">rledecode_hqx()</span></code></p></li>
</ul>
<p>(contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39353">bpo-39353</a>).</p>
</li>
<li><p>Les classes <code class="docutils literal notranslate"><span class="pre">slice</span></code>, <code class="docutils literal notranslate"><span class="pre">Index</span></code> et <code class="docutils literal notranslate"><span class="pre">ExtSlice</span></code> du module <a class="reference internal" href="../library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ast</span></code></a> sont considérées obsolètes et seront retirées des versions futures de Python. <code class="docutils literal notranslate"><span class="pre">value</span></code> doit être utilisé à la place de <code class="docutils literal notranslate"><span class="pre">Index(value)</span></code>. <code class="docutils literal notranslate"><span class="pre">Tuple(slices,</span> <span class="pre">Load())</span></code> doit être utilisé plutôt que <code class="docutils literal notranslate"><span class="pre">ExtSlice(slices)</span></code> (contribution de <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34822">bpo-34822</a>).</p></li>
<li><p>Les classes <code class="docutils literal notranslate"><span class="pre">Suite</span></code>, <code class="docutils literal notranslate"><span class="pre">Param</span></code>, <code class="docutils literal notranslate"><span class="pre">AugLoad</span></code> et <code class="docutils literal notranslate"><span class="pre">AugStore</span></code> du module <a class="reference internal" href="../library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ast</span></code></a> sont considérées obsolètes et seront retirées des versions futures de Python. Elles n'étaient pas produites par l'analyseur et n'étaient pas acceptées par le générateur de code dans Python 3 (contribution de <em>Batuhan Taskaya</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39639">bpo-39639</a> et <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39969">bpo-39969</a> et <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39988">bpo-39988</a>).</p></li>
<li><p>The <code class="xref c c-func docutils literal notranslate"><span class="pre">PyEval_InitThreads()</span></code> and <code class="xref c c-func docutils literal notranslate"><span class="pre">PyEval_ThreadsInitialized()</span></code>
functions are now deprecated and will be removed in Python 3.11. Calling
<code class="xref c c-func docutils literal notranslate"><span class="pre">PyEval_InitThreads()</span></code> now does nothing. The <a class="reference internal" href="../glossary.html#term-GIL"><span class="xref std std-term">GIL</span></a> is initialized
by <a class="reference internal" href="../c-api/init.html#c.Py_Initialize" title="Py_Initialize"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_Initialize()</span></code></a> since Python 3.7.
(Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39877">bpo-39877</a>.)</p></li>
<li><p>Passer <code class="docutils literal notranslate"><span class="pre">None</span></code> comme premier argument à la fonction <a class="reference internal" href="../library/shlex.html#shlex.split" title="shlex.split"><code class="xref py py-func docutils literal notranslate"><span class="pre">shlex.split()</span></code></a> a été rendu obsolète (contribution de <em>Zackery Spytz</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33262">bpo-33262</a>).</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">smtpd.MailmanProxy()</span></code> est maintenant obsolète puisqu'elle n'est pas utilisable sans le module externe <code class="docutils literal notranslate"><span class="pre">mailman</span></code> (contribution de <em>Samuel Colvin</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35800">bpo-35800</a>).</p></li>
<li><p>Le module <a class="reference internal" href="../library/2to3.html#module-lib2to3" title="lib2to3: The 2to3 library"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lib2to3</span></code></a> émet maintenant un <a class="reference internal" href="../library/exceptions.html#PendingDeprecationWarning" title="PendingDeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">PendingDeprecationWarning</span></code></a>. Python 3.9 est passé à un analyseur <em>PEG</em> (voir <span class="target" id="index-71"></span><a class="pep reference external" href="https://peps.python.org/pep-0617/"><strong>PEP 617</strong></a>), et Python 3.10 peut inclure des changements à la syntaxe qui ne sont pas analysables par l'analyseur <em>LL(1)</em> de <code class="docutils literal notranslate"><span class="pre">lib2to3</span></code>. Le module <code class="docutils literal notranslate"><span class="pre">lib2to3</span></code> peut être retiré de la bibliothèque standard dans une version future de Python. Considérez une alternative tierce telle que <a class="reference external" href="https://libcst.readthedocs.io/">LibCST</a> ou <a class="reference external" href="https://parso.readthedocs.io/">parso</a> (contribution de <em>Carl Meyer</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40360">bpo-40360</a>).</p></li>
<li><p>Le paramètre <em>random</em> de <a class="reference internal" href="../library/random.html#random.shuffle" title="random.shuffle"><code class="xref py py-func docutils literal notranslate"><span class="pre">random.shuffle()</span></code></a> est maintenant obsolète (contribution de <em>Raymond Hettinger</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40465">bpo-40465</a>).</p></li>
</ul>
</section>
<section id="removed">
<span id="removed-in-python-39"></span><h2>Retraits<a class="headerlink" href="#removed" title="Lien permanent vers ce titre">¶</a></h2>
<ul class="simple">
<li><p>La version erronée dans <code class="xref py py-data docutils literal notranslate"><span class="pre">unittest.mock.__version__</span></code> a été retirée.</p></li>
<li><p><a class="reference internal" href="../library/nntplib.html#nntplib.NNTP" title="nntplib.NNTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">nntplib.NNTP</span></code></a>: <code class="docutils literal notranslate"><span class="pre">xpath()</span></code> and <code class="docutils literal notranslate"><span class="pre">xgtitle()</span></code> methods have been removed.
These methods are deprecated since Python 3.3. Generally, these extensions
are not supported or not enabled by NNTP server administrators.
For <code class="docutils literal notranslate"><span class="pre">xgtitle()</span></code>, please use <a class="reference internal" href="../library/nntplib.html#nntplib.NNTP.descriptions" title="nntplib.NNTP.descriptions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">nntplib.NNTP.descriptions()</span></code></a> or
<a class="reference internal" href="../library/nntplib.html#nntplib.NNTP.description" title="nntplib.NNTP.description"><code class="xref py py-meth docutils literal notranslate"><span class="pre">nntplib.NNTP.description()</span></code></a> instead.
(Contributed by Donghee Na in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39366">bpo-39366</a>.)</p></li>
<li><p>Les méthodes de <a class="reference internal" href="../library/array.html#array.array" title="array.array"><code class="xref py py-class docutils literal notranslate"><span class="pre">array.array</span></code></a> : <code class="docutils literal notranslate"><span class="pre">tostring()</span></code> et <code class="docutils literal notranslate"><span class="pre">fromstring()</span></code> ont été retirées. Elles étaient des alias de <code class="docutils literal notranslate"><span class="pre">tobytes()</span></code> et <code class="docutils literal notranslate"><span class="pre">frombytes()</span></code>, obsolètes depuis Python 3.2 (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38916">bpo-38916</a>).</p></li>
<li><p>La fonction non-documentée <code class="docutils literal notranslate"><span class="pre">sys.callstats()</span></code> a été retirée. Depuis Python 3.7, elle était obsolète et retournait toujours <a class="reference internal" href="../library/constants.html#None" title="None"><code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></a>. Elle dépendait de l'option de construction <code class="docutils literal notranslate"><span class="pre">CALL_PROFILE</span></code> qui avait déjà été retirée dans Python 3.7 (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37414">bpo-37414</a>).</p></li>
<li><p>Les fonctions <code class="docutils literal notranslate"><span class="pre">sys.getcheckinterval()</span></code> et <code class="docutils literal notranslate"><span class="pre">sys.setcheckinterval()</span></code> ont été retirées. Elle étaient obsolètes depuis Python 3.2. Utilisez plutôt <a class="reference internal" href="../library/sys.html#sys.getswitchinterval" title="sys.getswitchinterval"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.getswitchinterval()</span></code></a> et <a class="reference internal" href="../library/sys.html#sys.setswitchinterval" title="sys.setswitchinterval"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.setswitchinterval()</span></code></a> (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37392">bpo-37392</a>).</p></li>
<li><p>La fonction C <code class="docutils literal notranslate"><span class="pre">PyImport_Cleanup()</span></code> a été retirée. Elle était documentée comme &quot;Vide la table des modules. Pour usage interne seulement.&quot; (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36710">bpo-36710</a>).</p></li>
<li><p>Les modules <code class="docutils literal notranslate"><span class="pre">_dummy_thread</span></code> et <code class="docutils literal notranslate"><span class="pre">dummy_threading</span></code> ont été retirés. Ces modules étaient obsolètes depuis Python 3.7 qui a besoin de la gestion de fils d'exécution multiples (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37312">bpo-37312</a>).</p></li>
<li><p>L'alias <code class="docutils literal notranslate"><span class="pre">aifc.openfp()</span></code> de <code class="docutils literal notranslate"><span class="pre">aifc.open()</span></code>, l'alias <code class="docutils literal notranslate"><span class="pre">sunau.openfp()</span></code> de <code class="docutils literal notranslate"><span class="pre">sunau.open()</span></code> et l'alias <code class="docutils literal notranslate"><span class="pre">wave.openfp()</span></code> de <a class="reference internal" href="../library/wave.html#wave.open" title="wave.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">wave.open()</span></code></a> ont été retirés. Ils étaient obsolètes depuis Python 3.7 (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37320">bpo-37320</a>).</p></li>
<li><p>The <code class="xref py py-meth docutils literal notranslate"><span class="pre">isAlive()</span></code> method of <a class="reference internal" href="../library/threading.html#threading.Thread" title="threading.Thread"><code class="xref py py-class docutils literal notranslate"><span class="pre">threading.Thread</span></code></a>
has been removed. It was deprecated since Python 3.8.
Use <a class="reference internal" href="../library/threading.html#threading.Thread.is_alive" title="threading.Thread.is_alive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_alive()</span></code></a> instead.
(Contributed by Donghee Na in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37804">bpo-37804</a>.)</p></li>
<li><p>Les méthodes <code class="docutils literal notranslate"><span class="pre">getchildren()</span></code> et <code class="docutils literal notranslate"><span class="pre">getiterator()</span></code> des classes <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.ElementTree" title="xml.etree.ElementTree.ElementTree"><code class="xref py py-class docutils literal notranslate"><span class="pre">ElementTree</span></code></a> et <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.Element" title="xml.etree.ElementTree.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a> dans le module <a class="reference internal" href="../library/xml.etree.elementtree.html#module-xml.etree.ElementTree" title="xml.etree.ElementTree: Implementation of the ElementTree API."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ElementTree</span></code></a> ont été retirées. Elle avaient été déclarées obsolètes dans Python 3.2. Utilisez <code class="docutils literal notranslate"><span class="pre">iter(x)</span></code> ou <code class="docutils literal notranslate"><span class="pre">list(x)</span></code> plutôt que <code class="docutils literal notranslate"><span class="pre">x.getchildren()</span></code> et <code class="docutils literal notranslate"><span class="pre">x.iter()</span></code> ou <code class="docutils literal notranslate"><span class="pre">list(x.iter())</span></code> plutôt que <code class="docutils literal notranslate"><span class="pre">x.getiterator()</span></code> (contribution de <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36543">bpo-36543</a>).</p></li>
<li><p>L'ancienne API <a class="reference internal" href="../library/plistlib.html#module-plistlib" title="plistlib: Generate and parse Apple plist files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">plistlib</span></code></a> a été retirée, elle était obsolète depuis Python 3.4. Utilisez les fonctions <a class="reference internal" href="../library/plistlib.html#plistlib.load" title="plistlib.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">load()</span></code></a>, <a class="reference internal" href="../library/plistlib.html#plistlib.loads" title="plistlib.loads"><code class="xref py py-func docutils literal notranslate"><span class="pre">loads()</span></code></a>, <a class="reference internal" href="../library/plistlib.html#plistlib.dump" title="plistlib.dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">dump()</span></code></a> et <a class="reference internal" href="../library/plistlib.html#plistlib.dumps" title="plistlib.dumps"><code class="xref py py-func docutils literal notranslate"><span class="pre">dumps()</span></code></a>. De plus, le paramètre <em>use_builtin_types</em> a été retiré, les objets <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> natifs sont toujours utilisés.</p></li>
<li><p>La fonction C <code class="docutils literal notranslate"><span class="pre">PyGen_NeedsFinalizing</span></code> a été retirée. Elle n'était pas documentée, testée ou utilisée où que ce soit dans CPython après l'implémentation de <span class="target" id="index-72"></span><a class="pep reference external" href="https://peps.python.org/pep-0442/"><strong>PEP 442</strong></a> (contribution de <em>Joannah Nanjekye</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=15088">bpo-15088</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">base64.encodestring()</span></code> et <code class="docutils literal notranslate"><span class="pre">base64.decodestring()</span></code>, des alias obsolètes depuis Python 3.1, ont été retirées : utilisez plutôt <a class="reference internal" href="../library/base64.html#base64.encodebytes" title="base64.encodebytes"><code class="xref py py-func docutils literal notranslate"><span class="pre">base64.encodebytes()</span></code></a> et <a class="reference internal" href="../library/base64.html#base64.decodebytes" title="base64.decodebytes"><code class="xref py py-func docutils literal notranslate"><span class="pre">base64.decodebytes()</span></code></a> (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39351">bpo-39351</a>).</p></li>
<li><p>La fonction <code class="docutils literal notranslate"><span class="pre">fractions.gcd()</span></code> a été retirée, elle était obsolète depuis Python 3.5 (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=22486">bpo-22486</a>) : utilisez plutôt <a class="reference internal" href="../library/math.html#math.gcd" title="math.gcd"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.gcd()</span></code></a> (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39350">bpo-39350</a>).</p></li>
<li><p>Le paramètre <em>buffering</em> de la classe <a class="reference internal" href="../library/bz2.html#bz2.BZ2File" title="bz2.BZ2File"><code class="xref py py-class docutils literal notranslate"><span class="pre">bz2.BZ2File</span></code></a> a été retiré. Depuis Python 3.0, il était ignoré et son utilisation levait un <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a>. Passez un objet fichier déjà ouvert pour déterminer comment le fichier sera ouvert (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39357">bpo-39357</a>).</p></li>
<li><p>Le paramètre <em>encoding</em> de <a class="reference internal" href="../library/json.html#json.loads" title="json.loads"><code class="xref py py-func docutils literal notranslate"><span class="pre">json.loads()</span></code></a> a été retiré. À partir de Python 3.1, il était obsolète et ignoré ; son utilisation levait un <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> depuis Python 3.8 (contribution de <em>Inada Naoki</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39377">bpo-39377</a>).</p></li>
<li><p>Les instructions <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">(await</span> <span class="pre">asyncio.lock):</span></code> et <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">(yield</span> <span class="pre">from</span> <span class="pre">asyncio.lock):</span></code> ne sont plus prises en charge, utilisez plutôt <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span> <span class="pre">lock</span></code>. De même pour <code class="docutils literal notranslate"><span class="pre">asyncio.Condition</span></code> et <code class="docutils literal notranslate"><span class="pre">asyncio.Semaphore</span></code> (contribution de <em>Andrew Svetlov</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34793">bpo-34793</a>).</p></li>
<li><p>La fonction <code class="xref py py-func docutils literal notranslate"><span class="pre">sys.getcounts()</span></code>, l'option de ligne de commande <code class="docutils literal notranslate"><span class="pre">-X</span> <span class="pre">showalloccount</span></code> et le champ <code class="docutils literal notranslate"><span class="pre">show_alloc_count</span></code> de la structure C <a class="reference internal" href="../c-api/init_config.html#c.PyConfig" title="PyConfig"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyConfig</span></code></a> ont été retirés. Ils dépendaient d'une compilation spéciale de Python en définissant la macro <code class="docutils literal notranslate"><span class="pre">COUNT_ALLOCS</span></code> (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39489">bpo-39489</a>).</p></li>
<li><p>L'attribut <code class="docutils literal notranslate"><span class="pre">_field_types</span></code> de la classe <a class="reference internal" href="../library/typing.html#typing.NamedTuple" title="typing.NamedTuple"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.NamedTuple</span></code></a> a été retiré. Il était obsolète depuis Python 3.8. Utilisez plutôt l'attribut <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> (contribution de <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40182">bpo-40182</a>).</p></li>
<li><p>La méthode <code class="xref py py-meth docutils literal notranslate"><span class="pre">symtable.SymbolTable.has_exec()</span></code> a été retirée. Elle était obsolète depuis 2006 et ne renvoyait que <code class="docutils literal notranslate"><span class="pre">False</span></code> lorsqu'elle était appelée (contribution de <em>Batuhan Taskaya</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40208">bpo-40208</a>).</p></li>
<li><p>Les méthodes <code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.Task.current_task()</span></code> et <code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.Task.all_tasks()</span></code> ont été retirées. Elles étaient obsolètes depuis Python 3.7. Utilisez plutôt <a class="reference internal" href="../library/asyncio-task.html#asyncio.current_task" title="asyncio.current_task"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.current_task()</span></code></a> et <a class="reference internal" href="../library/asyncio-task.html#asyncio.all_tasks" title="asyncio.all_tasks"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.all_tasks()</span></code></a> (contribution de <em>Rémi Lapeyre</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40967">bpo-40967</a>).</p></li>
<li><p>La méthode <code class="docutils literal notranslate"><span class="pre">unescape()</span></code> de la classe <a class="reference internal" href="../library/html.parser.html#html.parser.HTMLParser" title="html.parser.HTMLParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">html.parser.HTMLParser</span></code></a> a été retirée (elle était obsolète depuis Python 3.4). <a class="reference internal" href="../library/html.html#html.unescape" title="html.unescape"><code class="xref py py-func docutils literal notranslate"><span class="pre">html.unescape()</span></code></a> doit être utilisée pour convertir les références de caractère en leurs caractères Unicode correspondants.</p></li>
</ul>
</section>
<section id="porting-to-python-3-9">
<h2>Portage vers Python 3.9<a class="headerlink" href="#porting-to-python-3-9" title="Lien permanent vers ce titre">¶</a></h2>
<p>Cette section liste les changements mentionnés préalablement et d'autres améliorations qui peuvent demander des changements à votre code.</p>
<section id="changes-in-the-python-api">
<h3>Changements dans l'API Python<a class="headerlink" href="#changes-in-the-python-api" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../library/functions.html#import__" title="__import__"><code class="xref py py-func docutils literal notranslate"><span class="pre">__import__()</span></code></a> et <a class="reference internal" href="../library/importlib.html#importlib.util.resolve_name" title="importlib.util.resolve_name"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.util.resolve_name()</span></code></a> lèvent maintenant <a class="reference internal" href="../library/exceptions.html#ImportError" title="ImportError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ImportError</span></code></a> où elles levaient précédemment <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a>. Les appelants qui attrapent les types spécifiques d'exceptions et qui prennent à la fois en charge Python 3.9 et des versions précédentes doivent attraper les deux types avec <code class="docutils literal notranslate"><span class="pre">except</span> <span class="pre">(ImportError,</span> <span class="pre">ValueError):</span></code>.</p></li>
<li><p>Il n'y a plus de traitement spécial dans les scriptes d'activation de <a class="reference internal" href="../library/venv.html#module-venv" title="venv: Creation of virtual environments."><code class="xref py py-mod docutils literal notranslate"><span class="pre">venv</span></code></a> quand <code class="docutils literal notranslate"><span class="pre">__VENV_PROMPT__</span></code> est mis à <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>.</p></li>
<li><p>The <a class="reference internal" href="../library/select.html#select.epoll.unregister" title="select.epoll.unregister"><code class="xref py py-meth docutils literal notranslate"><span class="pre">select.epoll.unregister()</span></code></a> method no longer ignores the
<a class="reference internal" href="../library/errno.html#errno.EBADF" title="errno.EBADF"><code class="xref py py-const docutils literal notranslate"><span class="pre">EBADF</span></code></a> error.
(Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39239">bpo-39239</a>.)</p></li>
<li><p>Le paramètre <em>compresslevel</em> de <a class="reference internal" href="../library/bz2.html#bz2.BZ2File" title="bz2.BZ2File"><code class="xref py py-class docutils literal notranslate"><span class="pre">bz2.BZ2File</span></code></a> est devenu exclusivement nommé (<em>keyword-only</em>) puisque le paramètre <em>buffering</em> a été retiré (contribution de <em>Victor Stinner</em> in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39357">bpo-39357</a>).</p></li>
<li><p>Simplification de l'<em>AST</em> pour l'indiçage. Les indices simples sont représentés par leur valeur, les tranches étendues sont représentées par des <em>n</em>-uplets. <code class="docutils literal notranslate"><span class="pre">Index(value)</span></code> va renvoyer <code class="docutils literal notranslate"><span class="pre">value</span></code> elle-même, <code class="docutils literal notranslate"><span class="pre">ExtSlice(slices)</span></code> va renvoyer <code class="docutils literal notranslate"><span class="pre">Tuple(slices,</span> <span class="pre">Load())</span></code> (contribution de <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34822">bpo-34822</a>).</p></li>
<li><p>Le module <a class="reference internal" href="../library/importlib.html#module-importlib" title="importlib: The implementation of the import machinery."><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib</span></code></a> ignore maintenant la variable d’environnement <span class="target" id="index-73"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONCASEOK"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONCASEOK</span></code></a> quand les options de ligne de commande <a class="reference internal" href="../using/cmdline.html#cmdoption-E"><code class="xref std std-option docutils literal notranslate"><span class="pre">-E</span></code></a> ou <a class="reference internal" href="../using/cmdline.html#cmdoption-I"><code class="xref std std-option docutils literal notranslate"><span class="pre">-I</span></code></a> sont utilisées.</p></li>
<li><p>Le paramètre <em>encoding</em> a été ajouté aux classes <a class="reference internal" href="../library/ftplib.html#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">ftplib.FTP</span></code></a> et <code class="xref py py-class docutils literal notranslate"><span class="pre">ftplib.FTP_TLS</span></code> en paramètre exclusivement nommé et l'encodage par défaut est passé de <em>Latin-1</em> à <em>UTF-8</em> en conformité à <span class="target" id="index-74"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2640.html"><strong>RFC 2640</strong></a>.</p></li>
<li><p><a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.shutdown_default_executor" title="asyncio.loop.shutdown_default_executor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.loop.shutdown_default_executor()</span></code></a> a été ajouté à <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.AbstractEventLoop" title="asyncio.AbstractEventLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractEventLoop</span></code></a>, donc les boucles d'événements alternatives qui héritent de celle-ci devraient définir cette méthode (contribution de <em>Kyle Stanley</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34037">bpo-34037</a>).</p></li>
<li><p>Les valeurs constantes des drapeaux futurs du module <a class="reference internal" href="../library/__future__.html#module-__future__" title="__future__: Future statement definitions"><code class="xref py py-mod docutils literal notranslate"><span class="pre">__future__</span></code></a> sont mises à jour pour éviter les collisions avec les drapeaux du compilateur. Précédemment, <code class="docutils literal notranslate"><span class="pre">PyCF_ALLOW_TOP_LEVEL_AWAIT</span></code> était en collision avec <code class="docutils literal notranslate"><span class="pre">CO_FUTURE_DIVISION</span></code> (contribution de <em>Batuhan Taskaya</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39562">bpo-39562</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array('u')</span></code> now uses <code class="xref c c-type docutils literal notranslate"><span class="pre">wchar_t</span></code> as C type instead of <code class="docutils literal notranslate"><span class="pre">Py_UNICODE</span></code>.
This change doesn't affect to its behavior because <code class="docutils literal notranslate"><span class="pre">Py_UNICODE</span></code> is alias
of <code class="xref c c-type docutils literal notranslate"><span class="pre">wchar_t</span></code> since Python 3.3.
(Contributed by Inada Naoki in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34538">bpo-34538</a>.)</p></li>
<li><p>L'API <a class="reference internal" href="../library/logging.html#logging.getLogger" title="logging.getLogger"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.getLogger()</span></code></a> renvoie maintenant le journaliseur racine quand on lui passe le nom <code class="docutils literal notranslate"><span class="pre">'root'</span></code>, alors que préalablement il renvoyait un journaliseur non-racine appelé <code class="docutils literal notranslate"><span class="pre">'root'</span></code>. Ceci peut affecter les cas où le code de l'utilisateur veut explicitement un journaliseur non-racine appelé <code class="docutils literal notranslate"><span class="pre">'root'</span></code>, ou instancie un journaliseur avec <code class="docutils literal notranslate"><span class="pre">logging.getLogger(__name__)</span></code> dans un module de niveau principal appelé <code class="docutils literal notranslate"><span class="pre">'root.py'</span></code> (contribution de <em>Vinay Sajip</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37742">bpo-37742</a>).</p></li>
<li><p>La gestion de la division de <a class="reference internal" href="../library/pathlib.html#pathlib.PurePath" title="pathlib.PurePath"><code class="xref py py-class docutils literal notranslate"><span class="pre">PurePath</span></code></a> renvoie maintenant <code class="docutils literal notranslate"><span class="pre">NotImplemented</span></code> plutôt que de lever une <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> lorsqu'on passe une valeur autre qu'une instance de <code class="docutils literal notranslate"><span class="pre">str</span></code> ou <a class="reference internal" href="../library/pathlib.html#pathlib.PurePath" title="pathlib.PurePath"><code class="xref py py-class docutils literal notranslate"><span class="pre">PurePath</span></code></a>. Ceci permet la création de classes compatibles qui n'héritent pas de ces types (contribution de <em>Roger Aiudi</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34775">bpo-34775</a>.)</p></li>
<li><p>Starting with Python 3.9.5 the <a class="reference internal" href="../library/ipaddress.html#module-ipaddress" title="ipaddress: IPv4/IPv6 manipulation library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ipaddress</span></code></a> module no longer
accepts any leading zeros in IPv4 address strings. Leading zeros are
ambiguous and interpreted as octal notation by some libraries. For example
the legacy function <a class="reference internal" href="../library/socket.html#socket.inet_aton" title="socket.inet_aton"><code class="xref py py-func docutils literal notranslate"><span class="pre">socket.inet_aton()</span></code></a> treats leading zeros as octal
notatation. glibc implementation of modern <a class="reference internal" href="../library/socket.html#socket.inet_pton" title="socket.inet_pton"><code class="xref py py-func docutils literal notranslate"><span class="pre">inet_pton()</span></code></a> does
not accept any leading zeros.
(Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36384">bpo-36384</a>).</p></li>
<li><p><a class="reference internal" href="../library/codecs.html#codecs.lookup" title="codecs.lookup"><code class="xref py py-func docutils literal notranslate"><span class="pre">codecs.lookup()</span></code></a> now normalizes the encoding name the same way as
<code class="xref py py-func docutils literal notranslate"><span class="pre">encodings.normalize_encoding()</span></code>, except that <a class="reference internal" href="../library/codecs.html#codecs.lookup" title="codecs.lookup"><code class="xref py py-func docutils literal notranslate"><span class="pre">codecs.lookup()</span></code></a> also
converts the name to lower case. For example, <code class="docutils literal notranslate"><span class="pre">&quot;latex+latin1&quot;</span></code> encoding
name is now normalized to <code class="docutils literal notranslate"><span class="pre">&quot;latex_latin1&quot;</span></code>.
(Contributed by Jordon Xu in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37751">bpo-37751</a>.)</p></li>
</ul>
</section>
<section id="changes-in-the-c-api">
<h3>Changements dans l'API C<a class="headerlink" href="#changes-in-the-c-api" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><p>Les instances de <a class="reference internal" href="../c-api/typeobj.html#heap-types"><span class="std std-ref">types alloués sur le tas</span></a> (tels que ceux créés avec <a class="reference internal" href="../c-api/type.html#c.PyType_FromSpec" title="PyType_FromSpec"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_FromSpec()</span></code></a> et les APIs similaires) gardent une référence à leur objet type depuis Python 3.8. Tel qu'indiqué dans &quot;Changements à l'API C&quot; de Python 3.8, pour la grande majorité des cas, il ne devrait pas y avoir d'effets secondaires sauf pour les types qui ont une fonction <a class="reference internal" href="../c-api/typeobj.html#c.PyTypeObject.tp_traverse" title="PyTypeObject.tp_traverse"><code class="xref c c-member docutils literal notranslate"><span class="pre">tp_traverse</span></code></a> personnalisée. Assurez-vous que toutes les fonctions <code class="docutils literal notranslate"><span class="pre">tp_traverse</span></code> personnalisées des types alloués sur le tas visitent le type de l'objet.</p>
<blockquote>
<div><p>Exemple :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span>
<span class="nf">foo_traverse</span><span class="p">(</span><span class="n">foo_struct</span><span class="w"> </span><span class="o">*</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="n">visitproc</span><span class="w"> </span><span class="n">visit</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="c1">// Rest of the traverse function</span>
<span class="cp">#if PY_VERSION_HEX &gt;= 0x03090000</span>
<span class="w">    </span><span class="c1">// This was not needed before Python 3.9 (Python issue 35810 and 40217)</span>
<span class="w">    </span><span class="n">Py_VISIT</span><span class="p">(</span><span class="n">Py_TYPE</span><span class="p">(</span><span class="n">self</span><span class="p">));</span>
<span class="cp">#endif</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Si votre fonction de traversée délègue à la <code class="docutils literal notranslate"><span class="pre">tp_traverse</span></code> de sa classe mère (ou d'un autre type), assurez-vous que <code class="docutils literal notranslate"><span class="pre">Py_TYPE(self)</span></code> ne soit visité qu'une seule fois. Prenez note que seuls les <a class="reference internal" href="../c-api/typeobj.html#heap-types"><span class="std std-ref">types du tas</span></a> doivent visiter leur type dans <code class="docutils literal notranslate"><span class="pre">tp_traverse</span></code>.</p>
<blockquote>
<div><p>Par exemple, si votre fonction <code class="docutils literal notranslate"><span class="pre">tp_traverse</span></code> inclut :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">base</span><span class="o">-&gt;</span><span class="n">tp_traverse</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="n">visit</span><span class="p">,</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span>
</pre></div>
</div>
<p>alors ajoutez :</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#if PY_VERSION_HEX &gt;= 0x03090000</span>
<span class="w">    </span><span class="c1">// This was not needed before Python 3.9 (bpo-35810 and bpo-40217)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">base</span><span class="o">-&gt;</span><span class="n">tp_flags</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">Py_TPFLAGS_HEAPTYPE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// a heap type&#39;s tp_traverse already visited Py_TYPE(self)</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Py_VISIT</span><span class="p">(</span><span class="n">Py_TYPE</span><span class="p">(</span><span class="n">self</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="cp">#else</span>
</pre></div>
</div>
</div></blockquote>
<p>(Voir <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35810">bpo-35810</a> et <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40217">bpo-40217</a> pour plus d'information.)</p>
</li>
<li><p>Les fonctions <code class="docutils literal notranslate"><span class="pre">PyEval_CallObject</span></code>, <code class="docutils literal notranslate"><span class="pre">PyEval_CallFunction</span></code>, <code class="docutils literal notranslate"><span class="pre">PyEval_CallMethod</span></code> et <code class="docutils literal notranslate"><span class="pre">PyEval_CallObjectWithKeywords</span></code> sont obsolètes. Utilisez plutôt <a class="reference internal" href="../c-api/call.html#c.PyObject_Call" title="PyObject_Call"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_Call()</span></code></a> et ses variantes. (Pour plus de détails, voir <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=29548">bpo-29548</a>.)</p></li>
</ul>
</section>
<section id="cpython-bytecode-changes">
<h3>Changements au code intermédiaire CPython<a class="headerlink" href="#cpython-bytecode-changes" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><p>Le code d'opération <a class="reference internal" href="../library/dis.html#opcode-LOAD_ASSERTION_ERROR"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">LOAD_ASSERTION_ERROR</span></code></a> a été ajouté pour gérer l'instruction <a class="reference internal" href="../reference/simple_stmts.html#assert"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">assert</span></code></a>. Précédemment, l'instruction <code class="docutils literal notranslate"><span class="pre">assert</span></code> ne fonctionnait pas correctement si l'exception <a class="reference internal" href="../library/exceptions.html#AssertionError" title="AssertionError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AssertionError</span></code></a> était masquée (contribution de <em>Zackery Spytz</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34880">bpo-34880</a>).</p></li>
<li><p>Le code d'opération <a class="reference internal" href="../library/dis.html#opcode-COMPARE_OP"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">COMPARE_OP</span></code></a> a été séparé en quatre instructions distinctes :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">COMPARE_OP</span></code> pour les comparaisons avancées ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IS_OP</span></code> pour les tests <em>is</em> et <em>is not</em> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONTAINS_OP</span></code> pour les tests <em>in</em> et <em>not in</em> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">JUMP_IF_NOT_EXC_MATCH</span></code> pour vérifier les exceptions dans les instructions <code class="docutils literal notranslate"><span class="pre">try-except</span></code>.</p></li>
</ul>
<p>(contribution de <em>Mark Shannon</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39156">bpo-39156</a>).</p>
</li>
</ul>
</section>
</section>
<section id="build-changes">
<h2>Changements à la compilation<a class="headerlink" href="#build-changes" title="Lien permanent vers ce titre">¶</a></h2>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">--with-platlibdir</span></code> option to the <code class="docutils literal notranslate"><span class="pre">configure</span></code> script: name of the
platform-specific library directory, stored in the new <a class="reference internal" href="../library/sys.html#sys.platlibdir" title="sys.platlibdir"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.platlibdir</span></code></a>
attribute. See <a class="reference internal" href="../library/sys.html#sys.platlibdir" title="sys.platlibdir"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.platlibdir</span></code></a> attribute for more information.
(Contributed by Jan Matějek, Matěj Cepl, Charalampos Stratakis
and Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1294959">bpo-1294959</a>.)</p></li>
<li><p>La macro spéciale de compilation <code class="docutils literal notranslate"><span class="pre">COUNT_ALLOCS</span></code> a été retirée (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39489">bpo-39489</a>).</p></li>
<li><p>Sur les plateformes non-Windows, les fonctions <code class="xref c c-func docutils literal notranslate"><span class="pre">setenv()</span></code> et <code class="xref c c-func docutils literal notranslate"><span class="pre">unsetenv()</span></code> sont maintenant nécessaires à la compilation de Python (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39395">bpo-39395</a>).</p></li>
<li><p>Sur les plateformes non-Windows, la création d'installateurs <code class="docutils literal notranslate"><span class="pre">bdist_wininst</span></code> n'est maintenant officiellement plus pris en charge. (Voir <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=10945">bpo-10945</a> pour plus de détails.)</p></li>
<li><p>When building Python on macOS from source, <code class="docutils literal notranslate"><span class="pre">_tkinter</span></code> now links with
non-system Tcl and Tk frameworks if they are installed in
<code class="docutils literal notranslate"><span class="pre">/Library/Frameworks</span></code>, as had been the case on older releases
of macOS. If a macOS SDK is explicitly configured, by using
<a class="reference internal" href="../using/configure.html#cmdoption-0"><code class="xref std std-option docutils literal notranslate"><span class="pre">--enable-universalsdk</span></code></a> or <code class="docutils literal notranslate"><span class="pre">-isysroot</span></code>, only the SDK itself is
searched. The default behavior can still be overridden with
<code class="docutils literal notranslate"><span class="pre">--with-tcltk-includes</span></code> and <code class="docutils literal notranslate"><span class="pre">--with-tcltk-libs</span></code>.
(Contributed by Ned Deily in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34956">bpo-34956</a>.)</p></li>
<li><p>Python peut maintenant être compilé pour <em>Windows 10 ARM64</em> (contribution de <em>Steve Dower</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33125">bpo-33125</a>).</p></li>
<li><p>Certains tests individuels sont maintenant ignorés lorsque <code class="docutils literal notranslate"><span class="pre">--pgo</span></code> est utilisé. Les tests en question augmentaient la durée de la tâche <em>PGO</em> de manière significative et n'optimisaient probablement pas l'exécutable final. Cela accélère la tâche par un facteur d'environ 15 fois. Le fait de lancer la suite de tests est lent. Ce changement va peut être avoir pour conséquence des exécutables compilés un peu moins optimisés car moins de branches de code seront exécutées. Si vous souhaitez attendre avec une compilation plus lente, l'ancienne manière de fonctionner peut être obtenue avec <code class="docutils literal notranslate"><span class="pre">./configure</span> <span class="pre">[..]</span> <span class="pre">PROFILE_TASK=&quot;-m</span> <span class="pre">test</span> <span class="pre">--pgo-extended&quot;</span></code>. Nous ne garantissons pas quel set de tâches PGO produira une compilation plus rapide. Les utilisateurs qui s'y intéressent devraient exécuter leurs propres <em>benchmarks</em>, car les résultats peuvent dépendre de l'environnement, de la charge de travail et de la chaîne d'outils du compilateur. (Voir <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36044">bpo-36044</a> et <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37707">bpo-37707</a> pour plus de détails.)</p></li>
</ul>
</section>
<section id="c-api-changes">
<h2>Changements à l'API C<a class="headerlink" href="#c-api-changes" title="Lien permanent vers ce titre">¶</a></h2>
<section id="id1">
<h3>Nouvelles fonctionnalités<a class="headerlink" href="#id1" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><p><span class="target" id="index-23"></span><a class="pep reference external" href="https://peps.python.org/pep-0573/"><strong>PEP 573</strong></a>: Added <a class="reference internal" href="../c-api/type.html#c.PyType_FromModuleAndSpec" title="PyType_FromModuleAndSpec"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_FromModuleAndSpec()</span></code></a> to associate
a module with a class; <a class="reference internal" href="../c-api/type.html#c.PyType_GetModule" title="PyType_GetModule"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_GetModule()</span></code></a> and
<a class="reference internal" href="../c-api/type.html#c.PyType_GetModuleState" title="PyType_GetModuleState"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_GetModuleState()</span></code></a> to retrieve the module and its state; and
<a class="reference internal" href="../c-api/structures.html#c.PyCMethod" title="PyCMethod"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyCMethod</span></code></a> and <a class="reference internal" href="../c-api/structures.html#c.METH_METHOD" title="METH_METHOD"><code class="xref c c-macro docutils literal notranslate"><span class="pre">METH_METHOD</span></code></a> to allow a method to
access the class it was defined in.
(Contributed by Marcel Plch and Petr Viktorin in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38787">bpo-38787</a>.)</p></li>
<li><p>Ajout de la fonction <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetCode" title="PyFrame_GetCode"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetCode()</span></code></a> : récupérer le code d'un cadre. Ajout de la fonction <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetBack" title="PyFrame_GetBack"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetBack()</span></code></a> : récupérer le prochain cadre englobant (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40421">bpo-40421</a>).</p></li>
<li><p>Ajout de <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetLineNumber" title="PyFrame_GetLineNumber"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetLineNumber()</span></code></a> à l'API C limité (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40421">bpo-40421</a>).</p></li>
<li><p>Ajout des fonctions <a class="reference internal" href="../c-api/init.html#c.PyThreadState_GetInterpreter" title="PyThreadState_GetInterpreter"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyThreadState_GetInterpreter()</span></code></a> et <a class="reference internal" href="../c-api/init.html#c.PyInterpreterState_Get" title="PyInterpreterState_Get"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyInterpreterState_Get()</span></code></a> pour récupérer l'interpréteur. Ajout de la fonction <a class="reference internal" href="../c-api/init.html#c.PyThreadState_GetFrame" title="PyThreadState_GetFrame"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyThreadState_GetFrame()</span></code></a> pour récupérer le cadre de l'état d'un fil d'exécution Python. Ajout de la fonction <a class="reference internal" href="../c-api/init.html#c.PyThreadState_GetID" title="PyThreadState_GetID"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyThreadState_GetID()</span></code></a> : récupérer l'identifiant unique de l'état d'un fil d'exécution Python (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39947">bpo-39947</a>).</p></li>
<li><p>Ajout de la nouvelle fonction publique <a class="reference internal" href="../c-api/call.html#c.PyObject_CallNoArgs" title="PyObject_CallNoArgs"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_CallNoArgs()</span></code></a> à l'API C, qui appelle un objet Python appelable sans aucun argument. C'est la façon la plus efficace d'appeler un objet Python appelable sans aucun argument (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37194">bpo-37194</a>).</p></li>
<li><p>Changements dans l'API C limité (si la macro <code class="docutils literal notranslate"><span class="pre">Py_LIMITED_API</span></code> est définie) :</p>
<ul class="simple">
<li><p>Fournit <a class="reference internal" href="../c-api/exceptions.html#c.Py_EnterRecursiveCall" title="Py_EnterRecursiveCall"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_EnterRecursiveCall()</span></code></a> et <a class="reference internal" href="../c-api/exceptions.html#c.Py_LeaveRecursiveCall" title="Py_LeaveRecursiveCall"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_LeaveRecursiveCall()</span></code></a> comme fonctions régulières pour l'API limité. Précédemment, elles étaient définies en tant que macros, mais ces macros n'étaient pas compilées avec l'API C limité qui ne peut pas accéder au champ <code class="docutils literal notranslate"><span class="pre">PyThreadState.recursion_depth</span></code> (la structure est opaque à l'API C limité) ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyObject_INIT()</span></code> et <code class="docutils literal notranslate"><span class="pre">PyObject_INIT_VAR()</span></code> deviennent des fonctions &quot;opaques&quot; régulières pour cacher les détails d'implémentation</p></li>
</ul>
<p>(contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38644">bpo-38644</a> et <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39542">bpo-39542</a>).</p>
</li>
<li><p>The <a class="reference internal" href="../c-api/module.html#c.PyModule_AddType" title="PyModule_AddType"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyModule_AddType()</span></code></a> function is added to help adding a type
to a module.
(Contributed by Donghee Na in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40024">bpo-40024</a>.)</p></li>
<li><p>Ajout des fonctions <a class="reference internal" href="../c-api/gcsupport.html#c.PyObject_GC_IsTracked" title="PyObject_GC_IsTracked"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_GC_IsTracked()</span></code></a> et <a class="reference internal" href="../c-api/gcsupport.html#c.PyObject_GC_IsFinalized" title="PyObject_GC_IsFinalized"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_GC_IsFinalized()</span></code></a> à l'API publique qui déterminent respectivement si les objets Python sont présentement suivis ou ont été finalisés par le ramasse-miettes (contribution de <em>Pablo Galindo Salgado</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40241">bpo-40241</a>).</p></li>
<li><p>Ajout de <code class="xref c c-func docutils literal notranslate"><span class="pre">_PyObject_FunctionStr()</span></code> pour récupérer une chaîne conviviale représentant un objet fonction-compatible. (Rustine par <em>Jeroen Demeyer</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37645">bpo-37645</a>.)</p></li>
<li><p>Ajout de <a class="reference internal" href="../c-api/call.html#c.PyObject_CallOneArg" title="PyObject_CallOneArg"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_CallOneArg()</span></code></a> pour appeler un objet avec un argument positionnel. (Rustine par <em>Jeroen Demeyer</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37483">bpo-37483</a>.)</p></li>
</ul>
</section>
<section id="id2">
<h3>Portage vers Python 3.9<a class="headerlink" href="#id2" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">PyInterpreterState.eval_frame</span></code> (<span class="target" id="index-75"></span><a class="pep reference external" href="https://peps.python.org/pep-0523/"><strong>PEP 523</strong></a>) nécessite maintenant un nouveau paramètre obligatoire <em>tstate</em> (<code class="docutils literal notranslate"><span class="pre">PyThreadState*</span></code>) (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38500">bpo-38500</a>).</p></li>
<li><p>Modules d'extension : les fonctions <a class="reference internal" href="../c-api/module.html#c.PyModuleDef.m_traverse" title="PyModuleDef.m_traverse"><code class="xref c c-member docutils literal notranslate"><span class="pre">m_traverse</span></code></a>, <a class="reference internal" href="../c-api/module.html#c.PyModuleDef.m_clear" title="PyModuleDef.m_clear"><code class="xref c c-member docutils literal notranslate"><span class="pre">m_clear</span></code></a> et <a class="reference internal" href="../c-api/module.html#c.PyModuleDef.m_free" title="PyModuleDef.m_free"><code class="xref c c-member docutils literal notranslate"><span class="pre">m_free</span></code></a> de <a class="reference internal" href="../c-api/module.html#c.PyModuleDef" title="PyModuleDef"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyModuleDef</span></code></a> ne sont plus appelées si l'état du module est demandé mais qu'il n'a pas encore été alloué. C'est le cas immédiatement après que le module a été créé et avant que le module soit exécuté (fonction <a class="reference internal" href="../c-api/module.html#c.Py_mod_exec" title="Py_mod_exec"><code class="xref c c-data docutils literal notranslate"><span class="pre">Py_mod_exec</span></code></a>). Plus précisément, ces fonctions ne sont pas appelées si <a class="reference internal" href="../c-api/module.html#c.PyModuleDef.m_size" title="PyModuleDef.m_size"><code class="xref c c-member docutils literal notranslate"><span class="pre">m_size</span></code></a> est plus grand que 0 et que l'état du module (tel que renvoyé par <a class="reference internal" href="../c-api/module.html#c.PyModule_GetState" title="PyModule_GetState"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyModule_GetState()</span></code></a>) est <code class="docutils literal notranslate"><span class="pre">NULL</span></code>.</p>
<p>Les modules d'extensions sans état de module (<code class="docutils literal notranslate"><span class="pre">m_size</span> <span class="pre">&lt;=</span> <span class="pre">0</span></code>) ne sont pas affectés.</p>
</li>
<li><p>Si <a class="reference internal" href="../c-api/init.html#c.Py_AddPendingCall" title="Py_AddPendingCall"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_AddPendingCall()</span></code></a> est appelée dans un sous-interpréteur, la fonction est planifiée pour appel dans le sous-interpréteur, plutôt que dans l'interpréteur principal. Chaque sous interpréteur a maintenant sa propre liste d'appels planifiés (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39984">bpo-39984</a>).</p></li>
<li><p>Le registre de Windows n'est plus utilisé pour initialiser <a class="reference internal" href="../library/sys.html#sys.path" title="sys.path"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a> quand l'option <code class="docutils literal notranslate"><span class="pre">-E</span></code> est utilisée (si <a class="reference internal" href="../c-api/init_config.html#c.PyConfig.use_environment" title="PyConfig.use_environment"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyConfig.use_environment</span></code></a> est affecté à <code class="docutils literal notranslate"><span class="pre">0</span></code>). Ceci est pertinent quand Python est embarqué sur Windows (contribution de <em>Zackery Spytz</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8901">bpo-8901</a>).</p></li>
<li><p>La variable globale <a class="reference internal" href="../c-api/tuple.html#c.PyStructSequence_UnnamedField" title="PyStructSequence_UnnamedField"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyStructSequence_UnnamedField</span></code></a> est maintenant une constante et fait référence à une chaîne constante (contribution de <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38650">bpo-38650</a>).</p></li>
<li><p>La structure <code class="xref c c-type docutils literal notranslate"><span class="pre">PyGC_Head</span></code> est maintenant opaque. Elle est définie uniquement dans l'API C interne (<code class="docutils literal notranslate"><span class="pre">pycore_gc.h</span></code>) (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40241">bpo-40241</a>).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Py_UNICODE_COPY</span></code>, <code class="docutils literal notranslate"><span class="pre">Py_UNICODE_FILL</span></code>, <code class="docutils literal notranslate"><span class="pre">PyUnicode_WSTR_LENGTH</span></code>,
<code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_FromUnicode()</span></code>, <code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_AsUnicode()</span></code>,
<code class="docutils literal notranslate"><span class="pre">_PyUnicode_AsUnicode</span></code>, and <code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_AsUnicodeAndSize()</span></code> are
marked as deprecated in C.  They have been deprecated by <span class="target" id="index-25"></span><a class="pep reference external" href="https://peps.python.org/pep-0393/"><strong>PEP 393</strong></a> since
Python 3.3.
(Contributed by Inada Naoki in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36346">bpo-36346</a>.)</p></li>
<li><p>La fonction <a class="reference internal" href="../c-api/sys.html#c.Py_FatalError" title="Py_FatalError"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_FatalError()</span></code></a> est remplacée par une macro qui ajoute automatiquement une entrée au journal avec le nom de la fonction courante, sauf si la macro <code class="docutils literal notranslate"><span class="pre">Py_LIMITED_API</span></code> est définie (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39882">bpo-39882</a>).</p></li>
<li><p>Le protocole <em>vectorcall</em> requiert maintenant que l'appelant ne passe que des chaînes pour les noms des arguments nommés. (Voir <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37540">bpo-37540</a> pour plus d'informations.)</p></li>
<li><p>Les détails d'implémentation de certaines macros et fonctions sont maintenant cachés :</p>
<ul class="simple">
<li><p>la macro <a class="reference internal" href="../c-api/gcsupport.html#c.PyObject_IS_GC" title="PyObject_IS_GC"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_IS_GC()</span></code></a> a été convertie en fonction ;</p></li>
<li><p>The <code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_NEW()</span></code> macro becomes an alias to the
<a class="reference internal" href="../c-api/allocation.html#c.PyObject_New" title="PyObject_New"><code class="xref c c-macro docutils literal notranslate"><span class="pre">PyObject_New</span></code></a> macro, and the <code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_NEW_VAR()</span></code> macro
becomes an alias to the <a class="reference internal" href="../c-api/allocation.html#c.PyObject_NewVar" title="PyObject_NewVar"><code class="xref c c-macro docutils literal notranslate"><span class="pre">PyObject_NewVar</span></code></a> macro. They no longer
access directly the <a class="reference internal" href="../c-api/typeobj.html#c.PyTypeObject.tp_basicsize" title="PyTypeObject.tp_basicsize"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyTypeObject.tp_basicsize</span></code></a> member.</p></li>
<li><p>La macro <code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_GET_WEAKREFS_LISTPTR()</span></code> a été convertie en fonction : la macro accédait directement au membre <a class="reference internal" href="../c-api/typeobj.html#c.PyTypeObject.tp_weaklistoffset" title="PyTypeObject.tp_weaklistoffset"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyTypeObject.tp_weaklistoffset</span></code></a> ;</p></li>
<li><p>La macro <a class="reference internal" href="../c-api/buffer.html#c.PyObject_CheckBuffer" title="PyObject_CheckBuffer"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_CheckBuffer()</span></code></a> a été convertie en fonction : la macro accédait directement au membre <a class="reference internal" href="../c-api/typeobj.html#c.PyTypeObject.tp_as_buffer" title="PyTypeObject.tp_as_buffer"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyTypeObject.tp_as_buffer</span></code></a> ;</p></li>
<li><p><a class="reference internal" href="../c-api/number.html#c.PyIndex_Check" title="PyIndex_Check"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyIndex_Check()</span></code></a> est maintenant toujours déclarée comme une fonction opaque pour cacher ses détails d'implémentation : retrait de la macro <code class="docutils literal notranslate"><span class="pre">PyIndex_Check()</span></code>. La macro accédait directement au membre <a class="reference internal" href="../c-api/typeobj.html#c.PyTypeObject.tp_as_number" title="PyTypeObject.tp_as_number"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyTypeObject.tp_as_number</span></code></a>.</p></li>
</ul>
<p>(Voir <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40170">bpo-40170</a> pour plus de détails.)</p>
</li>
</ul>
</section>
<section id="id3">
<h3>Retraits<a class="headerlink" href="#id3" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><p>Exclusion des macros <code class="docutils literal notranslate"><span class="pre">PyFPE_START_PROTECT()</span></code> et <code class="docutils literal notranslate"><span class="pre">PyFPE_END_PROTECT()</span></code> de l'API C limité (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38835">bpo-38835</a>).</p></li>
<li><p>Le champ <code class="docutils literal notranslate"><span class="pre">tp_print</span></code> de <a class="reference internal" href="../c-api/typeobj.html#type-structs"><span class="std std-ref">PyTypeObject</span></a> a été retiré. Il était utilisé pour écrire des objets dans des fichiers dans Python 2.7 et dans les versions précédentes. Depuis Python 3.0, il était ignoré et inutilisé (contribution de <em>Jeroen Demeyer</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36974">bpo-36974</a>).</p></li>
<li><p>Changements dans l'API C limité (si la macro <code class="docutils literal notranslate"><span class="pre">Py_LIMITED_API</span></code> est définie) :</p>
<ul class="simple">
<li><p>Exclusion des fonctions suivantes de l'API C limité :</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">PyThreadState_DeleteCurrent()</span></code> (contribution de <em>Joannah Nanjekye</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37878">bpo-37878</a>) ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_CheckRecursionLimit</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_NewReference()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_ForgetReference()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_PyTraceMalloc_NewReference()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_GetRefTotal()</span></code> ;</p></li>
<li><p>Le mécanisme <em>trashcan</em> qui n'a jamais fonctionné dans l'API C limité ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyTrash_UNWIND_LEVEL</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_BEGIN_CONDITION</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_BEGIN</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_END</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_SAFE_BEGIN</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_SAFE_END</span></code>.</p></li>
</ul>
</li>
<li><p>Migration des fonctions et définitions suivantes vers l'API C interne :</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">_PyDebug_PrintTotalRefs()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_PrintReferences()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_PrintReferenceAddresses()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_tracemalloc_config</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_AddToAllObjects()</span></code> (spécifique aux compilations <code class="docutils literal notranslate"><span class="pre">Py_TRACE_REFS</span></code>).</p></li>
</ul>
</li>
</ul>
<p>(contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38644">bpo-38644</a> et <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39542">bpo-39542</a>).</p>
</li>
<li><p>Retrait de la fonction de rappel <code class="docutils literal notranslate"><span class="pre">_PyRuntime.getframe</span></code> et de la macro <code class="docutils literal notranslate"><span class="pre">_PyThreadState_GetFrame</span></code> qui était un alias pour <code class="docutils literal notranslate"><span class="pre">_PyRuntime.getframe</span></code>. Elles étaient exposées uniquement dans l'API C interne. Retrait aussi du type <code class="docutils literal notranslate"><span class="pre">PyThreadFrameGetter</span></code> (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39946">bpo-39946</a>).</p></li>
<li><p>Retrait des fonctions suivantes de l'API C. Appelez <a class="reference internal" href="../c-api/gcsupport.html#c.PyGC_Collect" title="PyGC_Collect"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyGC_Collect()</span></code></a> explicitement pour vider toutes les <em>free lists</em> (contribution de <em>Inada Naoki</em> et <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37340">bpo-37340</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38896">bpo-38896</a> et <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40428">bpo-40428</a>) :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PyAsyncGen_ClearFreeLists()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyContext_ClearFreeList()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyDict_ClearFreeList()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyFloat_ClearFreeList()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyFrame_ClearFreeList()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyList_ClearFreeList()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyMethod_ClearFreeList()</span></code> et <code class="docutils literal notranslate"><span class="pre">PyCFunction_ClearFreeList()</span></code> : les <em>free lists</em> des objets méthode liées ont été retirées ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PySet_ClearFreeList()</span></code> : la <em>free list</em> des objets <em>sets</em> a été retirée dans Python 3.4 ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyTuple_ClearFreeList()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyUnicode_ClearFreeList()</span></code> : la <em>free list</em> des objets Unicode a été retirée dans Python 3.3.</p></li>
</ul>
</li>
<li><p>Retrait de la fonction <code class="docutils literal notranslate"><span class="pre">_PyUnicode_ClearStaticStrings()</span></code> (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39465">bpo-39465</a>).</p></li>
<li><p>Retrait de <code class="docutils literal notranslate"><span class="pre">Py_UNICODE_MATCH</span></code>. Elle était devenue obsolète par <span class="target" id="index-76"></span><a class="pep reference external" href="https://peps.python.org/pep-0393/"><strong>PEP 393</strong></a>, non-fonctionnelle depuis Python 3.3. La fonction <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_Tailmatch" title="PyUnicode_Tailmatch"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_Tailmatch()</span></code></a> peut être utilisée à sa place (contribution de <em>Inada Naoki</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36346">bpo-36346</a>).</p></li>
<li><p>Nettoyage dans les fichiers d'en-têtes d'interfaces déclarées pour lesquelles il n'y avait pas d'implémentation. Les symboles retirés de l'API publique sont : <code class="docutils literal notranslate"><span class="pre">_PyBytes_InsertThousandsGroupingLocale</span></code>, <code class="docutils literal notranslate"><span class="pre">_PyBytes_InsertThousandsGrouping</span></code>, <code class="docutils literal notranslate"><span class="pre">_Py_InitializeFromArgs</span></code>, <code class="docutils literal notranslate"><span class="pre">_Py_InitializeFromWideArgs</span></code>, <code class="docutils literal notranslate"><span class="pre">_PyFloat_Repr</span></code>, <code class="docutils literal notranslate"><span class="pre">_PyFloat_Digits</span></code>, <code class="docutils literal notranslate"><span class="pre">_PyFloat_DigitsInit</span></code>, <code class="docutils literal notranslate"><span class="pre">PyFrame_ExtendStack</span></code>, <code class="docutils literal notranslate"><span class="pre">_PyAIterWrapper_Type</span></code>, <code class="docutils literal notranslate"><span class="pre">PyNullImporter_Type</span></code>, <code class="docutils literal notranslate"><span class="pre">PyCmpWrapper_Type</span></code>, <code class="docutils literal notranslate"><span class="pre">PySortWrapper_Type</span></code>, <code class="docutils literal notranslate"><span class="pre">PyNoArgsFunction</span></code> (contribution de <em>Pablo Galindo Salgado</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39372">bpo-39372</a>).</p></li>
</ul>
</section>
</section>
<section id="notable-changes-in-python-3-9-1">
<h2>Changements importants dans Python 3.9.1<a class="headerlink" href="#notable-changes-in-python-3-9-1" title="Lien permanent vers ce titre">¶</a></h2>
<section id="id4">
<h3><em>typing</em><a class="headerlink" href="#id4" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le comportement de <a class="reference internal" href="../library/typing.html#typing.Literal" title="typing.Literal"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Literal</span></code></a> a été changé pour être conforme avec <span class="target" id="index-77"></span><a class="pep reference external" href="https://peps.python.org/pep-0586/"><strong>PEP 586</strong></a> et pour avoir le comportement des vérificateurs de types statique spécifiés dans le PEP :</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">Literal</span></code> de-duplique maintenant les paramètres ;</p></li>
<li><p>Les comparaisons d'égalité entre les objets <code class="docutils literal notranslate"><span class="pre">Literal</span></code> sont maintenant indépendantes de l'ordre ;</p></li>
<li><p>Les comparaisons des <code class="docutils literal notranslate"><span class="pre">Literal</span></code> respectent maintenant les types. Par exemple, <code class="docutils literal notranslate"><span class="pre">Literal[0]</span> <span class="pre">==</span> <span class="pre">Literal[False]</span></code> évaluait précédemment à <code class="docutils literal notranslate"><span class="pre">True</span></code>. C'est maintenant <code class="docutils literal notranslate"><span class="pre">False</span></code>. Pour gérer ce changement, le cache interne des types utilisés peut maintenant différentier les types ;</p></li>
<li><p>Les objets <code class="docutils literal notranslate"><span class="pre">Literal</span></code> lèvent maintenant une exception <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> lors des comparaisons d'égalités si n'importe quel de leurs paramètres n'est pas <a class="reference internal" href="../glossary.html#term-immutable"><span class="xref std std-term">immuable</span></a>. Prenez-note que déclarer un <code class="docutils literal notranslate"><span class="pre">Literal</span></code> avec un paramètre muable ne lève pas une erreur :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Literal</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Literal</span><span class="p">[{</span><span class="mi">0</span><span class="p">}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Literal</span><span class="p">[{</span><span class="mi">0</span><span class="p">}]</span> <span class="o">==</span> <span class="n">Literal</span><span class="p">[{</span><span class="kc">False</span><span class="p">}]</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">TypeError</span>: <span class="n">unhashable type: &#39;set&#39;</span>
</pre></div>
</div>
</li>
</ol>
<p>(Contribution de <em>Yurii Karabas</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42345">bpo-42345</a>.)</p>
</section>
<section id="macos-11-0-big-sur-and-apple-silicon-mac-support">
<h3>Prise en charge de <em>macOS</em> 11.0 (Big Sur) et de Mac sur processeur Apple<a class="headerlink" href="#macos-11-0-big-sur-and-apple-silicon-mac-support" title="Lien permanent vers ce titre">¶</a></h3>
<p>Depuis la version 3.9.1, Python est maintenant totalement compatible (compilation et lancement) sur macOS 11.0 (<em>Big Sur</em>) et sur les Macs Apple Silicon (basés sur l'architecture <code class="docutils literal notranslate"><span class="pre">ARM64</span></code>). Un nouveau variant de <em>build</em>, <code class="docutils literal notranslate"><span class="pre">universal2</span></code>, est maintenant disponible et supporte nativement les plateformes <code class="docutils literal notranslate"><span class="pre">ARM64</span></code> et <code class="docutils literal notranslate"><span class="pre">Intel</span> <span class="pre">64</span></code> en un seul jeu d'exécutables. Les binaires peuvent aussi être compilés sur les versions actuelles de macOS pour ensuite être déployés sur des versions antérieures (testé jusqu'à 10.9), tout en rendant de nouvelles fonctionnalités du système d'exploitation disponibles en fonction de la version du système utilisée à l'exécution (&quot;<em>weaklinking</em>&quot;).</p>
<p>(contribution de <em>Ronald Oussoren</em> et <em>Lawrence D'Anna</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41100">bpo-41100</a>).</p>
</section>
</section>
<section id="notable-changes-in-python-3-9-2">
<h2>Changements importants dans Python 3.9.2<a class="headerlink" href="#notable-changes-in-python-3-9-2" title="Lien permanent vers ce titre">¶</a></h2>
<section id="collections-abc">
<h3><em>collections.abc</em><a class="headerlink" href="#collections-abc" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference internal" href="../library/collections.abc.html#collections.abc.Callable" title="collections.abc.Callable"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Callable</span></code></a> generic now flattens type parameters, similar
to what <a class="reference internal" href="../library/typing.html#typing.Callable" title="typing.Callable"><code class="xref py py-data docutils literal notranslate"><span class="pre">typing.Callable</span></code></a> currently does.  This means that
<code class="docutils literal notranslate"><span class="pre">collections.abc.Callable[[int,</span> <span class="pre">str],</span> <span class="pre">str]</span></code> will have <code class="docutils literal notranslate"><span class="pre">__args__</span></code> of
<code class="docutils literal notranslate"><span class="pre">(int,</span> <span class="pre">str,</span> <span class="pre">str)</span></code>; previously this was <code class="docutils literal notranslate"><span class="pre">([int,</span> <span class="pre">str],</span> <span class="pre">str)</span></code>.  To allow this
change, <a class="reference internal" href="../library/types.html#types.GenericAlias" title="types.GenericAlias"><code class="xref py py-class docutils literal notranslate"><span class="pre">types.GenericAlias</span></code></a> can now be subclassed, and a subclass will
be returned when subscripting the <a class="reference internal" href="../library/collections.abc.html#collections.abc.Callable" title="collections.abc.Callable"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Callable</span></code></a> type.
Code which accesses the arguments via <a class="reference internal" href="../library/typing.html#typing.get_args" title="typing.get_args"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.get_args()</span></code></a> or <code class="docutils literal notranslate"><span class="pre">__args__</span></code>
need to account for this change.  A <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> may be emitted for
invalid forms of parameterizing <a class="reference internal" href="../library/collections.abc.html#collections.abc.Callable" title="collections.abc.Callable"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Callable</span></code></a> which may have
passed silently in Python 3.9.1.  This <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> will
become a <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> in Python 3.10.
(Contributed by Ken Jin in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42195">bpo-42195</a>.)</p>
</section>
<section id="urllib-parse">
<h3><em>urllib.parse</em><a class="headerlink" href="#urllib-parse" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les versions précédentes de Python acceptaient à la fois <code class="docutils literal notranslate"><span class="pre">;</span></code> et <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> comme séparateurs des paramètres de requête dans <a class="reference internal" href="../library/urllib.parse.html#urllib.parse.parse_qs" title="urllib.parse.parse_qs"><code class="xref py py-func docutils literal notranslate"><span class="pre">urllib.parse.parse_qs()</span></code></a> et <a class="reference internal" href="../library/urllib.parse.html#urllib.parse.parse_qsl" title="urllib.parse.parse_qsl"><code class="xref py py-func docutils literal notranslate"><span class="pre">urllib.parse.parse_qsl()</span></code></a>. Pour des raisons de sécurité, et pour être conforme aux nouvelles recommandations du W3C, ceci a été changé pour ne permettre qu'une seule clé de séparation, avec <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> par défaut. Ce changement affecte aussi <a class="reference internal" href="../library/cgi.html#cgi.parse" title="cgi.parse"><code class="xref py py-func docutils literal notranslate"><span class="pre">cgi.parse()</span></code></a> et <a class="reference internal" href="../library/cgi.html#cgi.parse_multipart" title="cgi.parse_multipart"><code class="xref py py-func docutils literal notranslate"><span class="pre">cgi.parse_multipart()</span></code></a> puisqu'elles utilisent les fonctions affectées à l'interne. Pour plus de détails, voir leur documentation respective (contribution de <em>Adam Goldschmidt</em>, <em>Senthil Kumaran</em> et <em>Ken Jin</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42967">bpo-42967</a>).</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../contents.html">Table des matières</a></h3>
    <ul>
<li><a class="reference internal" href="#">Les nouveautés de Python 3.9</a><ul>
<li><a class="reference internal" href="#summary-release-highlights">Résumé – Points marquants de cette version</a></li>
<li><a class="reference internal" href="#you-should-check-for-deprecationwarning-in-your-code">Vous devez vérifier la présence de <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> dans votre code</a></li>
<li><a class="reference internal" href="#new-features">Nouvelles fonctionnalités</a><ul>
<li><a class="reference internal" href="#dictionary-merge-update-operators">Opérateurs de fusion et de mise à jour de dictionnaires</a></li>
<li><a class="reference internal" href="#new-string-methods-to-remove-prefixes-and-suffixes">Nouvelles méthodes sur les chaînes pour retirer des préfixes et des suffixes</a></li>
<li><a class="reference internal" href="#type-hinting-generics-in-standard-collections">Indication des types paramétrables dans les collections natives</a></li>
<li><a class="reference internal" href="#new-parser">Nouvel analyseur syntaxique</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-language-changes">Autres changements au langage</a></li>
<li><a class="reference internal" href="#new-modules">Nouveaux modules</a><ul>
<li><a class="reference internal" href="#zoneinfo"><em>zoneinfo</em></a></li>
<li><a class="reference internal" href="#graphlib"><em>graphlib</em></a></li>
</ul>
</li>
<li><a class="reference internal" href="#improved-modules">Modules améliorés</a><ul>
<li><a class="reference internal" href="#ast"><em>ast</em></a></li>
<li><a class="reference internal" href="#asyncio"><em>asyncio</em></a></li>
<li><a class="reference internal" href="#compileall"><em>compileall</em></a></li>
<li><a class="reference internal" href="#concurrent-futures"><em>concurrent.futures</em></a></li>
<li><a class="reference internal" href="#curses"><em>curses</em></a></li>
<li><a class="reference internal" href="#datetime"><em>datetime</em></a></li>
<li><a class="reference internal" href="#distutils"><em>distutils</em></a></li>
<li><a class="reference internal" href="#fcntl"><em>fcntl</em></a></li>
<li><a class="reference internal" href="#ftplib"><em>ftplib</em></a></li>
<li><a class="reference internal" href="#gc"><em>gc</em></a></li>
<li><a class="reference internal" href="#hashlib"><em>hashlib</em></a></li>
<li><a class="reference internal" href="#http"><em>http</em></a></li>
<li><a class="reference internal" href="#idle-and-idlelib"><em>IDLE</em> et <em>idlelib</em></a></li>
<li><a class="reference internal" href="#imaplib"><em>imaplib</em></a></li>
<li><a class="reference internal" href="#importlib"><em>importlib</em></a></li>
<li><a class="reference internal" href="#inspect"><em>inspect</em></a></li>
<li><a class="reference internal" href="#ipaddress"><em>ipaddress</em></a></li>
<li><a class="reference internal" href="#math"><em>math</em></a></li>
<li><a class="reference internal" href="#multiprocessing"><em>multiprocessing</em></a></li>
<li><a class="reference internal" href="#nntplib"><em>nntplib</em></a></li>
<li><a class="reference internal" href="#os"><em>os</em></a></li>
<li><a class="reference internal" href="#pathlib"><em>pathlib</em></a></li>
<li><a class="reference internal" href="#pdb"><em>pdb</em></a></li>
<li><a class="reference internal" href="#poplib"><em>poplib</em></a></li>
<li><a class="reference internal" href="#pprint"><em>pprint</em></a></li>
<li><a class="reference internal" href="#pydoc"><em>pydoc</em></a></li>
<li><a class="reference internal" href="#random"><em>random</em></a></li>
<li><a class="reference internal" href="#signal"><em>signal</em></a></li>
<li><a class="reference internal" href="#smtplib"><em>smtplib</em></a></li>
<li><a class="reference internal" href="#socket"><em>socket</em></a></li>
<li><a class="reference internal" href="#time"><em>time</em></a></li>
<li><a class="reference internal" href="#sys"><em>sys</em></a></li>
<li><a class="reference internal" href="#tracemalloc"><em>tracemalloc</em></a></li>
<li><a class="reference internal" href="#typing"><em>typing</em></a></li>
<li><a class="reference internal" href="#unicodedata"><em>unicodedata</em></a></li>
<li><a class="reference internal" href="#venv"><em>venv</em></a></li>
<li><a class="reference internal" href="#xml"><em>xml</em></a></li>
</ul>
</li>
<li><a class="reference internal" href="#optimizations">Optimisations</a></li>
<li><a class="reference internal" href="#deprecated">Obsolescence</a></li>
<li><a class="reference internal" href="#removed">Retraits</a></li>
<li><a class="reference internal" href="#porting-to-python-3-9">Portage vers Python 3.9</a><ul>
<li><a class="reference internal" href="#changes-in-the-python-api">Changements dans l'API Python</a></li>
<li><a class="reference internal" href="#changes-in-the-c-api">Changements dans l'API C</a></li>
<li><a class="reference internal" href="#cpython-bytecode-changes">Changements au code intermédiaire CPython</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-changes">Changements à la compilation</a></li>
<li><a class="reference internal" href="#c-api-changes">Changements à l'API C</a><ul>
<li><a class="reference internal" href="#id1">Nouvelles fonctionnalités</a></li>
<li><a class="reference internal" href="#id2">Portage vers Python 3.9</a></li>
<li><a class="reference internal" href="#id3">Retraits</a></li>
</ul>
</li>
<li><a class="reference internal" href="#notable-changes-in-python-3-9-1">Changements importants dans Python 3.9.1</a><ul>
<li><a class="reference internal" href="#id4"><em>typing</em></a></li>
<li><a class="reference internal" href="#macos-11-0-big-sur-and-apple-silicon-mac-support">Prise en charge de <em>macOS</em> 11.0 (Big Sur) et de Mac sur processeur Apple</a></li>
</ul>
</li>
<li><a class="reference internal" href="#notable-changes-in-python-3-9-2">Changements importants dans Python 3.9.2</a><ul>
<li><a class="reference internal" href="#collections-abc"><em>collections.abc</em></a></li>
<li><a class="reference internal" href="#urllib-parse"><em>urllib.parse</em></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Sujet précédent</h4>
    <p class="topless"><a href="3.10.html"
                          title="Chapitre précédent">Les nouveautés de Python 3.10</a></p>
  </div>
  <div>
    <h4>Sujet suivant</h4>
    <p class="topless"><a href="3.8.html"
                          title="Chapitre suivant">Nouveautés de Python 3.8</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Signalement de bogue</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/main/Doc/whatsnew/3.9.rst"
            rel="nofollow">Voir la source
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Index des modules Python"
             >modules</a> |</li>
        <li class="right" >
          <a href="3.8.html" title="Nouveautés de Python 3.8"
             >suivant</a> |</li>
        <li class="right" >
          <a href="3.10.html" title="Les nouveautés de Python 3.10"
             >précédent</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.12.0 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Nouveautés de Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Les nouveautés de Python 3.9</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Recherche rapide" aria-label="Recherche rapide" type="search" name="q" id="search-box" />
          <input type="submit" value="Go" />
        </form>
    </div>
                     |
                </li>
            <li class="right">
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label> |</li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 2001-2023, Python Software Foundation.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    See <a href="/license.html">History and License</a> for more information.<br />
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    Mis à jour le oct. 26, 2023.
    <a href="/bugs.html">Found a bug</a>?
    <br />

    Créé en utilisant <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>

  </body>
</html>