
<!DOCTYPE html>

<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta property="og:title" content="Les nouveautés de Python 3.10" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://docs.python.org/3/whatsnew/3.10.html" />
<meta property="og:site_name" content="Python documentation" />
<meta property="og:description" content="Rédacteur, Pablo Galindo Salgado,. This article explains the new features in Python 3.10, compared to 3.9. Python 3.10 was released on October 4, 2021. For full details, see the changelog. Résumé –..." />
<meta property="og:image" content="https://docs.python.org/3/_static/og-image.png" />
<meta property="og:image:alt" content="Python documentation" />
<meta name="description" content="Rédacteur, Pablo Galindo Salgado,. This article explains the new features in Python 3.10, compared to 3.9. Python 3.10 was released on October 4, 2021. For full details, see the changelog. Résumé –..." />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta name="theme-color" content="#3776ab" />

    <title>Les nouveautés de Python 3.10 &#8212; Documentation Python 3.12.0</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/pydoctheme.css?digest=b37c26da2f7529d09fe70b41c4b2133fe4931a90" />
    <link id="pygments_dark_css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css" href="../_static/pygments_dark.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Recherchez dans Documentation Python 3.12.0"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="À propos de ces documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Les nouveautés de Python 3.9" href="3.9.html" />
    <link rel="prev" title="Les nouveautés de Python 3.11" href="3.11.html" />
    <link rel="canonical" href="https://docs.python.org/3/whatsnew/3.10.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="stylesheet" href="../_static/pydoctheme_dark.css" media="(prefers-color-scheme: dark)" id="pydoctheme_dark_css">
    <link rel="shortcut icon" type="image/png" href="../_static/py.svg" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script>
            <script type="text/javascript" src="../_static/search-focus.js"></script>
            <script type="text/javascript" src="../_static/themetoggle.js"></script> 

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <nav class="nav-content" role="navigation">
        <label for="menuToggler" class="toggler__label">
            <span></span>
        </label>
        <span class="nav-items-wrapper">
            <a href="https://www.python.org/" class="nav-logo">
                <img src="../_static/py.svg" alt="Logo"/>
            </a>
            <span class="version_switcher_placeholder"></span>
            <form role="search" class="search" action="../search.html" method="get">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                    <path fill-rule="nonzero" fill="currentColor" d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                </svg>
                <input placeholder="Recherche rapide" aria-label="Recherche rapide" type="search" name="q" />
                <input type="submit" value="Go"/>
            </form>
        </span>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
            
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label>
  <div>
    <h3><a href="../contents.html">Table des matières</a></h3>
    <ul>
<li><a class="reference internal" href="#">Les nouveautés de Python 3.10</a><ul>
<li><a class="reference internal" href="#summary-release-highlights">Résumé – Points forts de la publication</a></li>
<li><a class="reference internal" href="#new-features">Nouvelles fonctionnalités</a><ul>
<li><a class="reference internal" href="#parenthesized-context-managers">Gestionnaires de contextes entre parenthèses</a></li>
<li><a class="reference internal" href="#better-error-messages">Meilleurs messages d'erreurs</a><ul>
<li><a class="reference internal" href="#syntaxerrors"><code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code></a></li>
<li><a class="reference internal" href="#indentationerrors"><code class="docutils literal notranslate"><span class="pre">IndentationError</span></code></a></li>
<li><a class="reference internal" href="#attributeerrors"><code class="docutils literal notranslate"><span class="pre">AttributeError</span></code></a></li>
<li><a class="reference internal" href="#nameerrors"><code class="docutils literal notranslate"><span class="pre">NameError</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pep-626-precise-line-numbers-for-debugging-and-other-tools">PEP 626 : numéros de lignes précis pour le débogage et les autres outils</a></li>
<li><a class="reference internal" href="#pep-634-structural-pattern-matching">PEP 634 : filtrage par motifs structurels</a><ul>
<li><a class="reference internal" href="#syntax-and-operations">Syntaxe et opérations</a></li>
<li><a class="reference internal" href="#declarative-approach">Approche déclarative</a></li>
<li><a class="reference internal" href="#simple-pattern-match-to-a-literal">Filtre simple : apparier à un littéral</a><ul>
<li><a class="reference internal" href="#behavior-without-the-wildcard">Comportement sans l'attrape-tout</a></li>
</ul>
</li>
<li><a class="reference internal" href="#patterns-with-a-literal-and-variable">Filtres avec un littéral et une variable</a></li>
<li><a class="reference internal" href="#patterns-and-classes">Filtres et classes</a><ul>
<li><a class="reference internal" href="#patterns-with-positional-parameters">Filtres avec arguments positionnels</a></li>
</ul>
</li>
<li><a class="reference internal" href="#nested-patterns">Filtres imbriqués</a></li>
<li><a class="reference internal" href="#complex-patterns-and-the-wildcard">Filtres complexes et attrape-tout</a></li>
<li><a class="reference internal" href="#guard">Garde</a></li>
<li><a class="reference internal" href="#other-key-features">Autres fonctionnalités importantes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#optional-encodingwarning-and-encoding-locale-option"><code class="docutils literal notranslate"><span class="pre">EncodingWarning</span></code> et option <code class="docutils literal notranslate"><span class="pre">encoding=&quot;locale&quot;</span></code> optionnels</a></li>
</ul>
</li>
<li><a class="reference internal" href="#new-features-related-to-type-hints">Nouvelles fonctionnalités reliées aux indications de types</a><ul>
<li><a class="reference internal" href="#pep-604-new-type-union-operator">PEP 604 : nouvel opérateur d'union de types</a></li>
<li><a class="reference internal" href="#pep-612-parameter-specification-variables">PEP 612 : variables de spécification de paramètres</a></li>
<li><a class="reference internal" href="#pep-613-typealias">PEP 613 : <code class="docutils literal notranslate"><span class="pre">TypeAlias</span></code></a></li>
<li><a class="reference internal" href="#pep-647-user-defined-type-guards">PEP 647 : gardes de type définies par l'utilisateur</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-language-changes">Autres changements au langage</a></li>
<li><a class="reference internal" href="#new-modules">Nouveaux modules</a></li>
<li><a class="reference internal" href="#improved-modules">Modules améliorés</a><ul>
<li><a class="reference internal" href="#asyncio"><code class="docutils literal notranslate"><span class="pre">asyncio</span></code></a></li>
<li><a class="reference internal" href="#argparse"><code class="docutils literal notranslate"><span class="pre">argparse</span></code></a></li>
<li><a class="reference internal" href="#array"><code class="docutils literal notranslate"><span class="pre">array</span></code></a></li>
<li><a class="reference internal" href="#asynchat-asyncore-smtpd"><code class="docutils literal notranslate"><span class="pre">asynchat</span></code>, <code class="docutils literal notranslate"><span class="pre">asyncore</span></code>, <code class="docutils literal notranslate"><span class="pre">smtpd</span></code></a></li>
<li><a class="reference internal" href="#base64"><code class="docutils literal notranslate"><span class="pre">base64</span></code></a></li>
<li><a class="reference internal" href="#bdb"><code class="docutils literal notranslate"><span class="pre">bdb</span></code></a></li>
<li><a class="reference internal" href="#bisect"><code class="docutils literal notranslate"><span class="pre">bisect</span></code></a></li>
<li><a class="reference internal" href="#codecs"><code class="docutils literal notranslate"><span class="pre">codecs</span></code></a></li>
<li><a class="reference internal" href="#collections-abc"><code class="docutils literal notranslate"><span class="pre">collections.abc</span></code></a></li>
<li><a class="reference internal" href="#contextlib"><code class="docutils literal notranslate"><span class="pre">contextlib</span></code></a></li>
<li><a class="reference internal" href="#curses"><code class="docutils literal notranslate"><span class="pre">curses</span></code></a></li>
<li><a class="reference internal" href="#dataclasses"><code class="docutils literal notranslate"><span class="pre">dataclasses</span></code></a><ul>
<li><a class="reference internal" href="#slots"><code class="docutils literal notranslate"><span class="pre">__slots__</span></code></a></li>
<li><a class="reference internal" href="#keyword-only-fields">Champs obligatoirement nommés</a></li>
</ul>
</li>
<li><a class="reference internal" href="#distutils"><code class="docutils literal notranslate"><span class="pre">distutils</span></code></a></li>
<li><a class="reference internal" href="#doctest"><code class="docutils literal notranslate"><span class="pre">doctest</span></code></a></li>
<li><a class="reference internal" href="#encodings"><code class="docutils literal notranslate"><span class="pre">encodings</span></code></a></li>
<li><a class="reference internal" href="#enum">enum</a></li>
<li><a class="reference internal" href="#fileinput"><code class="docutils literal notranslate"><span class="pre">fileinput</span></code></a></li>
<li><a class="reference internal" href="#faulthandler"><code class="docutils literal notranslate"><span class="pre">faulthandler</span></code></a></li>
<li><a class="reference internal" href="#gc"><code class="docutils literal notranslate"><span class="pre">gc</span></code></a></li>
<li><a class="reference internal" href="#glob"><code class="docutils literal notranslate"><span class="pre">glob</span></code></a></li>
<li><a class="reference internal" href="#hashlib"><code class="docutils literal notranslate"><span class="pre">hashlib</span></code></a></li>
<li><a class="reference internal" href="#hmac"><code class="docutils literal notranslate"><span class="pre">hmac</span></code></a></li>
<li><a class="reference internal" href="#idle-and-idlelib">IDLE et <code class="docutils literal notranslate"><span class="pre">idlelib</span></code></a></li>
<li><a class="reference internal" href="#importlib-metadata"><code class="docutils literal notranslate"><span class="pre">importlib.metadata</span></code></a></li>
<li><a class="reference internal" href="#inspect"><code class="docutils literal notranslate"><span class="pre">inspect</span></code></a></li>
<li><a class="reference internal" href="#itertools">itertools</a></li>
<li><a class="reference internal" href="#linecache"><code class="docutils literal notranslate"><span class="pre">linecache</span></code></a></li>
<li><a class="reference internal" href="#os"><code class="docutils literal notranslate"><span class="pre">os</span></code></a></li>
<li><a class="reference internal" href="#os-path"><code class="docutils literal notranslate"><span class="pre">os.path</span></code></a></li>
<li><a class="reference internal" href="#pathlib"><code class="docutils literal notranslate"><span class="pre">pathlib</span></code></a></li>
<li><a class="reference internal" href="#platform"><code class="docutils literal notranslate"><span class="pre">platform</span></code></a></li>
<li><a class="reference internal" href="#pprint"><code class="docutils literal notranslate"><span class="pre">pprint</span></code></a></li>
<li><a class="reference internal" href="#py-compile"><code class="docutils literal notranslate"><span class="pre">py_compile</span></code></a></li>
<li><a class="reference internal" href="#pyclbr"><code class="docutils literal notranslate"><span class="pre">pyclbr</span></code></a></li>
<li><a class="reference internal" href="#shelve"><code class="docutils literal notranslate"><span class="pre">shelve</span></code></a></li>
<li><a class="reference internal" href="#statistics"><code class="docutils literal notranslate"><span class="pre">statistics</span></code></a></li>
<li><a class="reference internal" href="#site"><code class="docutils literal notranslate"><span class="pre">site</span></code></a></li>
<li><a class="reference internal" href="#socket"><code class="docutils literal notranslate"><span class="pre">socket</span></code></a></li>
<li><a class="reference internal" href="#ssl"><code class="docutils literal notranslate"><span class="pre">ssl</span></code></a></li>
<li><a class="reference internal" href="#sqlite3"><code class="docutils literal notranslate"><span class="pre">sqlite3</span></code></a></li>
<li><a class="reference internal" href="#sys"><code class="docutils literal notranslate"><span class="pre">sys</span></code></a></li>
<li><a class="reference internal" href="#thread"><code class="docutils literal notranslate"><span class="pre">_thread</span></code></a></li>
<li><a class="reference internal" href="#threading"><code class="docutils literal notranslate"><span class="pre">threading</span></code></a></li>
<li><a class="reference internal" href="#traceback"><code class="docutils literal notranslate"><span class="pre">traceback</span></code></a></li>
<li><a class="reference internal" href="#types"><code class="docutils literal notranslate"><span class="pre">types</span></code></a></li>
<li><a class="reference internal" href="#typing"><code class="docutils literal notranslate"><span class="pre">typing</span></code></a></li>
<li><a class="reference internal" href="#unittest"><code class="docutils literal notranslate"><span class="pre">unittest</span></code></a></li>
<li><a class="reference internal" href="#urllib-parse"><code class="docutils literal notranslate"><span class="pre">urllib.parse</span></code></a></li>
<li><a class="reference internal" href="#xml"><code class="docutils literal notranslate"><span class="pre">xml</span></code></a></li>
<li><a class="reference internal" href="#zipimport"><code class="docutils literal notranslate"><span class="pre">zipimport</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#optimizations">Optimisations</a></li>
<li><a class="reference internal" href="#deprecated">Obsolescence</a></li>
<li><a class="reference internal" href="#removed">Retrait</a></li>
<li><a class="reference internal" href="#porting-to-python-3-10">Portage vers Python 3.10</a><ul>
<li><a class="reference internal" href="#changes-in-the-python-syntax">Changements à la syntaxe de Python</a></li>
<li><a class="reference internal" href="#changes-in-the-python-api">Changements dans l'API Python</a></li>
<li><a class="reference internal" href="#changes-in-the-c-api">Changements dans l'API C</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cpython-bytecode-changes">Changements au code intermédiaire CPython</a></li>
<li><a class="reference internal" href="#build-changes">Changements à la compilation</a></li>
<li><a class="reference internal" href="#c-api-changes">Changements à l'API C</a><ul>
<li><a class="reference internal" href="#pep-652-maintaining-the-stable-abi">PEP 652 : maintenance d'une ABI stable</a></li>
<li><a class="reference internal" href="#id1">Nouvelles fonctionnalités</a></li>
<li><a class="reference internal" href="#id2">Portage vers Python 3.10</a></li>
<li><a class="reference internal" href="#id3">Obsolescence</a></li>
<li><a class="reference internal" href="#id4">Retrait</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Sujet précédent</h4>
    <p class="topless"><a href="3.11.html"
                          title="Chapitre précédent">Les nouveautés de Python 3.11</a></p>
  </div>
  <div>
    <h4>Sujet suivant</h4>
    <p class="topless"><a href="3.9.html"
                          title="Chapitre suivant">Les nouveautés de Python 3.9</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Signalement de bogue</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/main/Doc/whatsnew/3.10.rst"
            rel="nofollow">Voir la source
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Index des modules Python"
             >modules</a> |</li>
        <li class="right" >
          <a href="3.9.html" title="Les nouveautés de Python 3.9"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="3.11.html" title="Les nouveautés de Python 3.11"
             accesskey="P">précédent</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.12.0 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Nouveautés de Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Les nouveautés de Python 3.10</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Recherche rapide" aria-label="Recherche rapide" type="search" name="q" id="search-box" />
          <input type="submit" value="Go" />
        </form>
    </div>
                     |
                </li>
            <li class="right">
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label> |</li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="what-s-new-in-python-3-10">
<h1>Les nouveautés de Python 3.10<a class="headerlink" href="#what-s-new-in-python-3-10" title="Lien permanent vers ce titre">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Rédacteur</dt>
<dd class="field-odd"><p><em>Pablo Galindo Salgado</em></p>
</dd>
</dl>
<p>This article explains the new features in Python 3.10, compared to 3.9.
Python 3.10 was released on October 4, 2021.
For full details, see the <a class="reference internal" href="changelog.html#changelog"><span class="std std-ref">changelog</span></a>.</p>
<section id="summary-release-highlights">
<h2>Résumé – Points forts de la publication<a class="headerlink" href="#summary-release-highlights" title="Lien permanent vers ce titre">¶</a></h2>
<p>Nouvelles fonctionnalités de syntaxe :</p>
<ul class="simple">
<li><p><span class="target" id="index-77"></span><a class="pep reference external" href="https://peps.python.org/pep-0634/"><strong>PEP 634</strong></a>, Filtrage par motifs structurels : spécification ;</p></li>
<li><p><span class="target" id="index-78"></span><a class="pep reference external" href="https://peps.python.org/pep-0635/"><strong>PEP 635</strong></a>, Filtrage par motifs structurels : motivation et justification ;</p></li>
<li><p><span class="target" id="index-79"></span><a class="pep reference external" href="https://peps.python.org/pep-0636/"><strong>PEP 636</strong></a>, Filtrage par motifs structurels : tutoriel ;</p></li>
<li><p><a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=12782">bpo-12782</a>, Les gestionnaires de contextes entre parenthèses sont maintenant autorisés.</p></li>
</ul>
<p>Nouvelles fonctionnalités dans la bibliothèque standard :</p>
<ul class="simple">
<li><p><span class="target" id="index-80"></span><a class="pep reference external" href="https://peps.python.org/pep-0618/"><strong>PEP 618</strong></a>, ajout de la vérification optionnelle de taille dans <code class="docutils literal notranslate"><span class="pre">zip</span></code>.</p></li>
</ul>
<p>Améliorations de l'interpréteur :</p>
<ul class="simple">
<li><p><span class="target" id="index-81"></span><a class="pep reference external" href="https://peps.python.org/pep-0626/"><strong>PEP 626</strong></a>, numéros de lignes précis pour le débogage et les autres outils.</p></li>
</ul>
<p>Nouvelles fonctionnalités de typage :</p>
<ul class="simple">
<li><p><span class="target" id="index-82"></span><a class="pep reference external" href="https://peps.python.org/pep-0604/"><strong>PEP 604</strong></a>, autorise l'écriture d'union de types sous la forme X | Y ;</p></li>
<li><p><span class="target" id="index-83"></span><a class="pep reference external" href="https://peps.python.org/pep-0612/"><strong>PEP 612</strong></a>, variables de spécification de paramètres.</p></li>
<li><p><span class="target" id="index-84"></span><a class="pep reference external" href="https://peps.python.org/pep-0613/"><strong>PEP 613</strong></a>, alias de types explicites ;</p></li>
<li><p><span class="target" id="index-8"></span><a class="pep reference external" href="https://peps.python.org/pep-0647/"><strong>PEP 647</strong></a>, User-Defined Type Guards</p></li>
</ul>
<p>Obsolescences, retraits ou restrictions :</p>
<ul class="simple">
<li><p><span class="target" id="index-85"></span><a class="pep reference external" href="https://peps.python.org/pep-0644/"><strong>PEP 644</strong></a>, mise à jour de la version minimale d'<em>OpenSSL</em> à 1.1.1 ;</p></li>
<li><p><span class="target" id="index-86"></span><a class="pep reference external" href="https://peps.python.org/pep-0632/"><strong>PEP 632</strong></a>, obsolescence du module <code class="docutils literal notranslate"><span class="pre">distutils</span></code> ;</p></li>
<li><p><span class="target" id="index-87"></span><a class="pep reference external" href="https://peps.python.org/pep-0623/"><strong>PEP 623</strong></a>, obsolescence et préparation du retrait du membre <code class="docutils literal notranslate"><span class="pre">wstr</span></code> de <code class="docutils literal notranslate"><span class="pre">PyUnicodeObject</span></code> ;</p></li>
<li><p><span class="target" id="index-88"></span><a class="pep reference external" href="https://peps.python.org/pep-0624/"><strong>PEP 624</strong></a>, retrait des API d'encodage <code class="docutils literal notranslate"><span class="pre">Py_UNICODE</span></code> ;</p></li>
<li><p><span class="target" id="index-89"></span><a class="pep reference external" href="https://peps.python.org/pep-0597/"><strong>PEP 597</strong></a>, ajout de l'<code class="docutils literal notranslate"><span class="pre">EncodingWarning</span></code> optionnel</p></li>
</ul>
</section>
<section id="new-features">
<h2>Nouvelles fonctionnalités<a class="headerlink" href="#new-features" title="Lien permanent vers ce titre">¶</a></h2>
<section id="parenthesized-context-managers">
<span id="whatsnew310-pep563"></span><h3>Gestionnaires de contextes entre parenthèses<a class="headerlink" href="#parenthesized-context-managers" title="Lien permanent vers ce titre">¶</a></h3>
<p>Il est maintenant possible de mettre les gestionnaires de contexte entre parenthèses pour les répartir sur plusieurs lignes. Ceci permet le formatage d'une longue série de gestionnaires de contexte sur plusieurs lignes comme ce qui était préalablement possible avec les instructions d'importation. Par exemple, tous ces blocs sont maintenant valides :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="p">(</span><span class="n">CtxManager</span><span class="p">()</span> <span class="k">as</span> <span class="n">example</span><span class="p">):</span>
    <span class="o">...</span>

<span class="k">with</span> <span class="p">(</span>
    <span class="n">CtxManager1</span><span class="p">(),</span>
    <span class="n">CtxManager2</span><span class="p">()</span>
<span class="p">):</span>
    <span class="o">...</span>

<span class="k">with</span> <span class="p">(</span><span class="n">CtxManager1</span><span class="p">()</span> <span class="k">as</span> <span class="n">example</span><span class="p">,</span>
      <span class="n">CtxManager2</span><span class="p">()):</span>
    <span class="o">...</span>

<span class="k">with</span> <span class="p">(</span><span class="n">CtxManager1</span><span class="p">(),</span>
      <span class="n">CtxManager2</span><span class="p">()</span> <span class="k">as</span> <span class="n">example</span><span class="p">):</span>
    <span class="o">...</span>

<span class="k">with</span> <span class="p">(</span>
    <span class="n">CtxManager1</span><span class="p">()</span> <span class="k">as</span> <span class="n">example1</span><span class="p">,</span>
    <span class="n">CtxManager2</span><span class="p">()</span> <span class="k">as</span> <span class="n">example2</span>
<span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>il est aussi possible d'utiliser une virgule en fin de ligne à la fin du groupe entre parenthèses :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="p">(</span>
    <span class="n">CtxManager1</span><span class="p">()</span> <span class="k">as</span> <span class="n">example1</span><span class="p">,</span>
    <span class="n">CtxManager2</span><span class="p">()</span> <span class="k">as</span> <span class="n">example2</span><span class="p">,</span>
    <span class="n">CtxManager3</span><span class="p">()</span> <span class="k">as</span> <span class="n">example3</span><span class="p">,</span>
<span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Cette nouvelle syntaxe utilise la capacité <em>non-LL(1)</em> du nouvel analyseur syntaxique. Voir <span class="target" id="index-90"></span><a class="pep reference external" href="https://peps.python.org/pep-0617/"><strong>PEP 617</strong></a> pour plus de détails.</p>
<p>(contribution de <em>Guido van Rossum</em>, <em>Pablo Galindo</em> et <em>Lysandros Nikolaou</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=12782">bpo-12782</a> et <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40334">bpo-40334</a>).</p>
</section>
<section id="better-error-messages">
<h3>Meilleurs messages d'erreurs<a class="headerlink" href="#better-error-messages" title="Lien permanent vers ce titre">¶</a></h3>
<section id="syntaxerrors">
<h4><code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code><a class="headerlink" href="#syntaxerrors" title="Lien permanent vers ce titre">¶</a></h4>
<p>Pendant l'analyse syntaxique de code qui contient des parenthèses ou autres balises ouvrantes et fermantes, l'interpréteur inclut maintenant l'emplacement de la balise ou parenthèse non fermée plutôt que d'afficher <em>SyntaxError: unexpected EOF while parsing</em> ou d'indiquer un emplacement incorrect. Par exemple, considérez le code suivant (remarquez l'accolade <code class="docutils literal notranslate"><span class="pre">'{'</span></code> non-fermée) :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">expected</span> <span class="o">=</span> <span class="p">{</span><span class="mi">9</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">18</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">19</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">27</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">28</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">29</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">36</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">37</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="mi">38</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">39</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">45</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">46</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">47</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">48</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">49</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">54</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
<span class="n">some_other_code</span> <span class="o">=</span> <span class="n">foo</span><span class="p">()</span>
</pre></div>
</div>
<p>Les versions précédentes de l’interpréteur indiquaient des emplacements qui portaient à confusion pour l'erreur de syntaxe :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">File</span> <span class="s2">&quot;example.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">3</span>
    <span class="n">some_other_code</span> <span class="o">=</span> <span class="n">foo</span><span class="p">()</span>
                    <span class="o">^</span>
<span class="ne">SyntaxError</span><span class="p">:</span> <span class="n">invalid</span> <span class="n">syntax</span>
</pre></div>
</div>
<p>mais dans Python 3.10, une erreur plus informative est levée :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">File</span> <span class="s2">&quot;example.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="n">expected</span> <span class="o">=</span> <span class="p">{</span><span class="mi">9</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">18</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">19</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">27</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">28</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">29</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">36</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">37</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
               <span class="o">^</span>
<span class="ne">SyntaxError</span><span class="p">:</span> <span class="s1">&#39;{&#39;</span> <span class="n">was</span> <span class="n">never</span> <span class="n">closed</span>
</pre></div>
</div>
<p>De façon similaire, les erreurs impliquant des chaînes littérales non-fermées (avec simples ou triples apostrophes) pointent maintenant vers le début de la chaîne plutôt de mentionner la fin de ligne ou la fin du fichier.</p>
<p>Ces améliorations sont inspirées par un travail préalable sur l'interpréteur <em>PyPy</em></p>
<p>(contribution de <em>Pablo Galindo</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42864">bpo-42864</a> et <em>Batuhan Taskaya</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40176">bpo-40176</a>).</p>
<p>Les exceptions <a class="reference internal" href="../library/exceptions.html#SyntaxError" title="SyntaxError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxError</span></code></a> levées par l'interpréteur soulignent maintenant toute la portée de l'expression qui constitue l'erreur de syntaxe plutôt que seulement la position où le problème a été détecté. De cette façon, plutôt que d'afficher (avant Python 3.10) :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">z</span> <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">t</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>
<span class="w">    </span><span class="n">foo</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">z</span> <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">t</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
<span class="w">           </span><span class="pm">^</span>
<span class="gr">SyntaxError</span>: <span class="n">Generator expression must be parenthesized</span>
</pre></div>
</div>
<p>Python 3.10 affiche maintenant l'exception comme ceci :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">z</span> <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">t</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>
<span class="w">    </span><span class="n">foo</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">z</span> <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">t</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
<span class="w">           </span><span class="pm">^^^^^^^^^^^^^^^^^^^^</span>
<span class="gr">SyntaxError</span>: <span class="n">Generator expression must be parenthesized</span>
</pre></div>
</div>
<p>Cette amélioration est une contribution de <em>Pablo Galindo</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43914">bpo-43914</a>.</p>
<p>Un nombre considérable de nouveaux messages spécialisés pour les exceptions <a class="reference internal" href="../library/exceptions.html#SyntaxError" title="SyntaxError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxError</span></code></a> a été incorporé. Certains des plus notables sont :</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">:</span></code> manquant avant les blocs :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">rocket</span><span class="o">.</span><span class="n">position</span> <span class="o">&gt;</span> <span class="n">event_horizon</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>
<span class="w">    </span><span class="k">if</span> <span class="n">rocket</span><span class="o">.</span><span class="n">position</span> <span class="o">&gt;</span> <span class="n">event_horizon</span>
<span class="w">                                      </span><span class="pm">^</span>
<span class="gr">SyntaxError</span>: <span class="n">expected &#39;:&#39;</span>
</pre></div>
</div>
<p>(Contributed by Pablo Galindo in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42997">bpo-42997</a>.)</p>
</li>
<li><p>Les <em>n</em>-uplets sans parenthèses dans les cibles de compréhensions :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">{</span><span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="s1">&#39;abcd&#39;</span><span class="p">,</span> <span class="s1">&#39;1234&#39;</span><span class="p">)}</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>
<span class="w">    </span><span class="p">{</span><span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="s1">&#39;abcd&#39;</span><span class="p">,</span> <span class="s1">&#39;1234&#39;</span><span class="p">)}</span>
<span class="w">     </span><span class="pm">^</span>
<span class="gr">SyntaxError</span>: <span class="n">did you forget parentheses around the comprehension target?</span>
</pre></div>
</div>
<p>(Contributed by Pablo Galindo in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43017">bpo-43017</a>.)</p>
</li>
<li><p>virgules manquantes dans les littéraux de collections et entre les expressions ; :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">items</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span><span class="n">x</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span><span class="n">y</span><span class="p">:</span> <span class="mi">2</span>
<span class="gp">... </span><span class="n">z</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">3</span>
<span class="w">    </span><span class="n">y</span><span class="p">:</span> <span class="mi">2</span>
<span class="w">       </span><span class="pm">^</span>
<span class="gr">SyntaxError</span>: <span class="n">invalid syntax. Perhaps you forgot a comma?</span>
</pre></div>
</div>
<p>(Contributed by Pablo Galindo in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43822">bpo-43822</a>.)</p>
</li>
<li><p>types multiples d'<code class="docutils literal notranslate"><span class="pre">Exception</span></code> sans parenthèses :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">build_dyson_sphere</span><span class="p">()</span>
<span class="gp">... </span><span class="k">except</span> <span class="n">NotEnoughScienceError</span><span class="p">,</span> <span class="n">NotEnoughResourcesError</span><span class="p">:</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">3</span>
<span class="w">    </span><span class="k">except</span> <span class="n">NotEnoughScienceError</span><span class="p">,</span> <span class="n">NotEnoughResourcesError</span><span class="p">:</span>
<span class="w">           </span><span class="pm">^</span>
<span class="gr">SyntaxError</span>: <span class="n">multiple exception types must be parenthesized</span>
</pre></div>
</div>
<p>(Contributed by Pablo Galindo in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43149">bpo-43149</a>.)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">:</span></code> et valeurs manquantes dans les littéraux de dictionnaires :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">values</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span><span class="n">x</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span><span class="n">y</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="gp">... </span><span class="n">z</span><span class="p">:</span>
<span class="gp">... </span><span class="p">}</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">4</span>
<span class="w">    </span><span class="n">z</span><span class="p">:</span>
<span class="w">     </span><span class="pm">^</span>
<span class="gr">SyntaxError</span>: <span class="n">expression expected after dictionary key and &#39;:&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">values</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="n">z</span> <span class="n">w</span><span class="p">:</span><span class="mi">3</span><span class="p">}</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>
<span class="w">    </span><span class="n">values</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="n">z</span> <span class="n">w</span><span class="p">:</span><span class="mi">3</span><span class="p">}</span>
<span class="w">                        </span><span class="pm">^</span>
<span class="gr">SyntaxError</span>: <span class="n">&#39;:&#39; expected after dictionary key</span>
</pre></div>
</div>
<p>(Contributed by Pablo Galindo in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43823">bpo-43823</a>.)</p>
</li>
<li><p>blocs <code class="docutils literal notranslate"><span class="pre">try</span></code> sans blocs <code class="docutils literal notranslate"><span class="pre">except</span></code> ou <code class="docutils literal notranslate"><span class="pre">finally</span></code> :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">x</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">... </span><span class="n">something</span> <span class="o">=</span> <span class="mi">3</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">3</span>
<span class="w">    </span><span class="n">something</span>  <span class="o">=</span> <span class="mi">3</span>
<span class="w">    </span><span class="pm">^^^^^^^^^</span>
<span class="gr">SyntaxError</span>: <span class="n">expected &#39;except&#39; or &#39;finally&#39; block</span>
</pre></div>
</div>
<p>(Contributed by Pablo Galindo in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44305">bpo-44305</a>.)</p>
</li>
<li><p>utilisation de <code class="docutils literal notranslate"><span class="pre">=</span></code> au lieu de <code class="docutils literal notranslate"><span class="pre">==</span></code> dans les comparaisons :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">rocket</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">event_horizon</span><span class="p">:</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>
<span class="w">    </span><span class="k">if</span> <span class="n">rocket</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">event_horizon</span><span class="p">:</span>
<span class="w">                       </span><span class="pm">^</span>
<span class="gr">SyntaxError</span>: <span class="n">cannot assign to attribute here. Maybe you meant &#39;==&#39; instead of &#39;=&#39;?</span>
</pre></div>
</div>
<p>(Contributed by Pablo Galindo in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43797">bpo-43797</a>.)</p>
</li>
<li><p>utilisation de <code class="docutils literal notranslate"><span class="pre">*</span></code> dans les chaînes formatées (<em>f-strings</em>) :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="sa">f</span><span class="s2">&quot;Black holes </span><span class="si">{</span><span class="o">*</span><span class="n">all_black_holes</span><span class="si">}</span><span class="s2"> and revelations&quot;</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>
<span class="w">    </span><span class="p">(</span><span class="o">*</span><span class="n">all_black_holes</span><span class="p">)</span>
<span class="w">     </span><span class="pm">^</span>
<span class="gr">SyntaxError</span>: <span class="n">f-string: cannot use starred expression here</span>
</pre></div>
</div>
<p>(Contributed by Pablo Galindo in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41064">bpo-41064</a>.)</p>
</li>
</ul>
</section>
<section id="indentationerrors">
<h4><code class="docutils literal notranslate"><span class="pre">IndentationError</span></code><a class="headerlink" href="#indentationerrors" title="Lien permanent vers ce titre">¶</a></h4>
<p>Plusieurs exceptions <a class="reference internal" href="../library/exceptions.html#IndentationError" title="IndentationError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">IndentationError</span></code></a> ont maintenant plus de contexte concernant le genre de bloc qui attendait une indentation. Ceci inclut l'emplacement de l'instruction :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
<span class="gp">... </span>   <span class="k">if</span> <span class="n">lel</span><span class="p">:</span>
<span class="gp">... </span>   <span class="n">x</span> <span class="o">=</span> <span class="mi">2</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">3</span>
<span class="w">    </span><span class="n">x</span> <span class="o">=</span> <span class="mi">2</span>
<span class="w">    </span><span class="pm">^</span>
<span class="gr">IndentationError</span>: <span class="n">expected an indented block after &#39;if&#39; statement in line 2</span>
</pre></div>
</div>
</section>
<section id="attributeerrors">
<h4><code class="docutils literal notranslate"><span class="pre">AttributeError</span></code><a class="headerlink" href="#attributeerrors" title="Lien permanent vers ce titre">¶</a></h4>
<p>À l'impression d'une <a class="reference internal" href="../library/exceptions.html#AttributeError" title="AttributeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AttributeError</span></code></a>, <code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_Display()</span></code> offre des suggestions de noms d'attributs similaires dans l'objet pour lequel l'exception a été levée :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">collections</span><span class="o">.</span><span class="n">namedtoplo</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">AttributeError</span>: <span class="n">module &#39;collections&#39; has no attribute &#39;namedtoplo&#39;. Did you mean: namedtuple?</span>
</pre></div>
</div>
<p>(contribution de <em>Pablo Galindo</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38530">bpo-38530</a>).</p>
<div class="admonition warning">
<p class="admonition-title">Avertissement</p>
<p>notez que ceci ne fonctionne pas si <code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_Display()</span></code> n'est pas appelée pour afficher l'erreur, ce qui est le cas si une fonction d'affichage d'erreur personnalisée est utilisée. C'est un scénario typique avec certains interpréteurs interactifs comme <em>IPython</em>.</p>
</div>
</section>
<section id="nameerrors">
<h4><code class="docutils literal notranslate"><span class="pre">NameError</span></code><a class="headerlink" href="#nameerrors" title="Lien permanent vers ce titre">¶</a></h4>
<p>Quand elle affiche une <a class="reference internal" href="../library/exceptions.html#NameError" title="NameError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NameError</span></code></a> levée par l'interpréteur, <code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_Display()</span></code> offre des suggestions de variables qui ont un nom similaire dans la fonction de laquelle l’exception a été levée :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">schwarzschild_black_hole</span> <span class="o">=</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">schwarschild_black_hole</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">NameError</span>: <span class="n">name &#39;schwarschild_black_hole&#39; is not defined. Did you mean: schwarzschild_black_hole?</span>
</pre></div>
</div>
<p>(contribution de <em>Pablo Galindo</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38530">bpo-38530</a>).</p>
<div class="admonition warning">
<p class="admonition-title">Avertissement</p>
<p>notez que ceci ne fonctionne pas si <code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_Display()</span></code> n'est pas appelée pour afficher l'erreur, ce qui est le cas si une fonction d'affichage d'erreur personnalisée est utilisée. C'est un scénario typique avec certains interpréteurs interactifs comme <em>IPython</em>.</p>
</div>
</section>
</section>
<section id="pep-626-precise-line-numbers-for-debugging-and-other-tools">
<h3>PEP 626 : numéros de lignes précis pour le débogage et les autres outils<a class="headerlink" href="#pep-626-precise-line-numbers-for-debugging-and-other-tools" title="Lien permanent vers ce titre">¶</a></h3>
<p>La PEP 626 apporte des numéros de lignes plus précis pour le débogage, le profilage et les outils de mesure de couverture. Les événements de traçage, avec les numéros de ligne corrects, sont générés pour toutes les lignes de code exécutées et seulement pour celles-ci.</p>
<p>L'attribut <code class="docutils literal notranslate"><span class="pre">f_lineno</span></code> des objets cadres contient dorénavant le numéro de ligne attendu.</p>
<p>L'attribut <code class="docutils literal notranslate"><span class="pre">co_lnotab</span></code> des objets code est obsolète et sera retiré dans 3.12. Tout code qui doit convertir d'un décalage (<em>offset</em>) vers des numéros de ligne doit plutôt utiliser la nouvelle méthode <code class="docutils literal notranslate"><span class="pre">co_lines()</span></code>.</p>
</section>
<section id="pep-634-structural-pattern-matching">
<h3>PEP 634 : filtrage par motifs structurels<a class="headerlink" href="#pep-634-structural-pattern-matching" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le filtrage par motifs a été ajouté sous la forme d'une instruction <em>match</em> et d'instructions <em>case</em> pour les motifs avec des actions associées. Les motifs filtrent des séquences, des dictionnaires, des types de données et des instances de classes. Le filtrage par motifs permet aux programmes d'extraire de l'information de types de données complexes, faire du branchement selon la structure des données et réaliser des actions spécifiques en fonction des différentes formes des données.</p>
<section id="syntax-and-operations">
<h4>Syntaxe et opérations<a class="headerlink" href="#syntax-and-operations" title="Lien permanent vers ce titre">¶</a></h4>
<p>La syntaxe générique du filtrage par motifs est :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">match</span> <span class="n">subject</span><span class="p">:</span>
    <span class="k">case</span> <span class="o">&lt;</span><span class="n">pattern_1</span><span class="o">&gt;</span><span class="p">:</span>
        <span class="o">&lt;</span><span class="n">action_1</span><span class="o">&gt;</span>
    <span class="k">case</span> <span class="o">&lt;</span><span class="n">pattern_2</span><span class="o">&gt;</span><span class="p">:</span>
        <span class="o">&lt;</span><span class="n">action_2</span><span class="o">&gt;</span>
    <span class="k">case</span> <span class="o">&lt;</span><span class="n">pattern_3</span><span class="o">&gt;</span><span class="p">:</span>
        <span class="o">&lt;</span><span class="n">action_3</span><span class="o">&gt;</span>
    <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
        <span class="o">&lt;</span><span class="n">action_wildcard</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Une instruction <em>match</em> prend une expression et compare successivement sa valeur à différents filtres qui sont donnés comme un ou plusieurs blocs <em>case</em>. Plus précisément, le filtrage par motifs s'effectue par :</p>
<ol class="arabic simple">
<li><p>l'utilisation de données qui ont un type et une forme (ici <code class="docutils literal notranslate"><span class="pre">subject</span></code>) ;</p></li>
<li><p>l'évaluation de <code class="docutils literal notranslate"><span class="pre">subject</span></code> dans une instruction <code class="docutils literal notranslate"><span class="pre">match</span></code> ;</p></li>
<li><p>l'application de chaque filtre sur <code class="docutils literal notranslate"><span class="pre">subject</span></code> dans des instructions <code class="docutils literal notranslate"><span class="pre">case</span></code> de haut en bas jusqu'à ce qu'un appariement soit confirmé ;</p></li>
<li><p>l’exécution de l'action associée au filtre s'il y a appariement ;</p></li>
<li><p>s'il n'y a aucun appariement et que le dernier <code class="docutils literal notranslate"><span class="pre">case</span></code> est un filtre <em>attrape-tout</em> <code class="docutils literal notranslate"><span class="pre">_</span></code>, l'action correspondante est exécutée. S'il n'y a aucun appariement ni filtre attrape-tout, le bloc <code class="docutils literal notranslate"><span class="pre">match</span></code> n'effectue aucune opération.</p></li>
</ol>
</section>
<section id="declarative-approach">
<h4>Approche déclarative<a class="headerlink" href="#declarative-approach" title="Lien permanent vers ce titre">¶</a></h4>
<p>Le filtrage par motifs est peut-être connu des lecteurs par l'intermédiaire des langages <em>C</em>, <em>Java</em> ou <em>JavaScript</em> (et plusieurs autres langages), avec l'appariement simple d'un sujet (objet de données) à un littéral (filtre) avec l'instruction <code class="docutils literal notranslate"><span class="pre">switch</span></code>. Souvent, l'instruction <code class="docutils literal notranslate"><span class="pre">switch</span></code> est utilisée pour comparer des objets ou expressions à des instructions <code class="docutils literal notranslate"><span class="pre">case</span></code> qui contiennent des littéraux.</p>
<p>Des exemples plus puissants de filtrage par motifs sont présents dans des langages tels que <em>Scala</em> et <em>Elixir</em>. Avec le filtrage par motifs structurels, l'approche est « déclarative » et énonce les conditions (les motifs) pour apparier les données.</p>
<p>Bien qu'une série d'instructions « impératives » utilisant des instructions « if » imbriquées puisse être utilisée pour accomplir quelque chose de similaire au filtrage par motifs structurels, ceci est moins clair que l'approche « déclarative ». Cette dernière énonce les conditions à remplir pour réaliser un appariement grâce à ses filtres sur des motifs explicites. Bien que le filtrage par motifs structurels puisse être utilisé dans sa forme la plus simple pour comparer une variable à un littéral dans une instruction <code class="docutils literal notranslate"><span class="pre">case</span></code>, son intérêt réel en Python réside dans son traitement du sujet selon son type et sa forme.</p>
</section>
<section id="simple-pattern-match-to-a-literal">
<h4>Filtre simple : apparier à un littéral<a class="headerlink" href="#simple-pattern-match-to-a-literal" title="Lien permanent vers ce titre">¶</a></h4>
<p>Regardons cet exemple en tant que filtrage par motif dans sa forme la plus simple : une valeur, le sujet, est comparée à (ou « filtrée par ») plusieurs littéraux, les motifs. Dans l'exemple ci-dessous, <code class="docutils literal notranslate"><span class="pre">status</span></code> est le sujet de l'instruction <code class="docutils literal notranslate"><span class="pre">match</span></code>. Les filtres sont chacune des instructions <code class="docutils literal notranslate"><span class="pre">case</span></code>, où les littéraux représentent les codes de status des requêtes. Les actions associées au <code class="docutils literal notranslate"><span class="pre">case</span></code> sont exécutés suite à un appariement :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">http_error</span><span class="p">(</span><span class="n">status</span><span class="p">):</span>
    <span class="k">match</span> <span class="n">status</span><span class="p">:</span>
        <span class="k">case</span> <span class="mi">400</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Bad request&quot;</span>
        <span class="k">case</span> <span class="mi">404</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Not found&quot;</span>
        <span class="k">case</span> <span class="mi">418</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;I&#39;m a teapot&quot;</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Something&#39;s wrong with the internet&quot;</span>
</pre></div>
</div>
<p>Si on passe 418 à <code class="docutils literal notranslate"><span class="pre">status</span></code> dans la fonction ci-haut, elle renvoie <code class="docutils literal notranslate"><span class="pre">&quot;I'm</span> <span class="pre">a</span> <span class="pre">teapot&quot;</span></code>. Avec 500, l'instruction <code class="docutils literal notranslate"><span class="pre">case</span></code> qui contient <code class="docutils literal notranslate"><span class="pre">_</span></code> apparie comme attrape-tout et la fonction renvoie <code class="docutils literal notranslate"><span class="pre">&quot;Something's</span> <span class="pre">wrong</span> <span class="pre">with</span> <span class="pre">the</span> <span class="pre">internet&quot;</span></code>. Prenez note que dans le dernier bloc, le nom de variable, <code class="docutils literal notranslate"><span class="pre">_</span></code> agit comme un <em>attrape-tout</em> et garantit que le sujet sera toujours apparié. L'utilisation de <code class="docutils literal notranslate"><span class="pre">_</span></code> est optionnelle.</p>
<p>Vous pouvez combiner plusieurs littéraux dans un seul filtre en utilisant <code class="docutils literal notranslate"><span class="pre">|</span></code> (qui se lit « ou ») :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">case</span> <span class="mi">401</span> <span class="o">|</span> <span class="mi">403</span> <span class="o">|</span> <span class="mi">404</span><span class="p">:</span>
    <span class="k">return</span> <span class="s2">&quot;Not allowed&quot;</span>
</pre></div>
</div>
<section id="behavior-without-the-wildcard">
<h5>Comportement sans l'attrape-tout<a class="headerlink" href="#behavior-without-the-wildcard" title="Lien permanent vers ce titre">¶</a></h5>
<p>Modifions l'exemple ci-haut en enlevant le dernier bloc <code class="docutils literal notranslate"><span class="pre">case</span></code>. Il devient :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">http_error</span><span class="p">(</span><span class="n">status</span><span class="p">):</span>
    <span class="k">match</span> <span class="n">status</span><span class="p">:</span>
        <span class="k">case</span> <span class="mi">400</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Bad request&quot;</span>
        <span class="k">case</span> <span class="mi">404</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Not found&quot;</span>
        <span class="k">case</span> <span class="mi">418</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;I&#39;m a teapot&quot;</span>
</pre></div>
</div>
<p>Sans l'utilisation de <code class="docutils literal notranslate"><span class="pre">_</span></code> dans une instruction <code class="docutils literal notranslate"><span class="pre">case</span></code>, il est possible de ne pas avoir d'appariement. Dans ce cas, il ne se passe rien. Par exemple, si 500 est passé à <code class="docutils literal notranslate"><span class="pre">status</span></code>, aucune opération n'est effectuée.</p>
</section>
</section>
<section id="patterns-with-a-literal-and-variable">
<h4>Filtres avec un littéral et une variable<a class="headerlink" href="#patterns-with-a-literal-and-variable" title="Lien permanent vers ce titre">¶</a></h4>
<p>Les motifs des filtres peuvent prendre une forme similaire aux affectations multiples et un filtre peut être utilisé pour lier plus d'une variable. Dans cet exemple, un point peut être dissocié entre son abscisse et son ordonnée :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># point is an (x, y) tuple</span>
<span class="k">match</span> <span class="n">point</span><span class="p">:</span>
    <span class="k">case</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Origin&quot;</span><span class="p">)</span>
    <span class="k">case</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Y=</span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">case</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;X=</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">case</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;X=</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">, Y=</span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Not a point&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Le motif du premier filtre comporte deux littéraux, <code class="docutils literal notranslate"><span class="pre">(0,</span> <span class="pre">0)</span></code>, et peut être vu comme une extension du filtre sur un littéral montré plus haut. Les motifs des deux filtres suivants regroupent un littéral et une variable. De plus, la variable est liée à la valeur provenant du sujet (<code class="docutils literal notranslate"><span class="pre">point</span></code>). Le motif du quatrième filtre capture deux valeurs, ce qui le rend conceptuellement similaire à l'affectation multiple : <code class="docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y)</span> <span class="pre">=</span> <span class="pre">point</span></code>.</p>
</section>
<section id="patterns-and-classes">
<h4>Filtres et classes<a class="headerlink" href="#patterns-and-classes" title="Lien permanent vers ce titre">¶</a></h4>
<p>Si vous utilisez des classes pour structurer vos données, vous pouvez utiliser le nom de la classe suivie d'une liste d'arguments comme motif de filtre. Ceci ressemble à un appel du constructeur. Ce filtre peut capturer les attributs de la classe dans des variables :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Point</span><span class="p">:</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">int</span>

<span class="k">def</span> <span class="nf">location</span><span class="p">(</span><span class="n">point</span><span class="p">):</span>
    <span class="k">match</span> <span class="n">point</span><span class="p">:</span>
        <span class="k">case</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Origin is the point&#39;s location.&quot;</span><span class="p">)</span>
        <span class="k">case</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Y=</span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2"> and the point is on the y-axis.&quot;</span><span class="p">)</span>
        <span class="k">case</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;X=</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2"> and the point is on the x-axis.&quot;</span><span class="p">)</span>
        <span class="k">case</span> <span class="n">Point</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The point is located somewhere else on the plane.&quot;</span><span class="p">)</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Not a point&quot;</span><span class="p">)</span>
</pre></div>
</div>
<section id="patterns-with-positional-parameters">
<h5>Filtres avec arguments positionnels<a class="headerlink" href="#patterns-with-positional-parameters" title="Lien permanent vers ce titre">¶</a></h5>
<p>Vous pouvez utiliser les arguments positionnels avec un certain nombre de classes natives qui définissent l'ordre de leurs attributs, notamment les classes de données (<em>dataclasses</em>). Vous pouvez aussi spécifier la position des attributs quand ils sont utilisés dans les filtres en définissant l'attribut spécial <code class="docutils literal notranslate"><span class="pre">__match_args__</span></code> dans vos classes. Par exemple, le mettre à <code class="docutils literal notranslate"><span class="pre">(&quot;x&quot;,</span> <span class="pre">&quot;y&quot;)</span></code> rend tous les filtres ci-dessous équivalents (en particulier, tous provoquent la liaison de l'attribut <code class="docutils literal notranslate"><span class="pre">y</span></code> à la variable <code class="docutils literal notranslate"><span class="pre">var</span></code>) :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span>
<span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">var</span><span class="p">)</span>
<span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">var</span><span class="p">)</span>
<span class="n">Point</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">var</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="nested-patterns">
<h4>Filtres imbriqués<a class="headerlink" href="#nested-patterns" title="Lien permanent vers ce titre">¶</a></h4>
<p>Les filtres peuvent être imbriqués de façon arbitraire. Par exemple, si nous avons une courte liste de points, elle peut être appariée comme ceci :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">match</span> <span class="n">points</span><span class="p">:</span>
    <span class="k">case</span> <span class="p">[]:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No points in the list.&quot;</span><span class="p">)</span>
    <span class="k">case</span> <span class="p">[</span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The origin is the only point in the list.&quot;</span><span class="p">)</span>
    <span class="k">case</span> <span class="p">[</span><span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A single point </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2"> is in the list.&quot;</span><span class="p">)</span>
    <span class="k">case</span> <span class="p">[</span><span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y1</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y2</span><span class="p">)]:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Two points on the Y axis at </span><span class="si">{</span><span class="n">y1</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">y2</span><span class="si">}</span><span class="s2"> are in the list.&quot;</span><span class="p">)</span>
    <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Something else is found in the list.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="complex-patterns-and-the-wildcard">
<h4>Filtres complexes et attrape-tout<a class="headerlink" href="#complex-patterns-and-the-wildcard" title="Lien permanent vers ce titre">¶</a></h4>
<p>Jusqu'à maintenant, les exemples ont utilisé <code class="docutils literal notranslate"><span class="pre">_</span></code> seul dans la dernière instruction <code class="docutils literal notranslate"><span class="pre">case</span></code>. Un attrape-tout peut être utilisé dans un filtre plus complexe tel que <code class="docutils literal notranslate"><span class="pre">('error',</span> <span class="pre">code,</span> <span class="pre">_)</span></code>. Par exemple :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">match</span> <span class="n">test_variable</span><span class="p">:</span>
    <span class="k">case</span> <span class="p">(</span><span class="s1">&#39;warning&#39;</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="mi">40</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;A warning has been received.&quot;</span><span class="p">)</span>
    <span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="k">_</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An error </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2"> occurred.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Dans l'exemple précédent, <code class="docutils literal notranslate"><span class="pre">test_variable</span></code> s'apparie à <code class="docutils literal notranslate"><span class="pre">('error',</span> <span class="pre">code,</span> <span class="pre">100)</span></code> et à <code class="docutils literal notranslate"><span class="pre">('error',</span> <span class="pre">code,</span> <span class="pre">800)</span></code>.</p>
</section>
<section id="guard">
<h4>Garde<a class="headerlink" href="#guard" title="Lien permanent vers ce titre">¶</a></h4>
<p>On peut ajouter une clause <code class="docutils literal notranslate"><span class="pre">if</span></code> à un filtre, ce qu'on appelle une « garde ». Si la garde s'évalue à faux, <code class="docutils literal notranslate"><span class="pre">match</span></code> poursuit avec la tentative d'appariement du prochain bloc <code class="docutils literal notranslate"><span class="pre">case</span></code>. Notez que la capture de valeur se produit avant l'évaluation de la garde :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">match</span> <span class="n">point</span><span class="p">:</span>
    <span class="k">case</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The point is located on the diagonal Y=X at </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
    <span class="k">case</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Point is not on the diagonal.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="other-key-features">
<h4>Autres fonctionnalités importantes<a class="headerlink" href="#other-key-features" title="Lien permanent vers ce titre">¶</a></h4>
<p>Plusieurs autres fonctionnalités importantes :</p>
<ul>
<li><p>Comme dans les affectations multiples, les motifs de filtres qui sont des <em>n</em>-uplets ou des listes sont totalement équivalents et autorisent tous les types de séquences. Techniquement, le sujet doit être une séquence. Ainsi, exception importante, les filtres n'autorisent pas les itérateurs. Aussi, pour prémunir d'une erreur commune, les filtres de séquences n'autorisent pas les chaînes ;</p></li>
<li><p>les filtres de séquence peuvent faire intervenir l'affectation étoilée : <code class="docutils literal notranslate"><span class="pre">[x,</span> <span class="pre">y,</span> <span class="pre">*reste]</span></code> ou <code class="docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y,</span> <span class="pre">*reste)</span></code> ont le même sens que dans une affectation avec <code class="docutils literal notranslate"><span class="pre">=</span></code>. Le nom de variable après l'étoile peut aussi être l'attrape-tout <code class="docutils literal notranslate"><span class="pre">_</span></code>. Ainsi, <code class="docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y,</span> <span class="pre">*_)</span></code> est un motif de filtre qui reconnaît les séquences à deux éléments ou plus, en capturant les deux premiers et en ignorant le reste ;</p></li>
<li><p>il existe les filtres d'association, qui ressemblent syntaxiquement aux dictionnaires. Par exemple, le filtre <code class="docutils literal notranslate"><span class="pre">{&quot;bande_passante&quot;:</span> <span class="pre">b,</span> <span class="pre">&quot;latence&quot;:</span> <span class="pre">l}</span></code> extrait les valeurs des clés <code class="docutils literal notranslate"><span class="pre">&quot;bande_passante&quot;</span></code> et <code class="docutils literal notranslate"><span class="pre">&quot;latence&quot;</span></code> dans un dictionnaire. Contrairement aux filtres de séquence, les clés absentes du filtre sont ignorées et le filtre réussit tout de même. L'affectation double-étoilée (<code class="docutils literal notranslate"><span class="pre">**reste</span></code>) fonctionne aussi (cependant, <code class="docutils literal notranslate"><span class="pre">**_</span></code> serait redondant et n'est donc pas permis) ;</p></li>
<li><p>on peut capturer la valeur d'une partie du motif d'un filtre avec le mot-clé <code class="docutils literal notranslate"><span class="pre">as</span></code>, par exemple :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">case</span> <span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span> <span class="k">as</span> <span class="n">p2</span><span class="p">):</span> <span class="o">...</span>
</pre></div>
</div>
<p>Ceci lie <code class="docutils literal notranslate"><span class="pre">x1</span></code>, <code class="docutils literal notranslate"><span class="pre">y1</span></code>, <code class="docutils literal notranslate"><span class="pre">x2</span></code>, <code class="docutils literal notranslate"><span class="pre">y2</span></code> comme attendu sans la clause <code class="docutils literal notranslate"><span class="pre">as</span></code>, et lie <code class="docutils literal notranslate"><span class="pre">p2</span></code> à l’entièreté du second élément du sujet ;</p>
</li>
<li><p>la plupart des littéraux sont comparés par égalité. Néanmoins, les singletons <code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">False</span></code> et <code class="docutils literal notranslate"><span class="pre">None</span></code> sont comparés par identité ;</p></li>
<li><p>les filtres peuvent contenir des noms qui se réfèrent à des constantes. Ces noms doivent impérativement être qualifiés (contenir au moins un point) pour ne pas être interprétés comme des variables de capture :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>
<span class="k">class</span> <span class="nc">Color</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="n">RED</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">GREEN</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">BLUE</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">color</span> <span class="o">=</span> <span class="n">Color</span><span class="o">.</span><span class="n">GREEN</span>
<span class="k">match</span> <span class="n">color</span><span class="p">:</span>
    <span class="k">case</span> <span class="n">Color</span><span class="o">.</span><span class="n">RED</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I see red!&quot;</span><span class="p">)</span>
    <span class="k">case</span> <span class="n">Color</span><span class="o">.</span><span class="n">GREEN</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Grass is green&quot;</span><span class="p">)</span>
    <span class="k">case</span> <span class="n">Color</span><span class="o">.</span><span class="n">BLUE</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I&#39;m feeling the blues :(&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>Pour la spécification complète, voir la <span class="target" id="index-91"></span><a class="pep reference external" href="https://peps.python.org/pep-0634/"><strong>PEP 634</strong></a>. La motivation et la justification des choix sont dans la <span class="target" id="index-92"></span><a class="pep reference external" href="https://peps.python.org/pep-0635/"><strong>PEP 635</strong></a>, et un tutoriel plus élaboré se trouve dans la <span class="target" id="index-93"></span><a class="pep reference external" href="https://peps.python.org/pep-0636/"><strong>PEP 636</strong></a>.</p>
</section>
</section>
<section id="optional-encodingwarning-and-encoding-locale-option">
<span id="whatsnew310-pep597"></span><h3><code class="docutils literal notranslate"><span class="pre">EncodingWarning</span></code> et option <code class="docutils literal notranslate"><span class="pre">encoding=&quot;locale&quot;</span></code> optionnels<a class="headerlink" href="#optional-encodingwarning-and-encoding-locale-option" title="Lien permanent vers ce titre">¶</a></h3>
<p>L'encodage par défaut de <code class="xref py py-class docutils literal notranslate"><span class="pre">TextIOWrapper</span></code> et de <a class="reference internal" href="../library/functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a>  dépend de la plateforme et des paramètres régionaux. Comme UTF-8 est utilisé sur la plupart des plateformes Unix, ne pas spécifier l'option <code class="docutils literal notranslate"><span class="pre">encoding</span></code> pour ouvrir des fichiers UTF-8 est une erreur courante. Par exemple :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># BUG: &quot;rb&quot; mode or encoding=&quot;utf-8&quot; should be used.</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;data.json&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>Pour trouver ce type de bogue, un <code class="docutils literal notranslate"><span class="pre">EncodingWarning</span></code> optionnel a été ajouté. Il est levé quand <a class="reference internal" href="../library/sys.html#sys.flags" title="sys.flags"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.flags.warn_default_encoding</span></code></a> est <code class="docutils literal notranslate"><span class="pre">True</span></code> et quand l'encodage utilisé est celui défini par les paramètres régionaux.</p>
<p>L'option <code class="docutils literal notranslate"><span class="pre">-X</span> <span class="pre">warn_default_encoding</span></code> et la variable d’environnement <span class="target" id="index-94"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONWARNDEFAULTENCODING"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONWARNDEFAULTENCODING</span></code></a> ont été ajoutées pour activer cet avertissement.</p>
<p>Voir <a class="reference internal" href="../library/io.html#io-text-encoding"><span class="std std-ref">Text Encoding</span></a> pour plus d'informations.</p>
</section>
</section>
<section id="new-features-related-to-type-hints">
<span id="new-feat-related-type-hints"></span><h2>Nouvelles fonctionnalités reliées aux indications de types<a class="headerlink" href="#new-features-related-to-type-hints" title="Lien permanent vers ce titre">¶</a></h2>
<p>Cette section couvre les changements majeurs touchant le module <a class="reference internal" href="../library/typing.html#module-typing" title="typing: Support for type hints (see :pep:`484`)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">typing</span></code></a> et les indications de types de style <span class="target" id="index-95"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/"><strong>PEP 484</strong></a>.</p>
<section id="pep-604-new-type-union-operator">
<h3>PEP 604 : nouvel opérateur d'union de types<a class="headerlink" href="#pep-604-new-type-union-operator" title="Lien permanent vers ce titre">¶</a></h3>
<p>Un nouvel opérateur d'union de types a été ajouté. Il permet la syntaxe <code class="docutils literal notranslate"><span class="pre">X</span> <span class="pre">|</span> <span class="pre">Y</span></code>. Ceci offre une façon plus propre d'exprimer « soit le type X, soit le type Y » plutôt que d'utiliser <a class="reference internal" href="../library/typing.html#typing.Union" title="typing.Union"><code class="xref py py-data docutils literal notranslate"><span class="pre">typing.Union</span></code></a>, en particulier pour les indications de types.</p>
<p>Dans les versions précédentes de Python, pour appliquer une indication de type à des fonctions qui acceptent des arguments de plusieurs types, <a class="reference internal" href="../library/typing.html#typing.Union" title="typing.Union"><code class="xref py py-data docutils literal notranslate"><span class="pre">typing.Union</span></code></a> était utilisée :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">number</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
    <span class="k">return</span> <span class="n">number</span> <span class="o">**</span> <span class="mi">2</span>
</pre></div>
</div>
<p>Les indications de type peuvent maintenant être écrites de façon plus courte :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">number</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">number</span> <span class="o">**</span> <span class="mi">2</span>
</pre></div>
</div>
<p>Cette nouvelle syntaxe est aussi acceptée comme le second argument de <a class="reference internal" href="../library/functions.html#isinstance" title="isinstance"><code class="xref py py-func docutils literal notranslate"><span class="pre">isinstance()</span></code></a> et de <a class="reference internal" href="../library/functions.html#issubclass" title="issubclass"><code class="xref py py-func docutils literal notranslate"><span class="pre">issubclass()</span></code></a> :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Voir <a class="reference internal" href="../library/stdtypes.html#types-union"><span class="std std-ref">Type Union</span></a> et la <span class="target" id="index-96"></span><a class="pep reference external" href="https://peps.python.org/pep-0604/"><strong>PEP 604</strong></a> pour plus de détails</p>
<p>(contribution de <em>Maggie Moss</em> et <em>Philippe Prados</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41428">bpo-41428</a>, avec ajouts par <em>Yurii Karabas</em> et <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44490">bpo-44490</a>).</p>
</section>
<section id="pep-612-parameter-specification-variables">
<h3>PEP 612 : variables de spécification de paramètres<a class="headerlink" href="#pep-612-parameter-specification-variables" title="Lien permanent vers ce titre">¶</a></h3>
<p>Deux nouvelles options ont été ajoutées au module <a class="reference internal" href="../library/typing.html#module-typing" title="typing: Support for type hints (see :pep:`484`)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">typing</span></code></a> pour améliorer l'information donnée aux vérificateurs de types statiques pour les <code class="docutils literal notranslate"><span class="pre">Callable</span></code> définis dans la <span class="target" id="index-97"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/"><strong>PEP 484</strong></a>.</p>
<p>La première est la variable de spécification de paramètre. Elles sont utilisées pour transférer le type d'un appelable à un autre – un patron de conception souvent utilisé dans les fonctions d'ordre supérieur et dans les décorateurs. Des exemples d'utilisation se trouvent dans <a class="reference internal" href="../library/typing.html#typing.ParamSpec" title="typing.ParamSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.ParamSpec</span></code></a>. Préalablement, il n'y avait pas de façon facile pour annoter les dépendances de types des paramètres de manière aussi précise.</p>
<p>La seconde option est le nouvel opérateur <code class="docutils literal notranslate"><span class="pre">Concatenate</span></code>. Il est utilisé en conjonction avec les variables de spécification de paramètres pour annoter les types d'un appelable d'ordre supérieur qui ajoute ou retire des paramètres à un autre appelable. Des exemples d'utilisation se trouvent dans <a class="reference internal" href="../library/typing.html#typing.Concatenate" title="typing.Concatenate"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Concatenate</span></code></a>.</p>
<p>Voir <a class="reference internal" href="../library/typing.html#typing.Callable" title="typing.Callable"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Callable</span></code></a>, <a class="reference internal" href="../library/typing.html#typing.ParamSpec" title="typing.ParamSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.ParamSpec</span></code></a>, <a class="reference internal" href="../library/typing.html#typing.Concatenate" title="typing.Concatenate"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Concatenate</span></code></a>, <a class="reference internal" href="../library/typing.html#typing.ParamSpecArgs" title="typing.ParamSpecArgs"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.ParamSpecArgs</span></code></a>, <a class="reference internal" href="../library/typing.html#typing.ParamSpecKwargs" title="typing.ParamSpecKwargs"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.ParamSpecKwargs</span></code></a> et la <span class="target" id="index-98"></span><a class="pep reference external" href="https://peps.python.org/pep-0612/"><strong>PEP 612</strong></a> pour plus de détails</p>
<p>(contribution de <em>Ken Jin</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41559">bpo-41559</a>, avec améliorations mineures par <em>Jelle Zijlstra</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43783">bpo-43783</a> ; PEP écrite par <em>Mark Mendoza</em>).</p>
</section>
<section id="pep-613-typealias">
<h3>PEP 613 : <code class="docutils literal notranslate"><span class="pre">TypeAlias</span></code><a class="headerlink" href="#pep-613-typealias" title="Lien permanent vers ce titre">¶</a></h3>
<p>La <span class="target" id="index-99"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/"><strong>PEP 484</strong></a> a ajouté le concept d'alias de types, en exigeant seulement qu'ils soient des assignations non-annotées au niveau du module. Cette simplicité rendait parfois difficile pour les vérificateurs de types de distinguer entre un alias de type et une affectation ordinaire, en particulier quand des références postérieures ou des types invalides étaient impliqués. Comparez :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">StrCache</span> <span class="o">=</span> <span class="s1">&#39;Cache[str]&#39;</span>  <span class="c1"># a type alias</span>
<span class="n">LOG_PREFIX</span> <span class="o">=</span> <span class="s1">&#39;LOG[DEBUG]&#39;</span>  <span class="c1"># a module constant</span>
</pre></div>
</div>
<p>Maintenant le module <a class="reference internal" href="../library/typing.html#module-typing" title="typing: Support for type hints (see :pep:`484`)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">typing</span></code></a> possède une valeur spéciale <code class="xref py py-data docutils literal notranslate"><span class="pre">TypeAlias</span></code> qui permet de déclarer des alias de types de façon plus explicite :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">StrCache</span><span class="p">:</span> <span class="n">TypeAlias</span> <span class="o">=</span> <span class="s1">&#39;Cache[str]&#39;</span>  <span class="c1"># a type alias</span>
<span class="n">LOG_PREFIX</span> <span class="o">=</span> <span class="s1">&#39;LOG[DEBUG]&#39;</span>  <span class="c1"># a module constant</span>
</pre></div>
</div>
<p>Voir la <span class="target" id="index-100"></span><a class="pep reference external" href="https://peps.python.org/pep-0613/"><strong>PEP 613</strong></a> pour plus de détails.</p>
<p>(contribution de <em>Mikhail Golubev</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41923">bpo-41923</a>).</p>
</section>
<section id="pep-647-user-defined-type-guards">
<h3>PEP 647 : gardes de type définies par l'utilisateur<a class="headerlink" href="#pep-647-user-defined-type-guards" title="Lien permanent vers ce titre">¶</a></h3>
<p><code class="xref py py-data docutils literal notranslate"><span class="pre">TypeGuard</span></code> a été ajouté au module <a class="reference internal" href="../library/typing.html#module-typing" title="typing: Support for type hints (see :pep:`484`)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">typing</span></code></a> pour annoter les fonctions de garde de type et améliorer l'information fournie aux vérificateurs de types statiques pendant le raffinage de types. Pour plus d'information, consultez la documentation de <code class="xref py py-data docutils literal notranslate"><span class="pre">TypeGuard</span></code> et la <span class="target" id="index-101"></span><a class="pep reference external" href="https://peps.python.org/pep-0647/"><strong>PEP 647</strong></a>.</p>
<p>(contribution de <em>Ken Jin</em> et <em>Guido van Rossum</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43766">bpo-43766</a>. PEP écrit par <em>Eric Traut</em>).</p>
</section>
</section>
<section id="other-language-changes">
<h2>Autres changements au langage<a class="headerlink" href="#other-language-changes" title="Lien permanent vers ce titre">¶</a></h2>
<ul class="simple">
<li><p>Le type <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a> a une nouvelle méthode <a class="reference internal" href="../library/stdtypes.html#int.bit_count" title="int.bit_count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">int.bit_count()</span></code></a>, qui renvoie le nombre de chiffres uns dans l’expansion binaire d'un entier donné, aussi connue sous le nom de chiffre de population (<em>population count</em>) (contribution de <em>Niklas Fiekas</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=29882">bpo-29882</a>).</p></li>
<li><p>Les vues renvoyées par <a class="reference internal" href="../library/stdtypes.html#dict.keys" title="dict.keys"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dict.keys()</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#dict.values" title="dict.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dict.values()</span></code></a> et <a class="reference internal" href="../library/stdtypes.html#dict.items" title="dict.items"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dict.items()</span></code></a> ont maintenant toutes un attribut <code class="docutils literal notranslate"><span class="pre">mapping</span></code> qui donne un objet <a class="reference internal" href="../library/types.html#types.MappingProxyType" title="types.MappingProxyType"><code class="xref py py-class docutils literal notranslate"><span class="pre">types.MappingProxyType</span></code></a> encapsulant le dictionnaire original (contribution de <em>Dennis Sweeney</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40890">bpo-40890</a>).</p></li>
<li><p><span class="target" id="index-102"></span><a class="pep reference external" href="https://peps.python.org/pep-0618/"><strong>PEP 618</strong></a> : la fonction <a class="reference internal" href="../library/functions.html#zip" title="zip"><code class="xref py py-func docutils literal notranslate"><span class="pre">zip()</span></code></a> a maintenant un argument optionnel <code class="docutils literal notranslate"><span class="pre">strict</span></code>, utilisé pour demander que tous les itérables soient de même longueur.</p></li>
<li><p>Les fonctions d'extensions et les fonctions natives qui prennent des arguments entiers n'acceptent plus les <a class="reference internal" href="../library/decimal.html#decimal.Decimal" title="decimal.Decimal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a>, <a class="reference internal" href="../library/fractions.html#fractions.Fraction" title="fractions.Fraction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Fraction</span></code></a> et autres objets qui ne peuvent pas être convertis en entiers sans perte de précision (par exemple ceux qui ont une méthode <a class="reference internal" href="../reference/datamodel.html#object.__int__" title="object.__int__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__int__()</span></code></a> mais pas une méthode <a class="reference internal" href="../reference/datamodel.html#object.__index__" title="object.__index__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__index__()</span></code></a>) (contribution de <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37999">bpo-37999</a>).</p></li>
<li><p>Si <a class="reference internal" href="../reference/datamodel.html#object.__ipow__" title="object.__ipow__"><code class="xref py py-func docutils literal notranslate"><span class="pre">object.__ipow__()</span></code></a> renvoie <a class="reference internal" href="../library/constants.html#NotImplemented" title="NotImplemented"><code class="xref py py-const docutils literal notranslate"><span class="pre">NotImplemented</span></code></a>, l'opérateur va correctement se rabattre sur <a class="reference internal" href="../reference/datamodel.html#object.__pow__" title="object.__pow__"><code class="xref py py-func docutils literal notranslate"><span class="pre">object.__pow__()</span></code></a> et <a class="reference internal" href="../reference/datamodel.html#object.__rpow__" title="object.__rpow__"><code class="xref py py-func docutils literal notranslate"><span class="pre">object.__rpow__()</span></code></a> tel qu'attendu (contribution d'<em>Alex Shkop</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38302">bpo-38302</a>).</p></li>
<li><p>Les expressions d'affectations peuvent maintenant être utilisées dans les littéraux d'ensembles, dans les compréhensions d'ensembles et dans les indices de séquences (mais pas dans les tranches).</p></li>
<li><p>Les fonctions ont un nouvel attribut <code class="docutils literal notranslate"><span class="pre">__builtins__</span></code> qui est utilisé pour repérer les symboles natifs quand la fonction est exécutée, plutôt que de regarder dans <code class="docutils literal notranslate"><span class="pre">__globals__['__builtins__']</span></code>. L'attribut est initialisé à partir de <code class="docutils literal notranslate"><span class="pre">__globals__[&quot;__builtins__&quot;]</span></code> s'il existe, ou des symboles natifs en cours autrement (contribution de <em>Mark Shannon</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42990">bpo-42990</a>).</p></li>
<li><p>Deux nouvelles fonctions natives – <a class="reference internal" href="../library/functions.html#aiter" title="aiter"><code class="xref py py-func docutils literal notranslate"><span class="pre">aiter()</span></code></a> et <a class="reference internal" href="../library/functions.html#anext" title="anext"><code class="xref py py-func docutils literal notranslate"><span class="pre">anext()</span></code></a> – ont été ajoutées pour fournir les équivalents asynchrones de <a class="reference internal" href="../library/functions.html#iter" title="iter"><code class="xref py py-func docutils literal notranslate"><span class="pre">iter()</span></code></a> et de <a class="reference internal" href="../library/functions.html#next" title="next"><code class="xref py py-func docutils literal notranslate"><span class="pre">next()</span></code></a>, respectivement (contribution de <em>Joshua Bronson</em>, <em>Daniel Pope</em> et <em>Justin Wang</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=31861">bpo-31861</a>).</p></li>
<li><p>Les méthodes statiques (<a class="reference internal" href="../library/functions.html#staticmethod" title="staticmethod"><code class="xref py py-func docutils literal notranslate"><span class="pre">&#64;staticmethod</span></code></a>) et les méthodes de classes (<a class="reference internal" href="../library/functions.html#classmethod" title="classmethod"><code class="xref py py-func docutils literal notranslate"><span class="pre">&#64;classmethod</span></code></a>) héritent maintenant des attributs de méthodes (<code class="docutils literal notranslate"><span class="pre">__module__</span></code>, <code class="docutils literal notranslate"><span class="pre">__name__</span></code>, <code class="docutils literal notranslate"><span class="pre">__qualname__</span></code>, <code class="docutils literal notranslate"><span class="pre">__doc__</span></code>, <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code>) et ont un nouvel attribut <code class="docutils literal notranslate"><span class="pre">__wrapped__</span></code>. De plus, les méthodes statiques sont maintenant appelables en tant que fonctions classiques (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43682">bpo-43682</a>).</p></li>
<li><p>Les annotations des cibles complexes (toutes cibles autre que <code class="docutils literal notranslate"><span class="pre">simple</span> <span class="pre">name</span></code> telles que définies dans la <span class="target" id="index-103"></span><a class="pep reference external" href="https://peps.python.org/pep-0526/"><strong>PEP 526</strong></a>) n'ont plus d'effet à l'exécution avec <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">__future__</span> <span class="pre">import</span> <span class="pre">annotations</span></code> (contribution de <em>Batuhan Taskaya</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42737">bpo-42737</a>).</p></li>
<li><p>Les objets <code class="docutils literal notranslate"><span class="pre">class</span></code> et <code class="docutils literal notranslate"><span class="pre">module</span></code> créent maintenant paresseusement un dictionnaire d'annotations vide sur demande. Les dictionnaires d'annotations sont stockés dans le <code class="docutils literal notranslate"><span class="pre">__dict__</span></code> de l'objet pour garder la retro-compatibilité.  Cela renforce les bonnes pratiques relatives à <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> ; pour plus d'information, voir <a class="reference internal" href="../howto/annotations.html#annotations-howto"><span class="std std-ref">Bonnes pratiques concernant les annotations</span></a> (contribution de <em>Larry Hastings</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43901">bpo-43901</a>).</p></li>
<li><p>Les annotations qui contiennent <code class="docutils literal notranslate"><span class="pre">yield</span></code>, <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code>, <code class="docutils literal notranslate"><span class="pre">await</span></code> ou une expression nommée ne sont plus permises sous <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">__future__</span> <span class="pre">import</span> <span class="pre">annotations</span></code> à cause de leurs effets secondaires (contribution de <em>Batuhan Taskaya</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42725">bpo-42725</a>).</p></li>
<li><p>L'utilisation de variables non liées, de <code class="docutils literal notranslate"><span class="pre">super()</span></code> et d'autres expressions qui peuvent changer le traitement de la table des symboles en tant qu'annotation n'ont plus d'effet sous <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">__future__</span> <span class="pre">import</span> <span class="pre">annotations</span></code> (contribution de <em>Batuhan Taskaya</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42725">bpo-42725</a>).</p></li>
<li><p>Le hachage des valeurs <em>NaN</em> des types <a class="reference internal" href="../library/functions.html#float" title="float"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> et <a class="reference internal" href="../library/decimal.html#decimal.Decimal" title="decimal.Decimal"><code class="xref py py-class docutils literal notranslate"><span class="pre">decimal.Decimal</span></code></a> dépend maintenant de l'identité de l'objet. Préalablement, cette valeur de hachage était toujours <code class="docutils literal notranslate"><span class="pre">0</span></code> alors que les valeurs <em>NaN</em> ne sont pas égales entre elles. Cela pouvait potentiellement entrainer un temps d'exécution quadratique en raison des collisions excessives des valeurs de hachage lors de la création de dictionnaires et d'ensembles qui contiennent plusieurs <em>NaN</em> (contribution de <em>Raymond Hettinger</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43475">bpo-43475</a>).</p></li>
<li><p>A <a class="reference internal" href="../library/exceptions.html#SyntaxError" title="SyntaxError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxError</span></code></a> (instead of a <a class="reference internal" href="../library/exceptions.html#NameError" title="NameError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NameError</span></code></a>) will be raised when deleting
the <a class="reference internal" href="../library/constants.html#debug__" title="__debug__"><code class="xref py py-const docutils literal notranslate"><span class="pre">__debug__</span></code></a> constant.  (Contributed by Donghee Na in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45000">bpo-45000</a>.)</p></li>
<li><p>Les exceptions <a class="reference internal" href="../library/exceptions.html#SyntaxError" title="SyntaxError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxError</span></code></a> ont maintenant des attributs <code class="docutils literal notranslate"><span class="pre">end_lineno</span></code> et <code class="docutils literal notranslate"><span class="pre">end_offset</span></code>. La valeur est <code class="docutils literal notranslate"><span class="pre">None</span></code> quand ils ne peuvent pas être déterminés (contribution de <em>Pablo Galindo</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43914">bpo-43914</a>).</p></li>
</ul>
</section>
<section id="new-modules">
<h2>Nouveaux modules<a class="headerlink" href="#new-modules" title="Lien permanent vers ce titre">¶</a></h2>
<ul class="simple">
<li><p>None.</p></li>
</ul>
</section>
<section id="improved-modules">
<h2>Modules améliorés<a class="headerlink" href="#improved-modules" title="Lien permanent vers ce titre">¶</a></h2>
<section id="asyncio">
<h3><code class="docutils literal notranslate"><span class="pre">asyncio</span></code><a class="headerlink" href="#asyncio" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout de la méthode <code class="xref py py-meth docutils literal notranslate"><span class="pre">connect_accepted_socket()</span></code> manquante (contribution d'<em>Alex Grönholm</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41332">bpo-41332</a>).</p>
</section>
<section id="argparse">
<h3><code class="docutils literal notranslate"><span class="pre">argparse</span></code><a class="headerlink" href="#argparse" title="Lien permanent vers ce titre">¶</a></h3>
<p>L'expression <code class="docutils literal notranslate"><span class="pre">&quot;optional</span> <span class="pre">arguments&quot;</span></code> qui portait à confusion a été remplacée par <code class="docutils literal notranslate"><span class="pre">&quot;options&quot;</span></code> dans le message d'aide d'<code class="docutils literal notranslate"><span class="pre">argparse</span></code>. Certains tests devront être adaptés s'ils dépendent d'une comparaison exacte dans la sortie d'aide (contribution de <em>Raymond Hettinger</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9694">bpo-9694</a>).</p>
</section>
<section id="array">
<h3><code class="docutils literal notranslate"><span class="pre">array</span></code><a class="headerlink" href="#array" title="Lien permanent vers ce titre">¶</a></h3>
<p>La méthode <a class="reference internal" href="../library/array.html#array.array.index" title="array.array.index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">index()</span></code></a> de la classe <a class="reference internal" href="../library/array.html#array.array" title="array.array"><code class="xref py py-class docutils literal notranslate"><span class="pre">array.array</span></code></a> a maintenant les paramètres optionnels <em>start</em> et <em>stop</em> (contribution d'<em>Anders Lorentsen</em> et de <em>Zackery Spytz</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=31956">bpo-31956</a>).</p>
</section>
<section id="asynchat-asyncore-smtpd">
<h3><code class="docutils literal notranslate"><span class="pre">asynchat</span></code>, <code class="docutils literal notranslate"><span class="pre">asyncore</span></code>, <code class="docutils literal notranslate"><span class="pre">smtpd</span></code><a class="headerlink" href="#asynchat-asyncore-smtpd" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ces modules ont étés déclarés obsolètes dans leur documentation de modules depuis Python 3.6. Un <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> au moment de l'importation est maintenant ajouté pour ces trois modules.</p>
</section>
<section id="base64">
<h3><code class="docutils literal notranslate"><span class="pre">base64</span></code><a class="headerlink" href="#base64" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout de <a class="reference internal" href="../library/base64.html#base64.b32hexencode" title="base64.b32hexencode"><code class="xref py py-func docutils literal notranslate"><span class="pre">base64.b32hexencode()</span></code></a> et de <a class="reference internal" href="../library/base64.html#base64.b32hexdecode" title="base64.b32hexdecode"><code class="xref py py-func docutils literal notranslate"><span class="pre">base64.b32hexdecode()</span></code></a> pour prendre en charge l'encodage Base32 avec l'alphabet hexadécimal étendu.</p>
</section>
<section id="bdb">
<h3><code class="docutils literal notranslate"><span class="pre">bdb</span></code><a class="headerlink" href="#bdb" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout de <code class="xref py py-meth docutils literal notranslate"><span class="pre">clearBreakpoints()</span></code> pour supprimer tous les points d'arrêt (contribution d'<em>Irit Katriel</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=24160">bpo-24160</a>).</p>
</section>
<section id="bisect">
<h3><code class="docutils literal notranslate"><span class="pre">bisect</span></code><a class="headerlink" href="#bisect" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout de la possibilité de fournir une fonction <code class="docutils literal notranslate"><span class="pre">key</span></code> aux API dans le module <a class="reference internal" href="../library/bisect.html#module-bisect" title="bisect: Array bisection algorithms for binary searching."><code class="xref py py-mod docutils literal notranslate"><span class="pre">bisect</span></code></a> (contribution de <em>Raymond Hettinger</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4356">bpo-4356</a>).</p>
</section>
<section id="codecs">
<h3><code class="docutils literal notranslate"><span class="pre">codecs</span></code><a class="headerlink" href="#codecs" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout d'une fonction <a class="reference internal" href="../library/codecs.html#codecs.unregister" title="codecs.unregister"><code class="xref py py-func docutils literal notranslate"><span class="pre">codecs.unregister()</span></code></a> pour désinscrire une fonction de recherche de codecs (contribution de <em>Hai Shi</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41842">bpo-41842</a>).</p>
</section>
<section id="collections-abc">
<h3><code class="docutils literal notranslate"><span class="pre">collections.abc</span></code><a class="headerlink" href="#collections-abc" title="Lien permanent vers ce titre">¶</a></h3>
<p>L'attribut <code class="docutils literal notranslate"><span class="pre">__args__</span></code> des <a class="reference internal" href="../library/stdtypes.html#types-genericalias"><span class="std std-ref">génériques paramétrables</span></a> de <a class="reference internal" href="../library/collections.abc.html#collections.abc.Callable" title="collections.abc.Callable"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Callable</span></code></a> est maintenant cohérent avec <a class="reference internal" href="../library/typing.html#typing.Callable" title="typing.Callable"><code class="xref py py-data docutils literal notranslate"><span class="pre">typing.Callable</span></code></a>. Les génériques de <a class="reference internal" href="../library/collections.abc.html#collections.abc.Callable" title="collections.abc.Callable"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Callable</span></code></a> aplatissent maintenant les types des paramètres à l'instar de <a class="reference internal" href="../library/typing.html#typing.Callable" title="typing.Callable"><code class="xref py py-data docutils literal notranslate"><span class="pre">typing.Callable</span></code></a>. Ceci veut dire que <code class="docutils literal notranslate"><span class="pre">collections.abc.Callable[[int,</span> <span class="pre">str],</span> <span class="pre">str]</span></code> aura un attribut <code class="docutils literal notranslate"><span class="pre">__args__</span></code> de valeur <code class="docutils literal notranslate"><span class="pre">(int,</span> <span class="pre">str,</span> <span class="pre">str)</span></code> ; auparavant, il aurait été <code class="docutils literal notranslate"><span class="pre">([int,</span> <span class="pre">str],</span> <span class="pre">str)</span></code>. Pour permettre ce changement, <a class="reference internal" href="../library/types.html#types.GenericAlias" title="types.GenericAlias"><code class="xref py py-class docutils literal notranslate"><span class="pre">types.GenericAlias</span></code></a> peut être dérivée, et une sous-classe sera renvoyée lors de la surcharge  du type <a class="reference internal" href="../library/collections.abc.html#collections.abc.Callable" title="collections.abc.Callable"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Callable</span></code></a>. Prenez note que <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> sera levée pour des formes invalides de paramétrisation de <a class="reference internal" href="../library/collections.abc.html#collections.abc.Callable" title="collections.abc.Callable"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Callable</span></code></a>, ce qui aurait pu passer silencieusement dans Python 3.9 (contribution de <em>Ken Jin</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42195">bpo-42195</a>).</p>
</section>
<section id="contextlib">
<h3><code class="docutils literal notranslate"><span class="pre">contextlib</span></code><a class="headerlink" href="#contextlib" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout d'un gestionnaire de contexte <a class="reference internal" href="../library/contextlib.html#contextlib.aclosing" title="contextlib.aclosing"><code class="xref py py-func docutils literal notranslate"><span class="pre">contextlib.aclosing()</span></code></a> pour fermer de façon sécurisée les générateurs asynchrones et les objets représentants des ressources libérées de façon asynchrone (contribution de <em>Joongi Kim</em> et <em>John Belmonte</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41229">bpo-41229</a>).</p>
<p>Ajout d'un gestionnaire de contexte pour prendre en charge <a class="reference internal" href="../library/contextlib.html#contextlib.nullcontext" title="contextlib.nullcontext"><code class="xref py py-func docutils literal notranslate"><span class="pre">contextlib.nullcontext()</span></code></a> (contribution de <em>Tom Gringauz</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41543">bpo-41543</a>).</p>
<p>Ajout de <code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncContextDecorator</span></code> pour prendre en charge les gestionnaires de contexte asynchrones en tant que décorateurs.</p>
</section>
<section id="curses">
<h3><code class="docutils literal notranslate"><span class="pre">curses</span></code><a class="headerlink" href="#curses" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les fonctions de couleurs étendues ajoutées dans <em>ncurses</em> 6.1 sont utilisées de façon transparente par <a class="reference internal" href="../library/curses.html#curses.color_content" title="curses.color_content"><code class="xref py py-func docutils literal notranslate"><span class="pre">curses.color_content()</span></code></a>, <a class="reference internal" href="../library/curses.html#curses.init_color" title="curses.init_color"><code class="xref py py-func docutils literal notranslate"><span class="pre">curses.init_color()</span></code></a>, <a class="reference internal" href="../library/curses.html#curses.init_pair" title="curses.init_pair"><code class="xref py py-func docutils literal notranslate"><span class="pre">curses.init_pair()</span></code></a> et <a class="reference internal" href="../library/curses.html#curses.pair_content" title="curses.pair_content"><code class="xref py py-func docutils literal notranslate"><span class="pre">curses.pair_content()</span></code></a>. Une nouvelle fonction, <a class="reference internal" href="../library/curses.html#curses.has_extended_color_support" title="curses.has_extended_color_support"><code class="xref py py-func docutils literal notranslate"><span class="pre">curses.has_extended_color_support()</span></code></a>, indique si la prise en charge des couleurs étendues est fournie par la bibliothèque <em>ncurses</em> sous-jacente (contribution de <em>Jeffrey Kintscher</em> et de <em>Hans Petter Jansson</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36982">bpo-36982</a>).</p>
<p>Les constantes <code class="docutils literal notranslate"><span class="pre">BUTTON5_*</span></code> sont maintenant exposées dans le module <a class="reference internal" href="../library/curses.html#module-curses" title="curses: An interface to the curses library, providing portable terminal handling. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">curses</span></code></a> si elles sont fournies par la bibliothèque <em>curses</em> sous-jacente (contribution de <em>Zackery Spytz</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39273">bpo-39273</a>).</p>
</section>
<section id="dataclasses">
<h3><code class="docutils literal notranslate"><span class="pre">dataclasses</span></code><a class="headerlink" href="#dataclasses" title="Lien permanent vers ce titre">¶</a></h3>
<section id="slots">
<h4><code class="docutils literal notranslate"><span class="pre">__slots__</span></code><a class="headerlink" href="#slots" title="Lien permanent vers ce titre">¶</a></h4>
<p>Ajout du paramètre <code class="docutils literal notranslate"><span class="pre">slots</span></code> dans le décorateur <a class="reference internal" href="../library/dataclasses.html#dataclasses.dataclass" title="dataclasses.dataclass"><code class="xref py py-func docutils literal notranslate"><span class="pre">dataclasses.dataclass()</span></code></a> (contribution de <em>Yurii Karabas</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42269">bpo-42269</a>).</p>
</section>
<section id="keyword-only-fields">
<h4>Champs obligatoirement nommés<a class="headerlink" href="#keyword-only-fields" title="Lien permanent vers ce titre">¶</a></h4>
<p>Les classes de données (<code class="docutils literal notranslate"><span class="pre">dataclass</span></code>) prennent maintenant en charge les champs obligatoirement nommés dans la méthode <code class="docutils literal notranslate"><span class="pre">__init__</span></code> générée. Il y a plusieurs façons de spécifier les champs obligatoirement nommés.</p>
<p>Vous pouvez indiquer que tous les champs sont obligatoirement nommés :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>

<span class="nd">@dataclass</span><span class="p">(</span><span class="n">kw_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Birthday</span><span class="p">:</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">birthday</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span>
</pre></div>
</div>
<p>Les paramètres <code class="docutils literal notranslate"><span class="pre">name</span></code> et <code class="docutils literal notranslate"><span class="pre">birthday</span></code> sont tous deux obligatoirement nommés dans la méthode <code class="docutils literal notranslate"><span class="pre">__init__</span></code> générée.</p>
<p>Pour chaque champ, vous pouvez indiquer s'il est obligatoirement nommé :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span><span class="p">,</span> <span class="n">field</span>

<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Birthday</span><span class="p">:</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">birthday</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">kw_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Ici, seulement <code class="docutils literal notranslate"><span class="pre">birthday</span></code> est obligatoirement nommé. Si vous assignez <code class="docutils literal notranslate"><span class="pre">kw_only</span></code> sur un champ particulier, notez qu'il y a des règles concernant l'ordre des champs puisque les champs obligatoirement nommés doivent suivre les champs optionnellement nommés. Voir la documentation de <code class="docutils literal notranslate"><span class="pre">dataclass</span></code> pour plus de détails.</p>
<p>Vous pouvez aussi indiquer que tous les champs qui suivent un marqueur <code class="docutils literal notranslate"><span class="pre">KW_ONLY</span></code> sont obligatoirement nommés. Ceci sera probablement l'utilisation la plus commune :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span><span class="p">,</span> <span class="n">KW_ONLY</span>

<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Point</span><span class="p">:</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">_</span><span class="p">:</span> <span class="n">KW_ONLY</span>
    <span class="n">z</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">t</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
</pre></div>
</div>
<p>Here, <code class="docutils literal notranslate"><span class="pre">z</span></code> and <code class="docutils literal notranslate"><span class="pre">t</span></code> are keyword-only parameters, while <code class="docutils literal notranslate"><span class="pre">x</span></code> and
<code class="docutils literal notranslate"><span class="pre">y</span></code> are not.
(Contributed by Eric V. Smith in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43532">bpo-43532</a>.)</p>
</section>
</section>
<section id="distutils">
<span id="distutils-deprecated"></span><h3><code class="docutils literal notranslate"><span class="pre">distutils</span></code><a class="headerlink" href="#distutils" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le paquet <code class="docutils literal notranslate"><span class="pre">distutil</span></code> est entièrement obsolète et sera retiré dans Python 3.12. Ses fonctionnalités pour spécifier la construction de paquets sont déjà complètement remplacées par les paquets tierce-parties  <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> et <code class="docutils literal notranslate"><span class="pre">packaging</span></code>. Les autres API régulièrement utilisées sont disponibles ailleurs dans la bibliothèque standard (tel que dans <a class="reference internal" href="../library/platform.html#module-platform" title="platform: Retrieves as much platform identifying data as possible."><code class="xref py py-mod docutils literal notranslate"><span class="pre">platform</span></code></a>, <a class="reference internal" href="../library/shutil.html#module-shutil" title="shutil: High-level file operations, including copying."><code class="xref py py-mod docutils literal notranslate"><span class="pre">shutil</span></code></a>, <a class="reference internal" href="../library/subprocess.html#module-subprocess" title="subprocess: Subprocess management."><code class="xref py py-mod docutils literal notranslate"><span class="pre">subprocess</span></code></a> ou <a class="reference internal" href="../library/sysconfig.html#module-sysconfig" title="sysconfig: Python's configuration information"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sysconfig</span></code></a>). Il n'est pas prévu de migrer d'autres fonctionnalités de <code class="docutils literal notranslate"><span class="pre">distutils</span></code>, aussi les applications qui utilisent d'autres fonctions du module doivent faire des copies privées du code. Voir la discussion dans la <span class="target" id="index-104"></span><a class="pep reference external" href="https://peps.python.org/pep-0632/"><strong>PEP 632</strong></a>.</p>
<p>La commande <code class="docutils literal notranslate"><span class="pre">bdist_wininst</span></code> qui est obsolète depuis Python 3.8 a été retirée. La commande <code class="docutils literal notranslate"><span class="pre">bdist_wheel</span></code> est maintenant recommandée pour distribuer des paquets binaires sous Windows (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42802">bpo-42802</a>).</p>
</section>
<section id="doctest">
<h3><code class="docutils literal notranslate"><span class="pre">doctest</span></code><a class="headerlink" href="#doctest" title="Lien permanent vers ce titre">¶</a></h3>
<p>Quand un module ne définit pas <code class="docutils literal notranslate"><span class="pre">__loader__</span></code>, <code class="docutils literal notranslate"><span class="pre">__spec__.loader</span></code> est utilisé (contribution de <em>Brett Cannon</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42133">bpo-42133</a>).</p>
</section>
<section id="encodings">
<h3><code class="docutils literal notranslate"><span class="pre">encodings</span></code><a class="headerlink" href="#encodings" title="Lien permanent vers ce titre">¶</a></h3>
<p>La fonction <code class="xref py py-func docutils literal notranslate"><span class="pre">encodings.normalize_encoding()</span></code> ignore maintenant les caractères non ASCII (contribution de <em>Hai Shi</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39337">bpo-39337</a>).</p>
</section>
<section id="enum">
<h3>enum<a class="headerlink" href="#enum" title="Lien permanent vers ce titre">¶</a></h3>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code> <code class="xref py py-func docutils literal notranslate"><span class="pre">__repr__()</span></code> now returns <code class="docutils literal notranslate"><span class="pre">enum_name.member_name</span></code> and
<code class="xref py py-func docutils literal notranslate"><span class="pre">__str__()</span></code> now returns <code class="docutils literal notranslate"><span class="pre">member_name</span></code>.  Stdlib enums available as
module constants have a <a class="reference internal" href="../library/functions.html#repr" title="repr"><code class="xref py py-func docutils literal notranslate"><span class="pre">repr()</span></code></a> of <code class="docutils literal notranslate"><span class="pre">module_name.member_name</span></code>.
(Contributed by Ethan Furman in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40066">bpo-40066</a>.)</p>
<p>Add <a class="reference internal" href="../library/enum.html#enum.StrEnum" title="enum.StrEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">enum.StrEnum</span></code></a> for enums where all members are strings.
(Contributed by Ethan Furman in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41816">bpo-41816</a>.)</p>
</section>
<section id="fileinput">
<h3><code class="docutils literal notranslate"><span class="pre">fileinput</span></code><a class="headerlink" href="#fileinput" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout des paramètres <code class="docutils literal notranslate"><span class="pre">encoding</span></code> et <code class="docutils literal notranslate"><span class="pre">errors</span></code> dans <a class="reference internal" href="../library/fileinput.html#fileinput.input" title="fileinput.input"><code class="xref py py-func docutils literal notranslate"><span class="pre">fileinput.input()</span></code></a> et dans <a class="reference internal" href="../library/fileinput.html#fileinput.FileInput" title="fileinput.FileInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">fileinput.FileInput</span></code></a> (contribution d'<em>Inada Naoki</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43712">bpo-43712</a>).</p>
<p><a class="reference internal" href="../library/fileinput.html#fileinput.hook_compressed" title="fileinput.hook_compressed"><code class="xref py py-func docutils literal notranslate"><span class="pre">fileinput.hook_compressed()</span></code></a> renvoie maintenant un objet <code class="xref py py-class docutils literal notranslate"><span class="pre">TextIOWrapper</span></code> quand <code class="docutils literal notranslate"><span class="pre">mode</span></code> est <code class="docutils literal notranslate"><span class="pre">&quot;r&quot;</span></code> et que le fichier est compressé, comme pour les fichiers non compressés (contribution d'<em>Inada Naoki</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5758">bpo-5758</a>).</p>
</section>
<section id="faulthandler">
<h3><code class="docutils literal notranslate"><span class="pre">faulthandler</span></code><a class="headerlink" href="#faulthandler" title="Lien permanent vers ce titre">¶</a></h3>
<p>Le module <a class="reference internal" href="../library/faulthandler.html#module-faulthandler" title="faulthandler: Dump the Python traceback."><code class="xref py py-mod docutils literal notranslate"><span class="pre">faulthandler</span></code></a> détecte maintenant si une erreur fatale s'est produite pendant un passage du ramasse-miettes (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44466">bpo-44466</a>).</p>
</section>
<section id="gc">
<h3><code class="docutils literal notranslate"><span class="pre">gc</span></code><a class="headerlink" href="#gc" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout de fonctions de rappels d'audit pour <a class="reference internal" href="../library/gc.html#gc.get_objects" title="gc.get_objects"><code class="xref py py-func docutils literal notranslate"><span class="pre">gc.get_objects()</span></code></a>, <a class="reference internal" href="../library/gc.html#gc.get_referrers" title="gc.get_referrers"><code class="xref py py-func docutils literal notranslate"><span class="pre">gc.get_referrers()</span></code></a> et <a class="reference internal" href="../library/gc.html#gc.get_referents" title="gc.get_referents"><code class="xref py py-func docutils literal notranslate"><span class="pre">gc.get_referents()</span></code></a> (contribution de <em>Pablo Galindo</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43439">bpo-43439</a>).</p>
</section>
<section id="glob">
<h3><code class="docutils literal notranslate"><span class="pre">glob</span></code><a class="headerlink" href="#glob" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout des paramètres <code class="docutils literal notranslate"><span class="pre">root_dir</span></code> et <code class="docutils literal notranslate"><span class="pre">dir_fd</span></code> dans <a class="reference internal" href="../library/glob.html#glob.glob" title="glob.glob"><code class="xref py py-func docutils literal notranslate"><span class="pre">glob()</span></code></a> et dans <a class="reference internal" href="../library/glob.html#glob.iglob" title="glob.iglob"><code class="xref py py-func docutils literal notranslate"><span class="pre">iglob()</span></code></a> pour permettre la spécification du répertoire racine utilisé pour la recherche (contribution de <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38144">bpo-38144</a>).</p>
</section>
<section id="hashlib">
<h3><code class="docutils literal notranslate"><span class="pre">hashlib</span></code><a class="headerlink" href="#hashlib" title="Lien permanent vers ce titre">¶</a></h3>
<p>La version minimale d'<em>OpenSSL</em> pour le module <code class="docutils literal notranslate"><span class="pre">hashlib</span></code> est maintenant 1.1.1 (contribution de <em>Christian Heimes</em> dans <span class="target" id="index-105"></span><a class="pep reference external" href="https://peps.python.org/pep-0644/"><strong>PEP 644</strong></a> et dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43669">bpo-43669</a>).</p>
<p>Le module <em>hashlib</em> offre une prise en charge préliminaire pour <em>OpenSSL</em> 3.0.0 (contribution de <em>Christian Heimes</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38820">bpo-38820</a> et autres tickets).</p>
<p>Le repli vers la version en pur Python de <a class="reference internal" href="../library/hashlib.html#hashlib.pbkdf2_hmac" title="hashlib.pbkdf2_hmac"><code class="xref py py-func docutils literal notranslate"><span class="pre">pbkdf2_hmac()</span></code></a> est obsolète. Dorénavant, <code class="docutils literal notranslate"><span class="pre">PBKDF2-HMAC</span></code> n'est disponible que si Python a été compilé avec la prise en charge d'<em>OpenSSL</em> (contribution de <em>Christian Heimes</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43880">bpo-43880</a>).</p>
</section>
<section id="hmac">
<h3><code class="docutils literal notranslate"><span class="pre">hmac</span></code><a class="headerlink" href="#hmac" title="Lien permanent vers ce titre">¶</a></h3>
<p>L'implémentation interne du module <code class="docutils literal notranslate"><span class="pre">hmac</span></code> utilise maintenant <em>HMAC</em> d'<em>OpenSSL</em> (contribution de <em>Christian Heimes</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40645">bpo-40645</a>).</p>
</section>
<section id="idle-and-idlelib">
<h3>IDLE et <code class="docutils literal notranslate"><span class="pre">idlelib</span></code><a class="headerlink" href="#idle-and-idlelib" title="Lien permanent vers ce titre">¶</a></h3>
<p>IDLE invoque maintenant <a class="reference internal" href="../library/sys.html#sys.excepthook" title="sys.excepthook"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.excepthook()</span></code></a> (lorsque lancé sans <code class="docutils literal notranslate"><span class="pre">'-n'</span></code>). Auparavant, les fonctions de rappel définies par l'utilisateur étaient ignorées (contribution par <em>Ken Hilton</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43008">bpo-43008</a>).</p>
<p>Rearrange the settings dialog.  Split the General tab into Windows
and Shell/Ed tabs.  Move help sources, which extend the Help menu, to the
Extensions tab.  Make space for new options and shorten the dialog. The
latter makes the dialog better fit small screens.  (Contributed by Terry Jan
Reedy in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40468">bpo-40468</a>.)  Move the indent space setting from the Font tab to
the new Windows tab.  (Contributed by Mark Roseman and Terry Jan Reedy in
<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33962">bpo-33962</a>.)</p>
<p>Les changements ci-dessus ont été rétro-portés dans le cadre de la maintenance de 3.9.</p>
<p>Ajout d'une barre de côté à la console. Déplacement de l'invite de commande principale (<code class="docutils literal notranslate"><span class="pre">&gt;&gt;&gt;</span></code>) vers cette barre. Ajout des invites secondaires (<code class="docutils literal notranslate"><span class="pre">...</span></code>) à la barre de côté. Le clic de gauche et le glisser optionnel sélectionnent une ou plusieurs lignes de texte, tout comme dans la barre de numéros de ligne de la fenêtre d'édition. Le clic droit après la sélection de lignes de texte affiche un menu contextuel pour copier avec invites (<em>'copy with prompts'</em>). Ceci combine les invites de la barre de côté avec le texte sélectionné. Cette option apparait aussi dans le menu contextuel pour le texte (contribution de <em>Tal Einat</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37903">bpo-37903</a>).</p>
<p>Utilisation d'espaces plutôt que des tabulations pour indenter le code interactif. Ceci donne au code interactif la « bonne apparence ». Cette fonctionnalité est fortement corrélée à l'ajout de la barre de côté de la console (contribution de <em>Terry Jan Reedy</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37892">bpo-37892</a>).</p>
<p>Coloration des nouveaux <a class="reference internal" href="../reference/lexical_analysis.html#soft-keywords"><span class="std std-ref">mots clés ad-hoc</span></a> <a class="reference internal" href="../reference/compound_stmts.html#match"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">match</span></code></a>, <a class="reference internal" href="../reference/compound_stmts.html#match"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">case</span></code></a> et <a class="reference internal" href="../reference/compound_stmts.html#wildcard-patterns"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">_</span></code></a> dans les instructions de filtrage par motifs (<em>pattern matching</em>). Par contre, cette coloration n'est pas parfaite et elle sera incorrecte dans quelques rares cas, y-compris certains <code class="docutils literal notranslate"><span class="pre">_</span></code> dans des instructions <code class="docutils literal notranslate"><span class="pre">case</span></code> (contribution de Tal Einat dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44010">bpo-44010</a>).</p>
<p>Nouveau dans les versions de maintenance 3.10.</p>
<p>Apply syntax highlighting to <code class="docutils literal notranslate"><span class="pre">.pyi</span></code> files. (Contributed by Alex
Waygood and Terry Jan Reedy in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45447">bpo-45447</a>.)</p>
<p>Include prompts when saving Shell with inputs and outputs.
(Contributed by Terry Jan Reedy in <a class="reference external" href="https://github.com/python/cpython/issues/95191">gh-95191</a>.)</p>
</section>
<section id="importlib-metadata">
<h3><code class="docutils literal notranslate"><span class="pre">importlib.metadata</span></code><a class="headerlink" href="#importlib-metadata" title="Lien permanent vers ce titre">¶</a></h3>
<p>Équivalence de fonctionnalités avec <code class="docutils literal notranslate"><span class="pre">importlib_metadata</span></code> 4.6 (<a class="reference external" href="https://importlib-metadata.readthedocs.io/en/latest/history.html">historique</a>).</p>
<p>Les <a class="reference internal" href="../library/importlib.metadata.html#entry-points"><span class="std std-ref">points d'entrée de importlib.metadata</span></a> offrent maintenant une interface plus agréable pour choisir les points d'entrée par groupe et par nom par l'intermédiaire d'une nouvelle classe <code class="xref py py-class docutils literal notranslate"><span class="pre">importlib.metadata.EntryPoints</span></code>. Voir la rubrique Note sur la Compatibilité (<em>Compatibility Note</em>) dans la documentation du module <code class="docutils literal notranslate"><span class="pre">importlib.metadata</span></code> pour plus d'information sur son utilisation et ce qui devient obsolète.</p>
<p>Ajout de <code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.metadata.packages_distributions()</span></code> pour résoudre les modules et paquets Python du niveau racine vers leur <code class="xref py py-class docutils literal notranslate"><span class="pre">importlib.metadata.Distribution</span></code>.</p>
</section>
<section id="inspect">
<h3><code class="docutils literal notranslate"><span class="pre">inspect</span></code><a class="headerlink" href="#inspect" title="Lien permanent vers ce titre">¶</a></h3>
<p>Quand un module ne définit pas <code class="docutils literal notranslate"><span class="pre">__loader__</span></code>, <code class="docutils literal notranslate"><span class="pre">__spec__.loader</span></code> est utilisé (contribution de <em>Brett Cannon</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42133">bpo-42133</a>).</p>
<p>Ajout de <a class="reference internal" href="../library/inspect.html#inspect.get_annotations" title="inspect.get_annotations"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.get_annotations()</span></code></a> qui calcule les annotations définies sur un objet de façon sécuritaire. Elle contourne les difficultés d’accéder aux annotations de différents types d'objets et présume très peu de l'objet examiné. <a class="reference internal" href="../library/inspect.html#inspect.get_annotations" title="inspect.get_annotations"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.get_annotations()</span></code></a> peut également convertir pour vous les annotations contenues dans des chaînes de caractères en objets. <a class="reference internal" href="../library/inspect.html#inspect.get_annotations" title="inspect.get_annotations"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.get_annotations()</span></code></a> est maintenant considérée comme la meilleure pratique pour accéder au dictionnaire d'annotations de tout objet qui prend en charge les annotations ; pour d'autre information sur les meilleures pratiques relatives aux annotations, voir <a class="reference internal" href="../howto/annotations.html#annotations-howto"><span class="std std-ref">Bonnes pratiques concernant les annotations</span></a>. Dans le même esprit, <a class="reference internal" href="../library/inspect.html#inspect.signature" title="inspect.signature"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.signature()</span></code></a>, <a class="reference internal" href="../library/inspect.html#inspect.Signature.from_callable" title="inspect.Signature.from_callable"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.Signature.from_callable()</span></code></a> et <code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.Signature.from_function()</span></code> appellent maintenant <a class="reference internal" href="../library/inspect.html#inspect.get_annotations" title="inspect.get_annotations"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.get_annotations()</span></code></a> pour récupérer les annotations. Ceci veut dire que <a class="reference internal" href="../library/inspect.html#inspect.signature" title="inspect.signature"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.signature()</span></code></a> et <a class="reference internal" href="../library/inspect.html#inspect.Signature.from_callable" title="inspect.Signature.from_callable"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.Signature.from_callable()</span></code></a> peuvent maintenant convertir pour vous les annotations contenues dans des chaînes de caractères en objets (contribution de <em>Larry Hastings</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43817">bpo-43817</a>).</p>
</section>
<section id="itertools">
<h3>itertools<a class="headerlink" href="#itertools" title="Lien permanent vers ce titre">¶</a></h3>
<p>Add <a class="reference internal" href="../library/itertools.html#itertools.pairwise" title="itertools.pairwise"><code class="xref py py-func docutils literal notranslate"><span class="pre">itertools.pairwise()</span></code></a>.
(Contributed by Raymond Hettinger in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38200">bpo-38200</a>.)</p>
</section>
<section id="linecache">
<h3><code class="docutils literal notranslate"><span class="pre">linecache</span></code><a class="headerlink" href="#linecache" title="Lien permanent vers ce titre">¶</a></h3>
<p>Quand un module ne définit pas <code class="docutils literal notranslate"><span class="pre">__loader__</span></code>, <code class="docutils literal notranslate"><span class="pre">__spec__.loader</span></code> est utilisé (contribution de <em>Brett Cannon</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42133">bpo-42133</a>).</p>
</section>
<section id="os">
<h3><code class="docutils literal notranslate"><span class="pre">os</span></code><a class="headerlink" href="#os" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout de la prise en charge de <em>VxWorks RTOS</em> dans <a class="reference internal" href="../library/os.html#os.cpu_count" title="os.cpu_count"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.cpu_count()</span></code></a> (contribution de <em>Peixing Xin</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41440">bpo-41440</a>).</p>
<p>Ajout d'une nouvelle fonction <a class="reference internal" href="../library/os.html#os.eventfd" title="os.eventfd"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.eventfd()</span></code></a> et des fonctions utilitaires associées pour encapsuler l'appel système <code class="docutils literal notranslate"><span class="pre">eventfd2</span></code> sur Linux (contribution de <em>Christian Heimes</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41001">bpo-41001</a>).</p>
<p>Ajout de <a class="reference internal" href="../library/os.html#os.splice" title="os.splice"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.splice()</span></code></a> qui permet de déplacer des données entre deux descripteurs de fichiers sans copie entre les espaces noyau et utilisateur. Un des descripteurs de fichiers doit référencer un tube (<em>pipe</em>)  (contribution de <em>Pablo Galindo</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41625">bpo-41625</a>).</p>
<p>Add <a class="reference internal" href="../library/os.html#os.O_EVTONLY" title="os.O_EVTONLY"><code class="xref py py-const docutils literal notranslate"><span class="pre">O_EVTONLY</span></code></a>, <a class="reference internal" href="../library/os.html#os.O_FSYNC" title="os.O_FSYNC"><code class="xref py py-const docutils literal notranslate"><span class="pre">O_FSYNC</span></code></a>, <a class="reference internal" href="../library/os.html#os.O_SYMLINK" title="os.O_SYMLINK"><code class="xref py py-const docutils literal notranslate"><span class="pre">O_SYMLINK</span></code></a>
and <a class="reference internal" href="../library/os.html#os.O_NOFOLLOW_ANY" title="os.O_NOFOLLOW_ANY"><code class="xref py py-const docutils literal notranslate"><span class="pre">O_NOFOLLOW_ANY</span></code></a> for macOS.
(Contributed by Donghee Na in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43106">bpo-43106</a>.)</p>
</section>
<section id="os-path">
<h3><code class="docutils literal notranslate"><span class="pre">os.path</span></code><a class="headerlink" href="#os-path" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference internal" href="../library/os.path.html#os.path.realpath" title="os.path.realpath"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.path.realpath()</span></code></a> accepte maintenant l'argument nommé <em>strict</em>. Lorsqu'il est <code class="docutils literal notranslate"><span class="pre">True</span></code>, une <a class="reference internal" href="../library/exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> est levée si le chemin n'existe pas ou si une boucle de liens symboliques est rencontrée (contribution de <em>Barney Gale</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43757">bpo-43757</a>).</p>
</section>
<section id="pathlib">
<h3><code class="docutils literal notranslate"><span class="pre">pathlib</span></code><a class="headerlink" href="#pathlib" title="Lien permanent vers ce titre">¶</a></h3>
<p>Add slice support to <a class="reference internal" href="../library/pathlib.html#pathlib.PurePath.parents" title="pathlib.PurePath.parents"><code class="xref py py-attr docutils literal notranslate"><span class="pre">PurePath.parents</span></code></a>.
(Contributed by Joshua Cannon in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35498">bpo-35498</a>.)</p>
<p>Add negative indexing support to <a class="reference internal" href="../library/pathlib.html#pathlib.PurePath.parents" title="pathlib.PurePath.parents"><code class="xref py py-attr docutils literal notranslate"><span class="pre">PurePath.parents</span></code></a>.
(Contributed by Yaroslav Pankovych in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=21041">bpo-21041</a>.)</p>
<p>Ajout de la méthode <a class="reference internal" href="../library/pathlib.html#pathlib.Path.hardlink_to" title="pathlib.Path.hardlink_to"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Path.hardlink_to</span></code></a> qui remplace <code class="xref py py-meth docutils literal notranslate"><span class="pre">link_to()</span></code>. L'ordre des arguments de la nouvelle méthode est le même que <a class="reference internal" href="../library/pathlib.html#pathlib.Path.symlink_to" title="pathlib.Path.symlink_to"><code class="xref py py-meth docutils literal notranslate"><span class="pre">symlink_to()</span></code></a> (contribution de <em>Barney Gale</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39950">bpo-39950</a>).</p>
<p><a class="reference internal" href="../library/pathlib.html#pathlib.Path.stat" title="pathlib.Path.stat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pathlib.Path.stat()</span></code></a> et <a class="reference internal" href="../library/pathlib.html#pathlib.Path.chmod" title="pathlib.Path.chmod"><code class="xref py py-meth docutils literal notranslate"><span class="pre">chmod()</span></code></a> acceptent maintenant l'argument nommé <em>follow_symlinks</em> pour rester cohérent avec les fonctions correspondantes dans le module <a class="reference internal" href="../library/os.html#module-os" title="os: Miscellaneous operating system interfaces."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code></a> (contribution de <em>Barney Gale</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39906">bpo-39906</a>).</p>
</section>
<section id="platform">
<h3><code class="docutils literal notranslate"><span class="pre">platform</span></code><a class="headerlink" href="#platform" title="Lien permanent vers ce titre">¶</a></h3>
<p>Add <a class="reference internal" href="../library/platform.html#platform.freedesktop_os_release" title="platform.freedesktop_os_release"><code class="xref py py-func docutils literal notranslate"><span class="pre">platform.freedesktop_os_release()</span></code></a> to retrieve operation system
identification from <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/os-release.html">freedesktop.org os-release</a> standard file.
(Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=28468">bpo-28468</a>.)</p>
</section>
<section id="pprint">
<h3><code class="docutils literal notranslate"><span class="pre">pprint</span></code><a class="headerlink" href="#pprint" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference internal" href="../library/pprint.html#pprint.pprint" title="pprint.pprint"><code class="xref py py-func docutils literal notranslate"><span class="pre">pprint.pprint()</span></code></a> accepte maintenant le nouvel argument nommé <code class="docutils literal notranslate"><span class="pre">underscore_numbers</span></code> (contribution de <em>sblondon</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42914">bpo-42914</a>).</p>
<p><a class="reference internal" href="../library/pprint.html#module-pprint" title="pprint: Data pretty printer."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pprint</span></code></a> peut maintenant afficher élégamment les instances de <a class="reference internal" href="../library/dataclasses.html#dataclasses.dataclass" title="dataclasses.dataclass"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataclasses.dataclass</span></code></a> (contribution de <em>Lewis Gaul</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43080">bpo-43080</a>).</p>
</section>
<section id="py-compile">
<h3><code class="docutils literal notranslate"><span class="pre">py_compile</span></code><a class="headerlink" href="#py-compile" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout de l'option de ligne de commande <code class="docutils literal notranslate"><span class="pre">--quiet</span></code> à l'interface de <a class="reference internal" href="../library/py_compile.html#module-py_compile" title="py_compile: Generate byte-code files from Python source files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">py_compile</span></code></a> (contribution de <em>Gregory Schevchenko</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38731">bpo-38731</a>).</p>
</section>
<section id="pyclbr">
<h3><code class="docutils literal notranslate"><span class="pre">pyclbr</span></code><a class="headerlink" href="#pyclbr" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout d'un attribut <code class="docutils literal notranslate"><span class="pre">end_lineno</span></code> aux objets <code class="docutils literal notranslate"><span class="pre">Function</span></code> et <code class="docutils literal notranslate"><span class="pre">Class</span></code> dans l'arbre renvoyé par <code class="xref py py-func docutils literal notranslate"><span class="pre">pyclbr.readline()</span></code> et <code class="xref py py-func docutils literal notranslate"><span class="pre">pyclbr.readline_ex()</span></code>. Il complète l'attribut <code class="docutils literal notranslate"><span class="pre">lineno</span></code> déjà existant (contribution d'<em>Aviral Srivastava</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38307">bpo-38307</a>).</p>
</section>
<section id="shelve">
<h3><code class="docutils literal notranslate"><span class="pre">shelve</span></code><a class="headerlink" href="#shelve" title="Lien permanent vers ce titre">¶</a></h3>
<p>The <a class="reference internal" href="../library/shelve.html#module-shelve" title="shelve: Python object persistence."><code class="xref py py-mod docutils literal notranslate"><span class="pre">shelve</span></code></a> module now uses <a class="reference internal" href="../library/pickle.html#pickle.DEFAULT_PROTOCOL" title="pickle.DEFAULT_PROTOCOL"><code class="xref py py-const docutils literal notranslate"><span class="pre">pickle.DEFAULT_PROTOCOL</span></code></a> by default
instead of <a class="reference internal" href="../library/pickle.html#module-pickle" title="pickle: Convert Python objects to streams of bytes and back."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code></a> protocol <code class="docutils literal notranslate"><span class="pre">3</span></code> when creating shelves.
(Contributed by Zackery Spytz in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34204">bpo-34204</a>.)</p>
</section>
<section id="statistics">
<h3><code class="docutils literal notranslate"><span class="pre">statistics</span></code><a class="headerlink" href="#statistics" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout des fonctions <a class="reference internal" href="../library/statistics.html#statistics.covariance" title="statistics.covariance"><code class="xref py py-func docutils literal notranslate"><span class="pre">covariance()</span></code></a>, <a class="reference internal" href="../library/statistics.html#statistics.correlation" title="statistics.correlation"><code class="xref py py-func docutils literal notranslate"><span class="pre">correlation()</span></code></a> (corrélation de Pearson) et <a class="reference internal" href="../library/statistics.html#statistics.linear_regression" title="statistics.linear_regression"><code class="xref py py-func docutils literal notranslate"><span class="pre">linear_regression()</span></code></a> (régression linéaire simple) (contribution de <em>Tymoteusz Wołodźko</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38490">bpo-38490</a>).</p>
</section>
<section id="site">
<h3><code class="docutils literal notranslate"><span class="pre">site</span></code><a class="headerlink" href="#site" title="Lien permanent vers ce titre">¶</a></h3>
<p>Quand un module ne définit pas <code class="docutils literal notranslate"><span class="pre">__loader__</span></code>, <code class="docutils literal notranslate"><span class="pre">__spec__.loader</span></code> est utilisé (contribution de <em>Brett Cannon</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42133">bpo-42133</a>).</p>
</section>
<section id="socket">
<h3><code class="docutils literal notranslate"><span class="pre">socket</span></code><a class="headerlink" href="#socket" title="Lien permanent vers ce titre">¶</a></h3>
<p>L'exception <a class="reference internal" href="../library/socket.html#socket.timeout" title="socket.timeout"><code class="xref py py-exc docutils literal notranslate"><span class="pre">socket.timeout</span></code></a> est maintenant un alias de <a class="reference internal" href="../library/exceptions.html#TimeoutError" title="TimeoutError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TimeoutError</span></code></a> (contribution de <em>Christian Heimes</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42413">bpo-42413</a>).</p>
<p>Ajout d'une option pour créer des connecteurs (<em>socket</em>) <em>MPTCP</em> avec <code class="docutils literal notranslate"><span class="pre">IPPROTO_MPTCP</span></code> (contribution de <em>Rui Cunha</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43571">bpo-43571</a>).</p>
<p>Ajout de l'option <code class="docutils literal notranslate"><span class="pre">IP_RECVTOS</span></code> pour récupérer la valeur des champs <em>type of service (ToS)</em> ou <em>differentiated services code point (DSCP/ECN)</em> (contribution de <em>Georg Sauthoff</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44077">bpo-44077</a>).</p>
</section>
<section id="ssl">
<h3><code class="docutils literal notranslate"><span class="pre">ssl</span></code><a class="headerlink" href="#ssl" title="Lien permanent vers ce titre">¶</a></h3>
<p>La version minimale d'<em>OpenSSL</em> pour le module <code class="docutils literal notranslate"><span class="pre">ssl</span></code> est maintenant 1.1.1 (contribution de <em>Christian Heimes</em> dans <span class="target" id="index-106"></span><a class="pep reference external" href="https://peps.python.org/pep-0644/"><strong>PEP 644</strong></a> et dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43669">bpo-43669</a>).</p>
<p>The ssl module has preliminary support for OpenSSL 3.0.0 and new option
<a class="reference internal" href="../library/ssl.html#ssl.OP_IGNORE_UNEXPECTED_EOF" title="ssl.OP_IGNORE_UNEXPECTED_EOF"><code class="xref py py-const docutils literal notranslate"><span class="pre">OP_IGNORE_UNEXPECTED_EOF</span></code></a>.
(Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38820">bpo-38820</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43794">bpo-43794</a>,
<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43788">bpo-43788</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43791">bpo-43791</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43799">bpo-43799</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43920">bpo-43920</a>,
<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43789">bpo-43789</a>, and <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43811">bpo-43811</a>.)</p>
<p>Les fonctions obsolètes et l'accès aux constantes obsolètes lèvent maintenant un <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a>. <a class="reference internal" href="../library/ssl.html#ssl.SSLContext.options" title="ssl.SSLContext.options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ssl.SSLContext.options</span></code></a> a options <a class="reference internal" href="../library/ssl.html#ssl.OP_NO_SSLv2" title="ssl.OP_NO_SSLv2"><code class="xref py py-data docutils literal notranslate"><span class="pre">OP_NO_SSLv2</span></code></a> et <a class="reference internal" href="../library/ssl.html#ssl.OP_NO_SSLv3" title="ssl.OP_NO_SSLv3"><code class="xref py py-data docutils literal notranslate"><span class="pre">OP_NO_SSLv3</span></code></a> définies par défaut ; par conséquent, il ne peut pas avertir si l'option est définie de nouveau. La section <a class="reference internal" href="#whatsnew310-deprecated"><span class="std std-ref">obsolescence</span></a> contient la liste des fonctionnalités obsolètes (contribution de <em>Christian Heimes</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43880">bpo-43880</a>).</p>
<p>La configuration du module <code class="docutils literal notranslate"><span class="pre">ssl</span></code> est plus sécuritaire par défaut. Les algorithmes de chiffrement sans confidentialité persistante (<em>forward secrecy</em>) et le code d'authentification de message (MAC) <em>SHA-1</em> sont désactivés par défaut. Le niveau 2 de sécurité ne permet pas les clés faibles de moins de 112 bits pour <em>RSA</em>, <em>DH</em> et <em>ECC</em>. La version minimale du protocole <em>TLS</em> pour <a class="reference internal" href="../library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSLContext</span></code></a> est 1.2. La configuration est basée sur la recherche de <em>Hynek Schlawack</em> (contribution de <em>Christian Heimes</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43998">bpo-43998</a>).</p>
<p>Les protocoles obsolètes <em>SSL</em> 3.0, <em>TLS</em> 1.0 et <em>TLS</em> 1.1 ne sont plus officiellement pris en charge. Python ne les bloque pas activement, mais les options de compilation d'<em>OpenSSL</em>, les configurations du système d'exploitation, les rustines des fabricants et les suites d'algorithmes de chiffrement peuvent empêcher l’établissement d'une connexion.</p>
<p>Ajout d'un paramètre <em>timeout</em> à la fonction <a class="reference internal" href="../library/ssl.html#ssl.get_server_certificate" title="ssl.get_server_certificate"><code class="xref py py-func docutils literal notranslate"><span class="pre">ssl.get_server_certificate()</span></code></a> (contribution de <em>Zackery Spytz</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=31870">bpo-31870</a>).</p>
<p>Le module <code class="docutils literal notranslate"><span class="pre">ssl</span></code> utilise les types du tas et l'initialisation multi-phase (contribution de <em>Christian Heimes</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42333">bpo-42333</a>).</p>
<p>A new verify flag <a class="reference internal" href="../library/ssl.html#ssl.VERIFY_X509_PARTIAL_CHAIN" title="ssl.VERIFY_X509_PARTIAL_CHAIN"><code class="xref py py-const docutils literal notranslate"><span class="pre">VERIFY_X509_PARTIAL_CHAIN</span></code></a> has been added.
(Contributed by l0x in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40849">bpo-40849</a>.)</p>
</section>
<section id="sqlite3">
<h3><code class="docutils literal notranslate"><span class="pre">sqlite3</span></code><a class="headerlink" href="#sqlite3" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout d'événements d'audit pour <code class="xref py py-func docutils literal notranslate"><span class="pre">connect/handle()</span></code>, <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection.enable_load_extension" title="sqlite3.Connection.enable_load_extension"><code class="xref py py-meth docutils literal notranslate"><span class="pre">enable_load_extension()</span></code></a> et <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection.load_extension" title="sqlite3.Connection.load_extension"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_extension()</span></code></a> (contribution d'<em>Erlend E. Aasland</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43762">bpo-43762</a>).</p>
</section>
<section id="sys">
<h3><code class="docutils literal notranslate"><span class="pre">sys</span></code><a class="headerlink" href="#sys" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout de l'attribut <a class="reference internal" href="../library/sys.html#sys.orig_argv" title="sys.orig_argv"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.orig_argv</span></code></a> : la liste des arguments de ligne de commande originalement passée à l'exécutable Python (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=23427">bpo-23427</a>).</p>
<p>Ajout de <a class="reference internal" href="../library/sys.html#sys.stdlib_module_names" title="sys.stdlib_module_names"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stdlib_module_names</span></code></a> qui contient la liste des noms des modules de la bibliothèque standard (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42955">bpo-42955</a>).</p>
</section>
<section id="thread">
<h3><code class="docutils literal notranslate"><span class="pre">_thread</span></code><a class="headerlink" href="#thread" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference internal" href="../library/_thread.html#thread.interrupt_main" title="_thread.interrupt_main"><code class="xref py py-func docutils literal notranslate"><span class="pre">_thread.interrupt_main()</span></code></a> now takes an optional signal number to
simulate (the default is still <a class="reference internal" href="../library/signal.html#signal.SIGINT" title="signal.SIGINT"><code class="xref py py-const docutils literal notranslate"><span class="pre">signal.SIGINT</span></code></a>).
(Contributed by Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43356">bpo-43356</a>.)</p>
</section>
<section id="threading">
<h3><code class="docutils literal notranslate"><span class="pre">threading</span></code><a class="headerlink" href="#threading" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout des fonctions <a class="reference internal" href="../library/threading.html#threading.gettrace" title="threading.gettrace"><code class="xref py py-func docutils literal notranslate"><span class="pre">threading.gettrace()</span></code></a> et <a class="reference internal" href="../library/threading.html#threading.getprofile" title="threading.getprofile"><code class="xref py py-func docutils literal notranslate"><span class="pre">threading.getprofile()</span></code></a> pour récupérer les fonctions assignées par <a class="reference internal" href="../library/threading.html#threading.settrace" title="threading.settrace"><code class="xref py py-func docutils literal notranslate"><span class="pre">threading.settrace()</span></code></a> et <a class="reference internal" href="../library/threading.html#threading.setprofile" title="threading.setprofile"><code class="xref py py-func docutils literal notranslate"><span class="pre">threading.setprofile()</span></code></a> respectivement (contribution de <em>Mario Corchero</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42251">bpo-42251</a>).</p>
<p>Ajout de <a class="reference internal" href="../library/threading.html#threading.__excepthook__" title="threading.__excepthook__"><code class="xref py py-data docutils literal notranslate"><span class="pre">threading.__excepthook__</span></code></a> pour permettre la récupération de <a class="reference internal" href="../library/threading.html#threading.excepthook" title="threading.excepthook"><code class="xref py py-func docutils literal notranslate"><span class="pre">threading.excepthook()</span></code></a> au cas où elle serait affectée à une valeur incorrecte ou différente (contribution de <em>Mario Corchero</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42308">bpo-42308</a>).</p>
</section>
<section id="traceback">
<h3><code class="docutils literal notranslate"><span class="pre">traceback</span></code><a class="headerlink" href="#traceback" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les fonctions <a class="reference internal" href="../library/traceback.html#traceback.format_exception" title="traceback.format_exception"><code class="xref py py-func docutils literal notranslate"><span class="pre">format_exception()</span></code></a>, <a class="reference internal" href="../library/traceback.html#traceback.format_exception_only" title="traceback.format_exception_only"><code class="xref py py-func docutils literal notranslate"><span class="pre">format_exception_only()</span></code></a> et <a class="reference internal" href="../library/traceback.html#traceback.print_exception" title="traceback.print_exception"><code class="xref py py-func docutils literal notranslate"><span class="pre">print_exception()</span></code></a> peuvent maintenant prendre un objet exception en argument positionnel (contribution de <em>Zackery Spytz</em> et <em>Matthias Bussonnier</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=26389">bpo-26389</a>).</p>
</section>
<section id="types">
<h3><code class="docutils literal notranslate"><span class="pre">types</span></code><a class="headerlink" href="#types" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les classes <a class="reference internal" href="../library/types.html#types.EllipsisType" title="types.EllipsisType"><code class="xref py py-data docutils literal notranslate"><span class="pre">types.EllipsisType</span></code></a>, <a class="reference internal" href="../library/types.html#types.NoneType" title="types.NoneType"><code class="xref py py-data docutils literal notranslate"><span class="pre">types.NoneType</span></code></a> et <a class="reference internal" href="../library/types.html#types.NotImplementedType" title="types.NotImplementedType"><code class="xref py py-data docutils literal notranslate"><span class="pre">types.NotImplementedType</span></code></a> sont ajoutées de nouveau. Elles fournissent un nouvel ensemble de types facilement interprétable par les vérificateurs de types (contribution de <em>Bas van Beek</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41810">bpo-41810</a>).</p>
</section>
<section id="typing">
<h3><code class="docutils literal notranslate"><span class="pre">typing</span></code><a class="headerlink" href="#typing" title="Lien permanent vers ce titre">¶</a></h3>
<p>Pour les changements majeurs, voir <a class="reference internal" href="#new-feat-related-type-hints"><span class="std std-ref">Nouvelles fonctionnalités reliées aux indications de types</span></a>.</p>
<p>Le comportement de <a class="reference internal" href="../library/typing.html#typing.Literal" title="typing.Literal"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Literal</span></code></a> a été changé pour être conforme avec la <span class="target" id="index-107"></span><a class="pep reference external" href="https://peps.python.org/pep-0586/"><strong>PEP 586</strong></a> et pour correspondre au comportement des vérificateurs de types statiques défini dans la PEP.</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">Literal</span></code> dé-duplique maintenant les paramètres.</p></li>
<li><p>La comparaison d'égalité entre objets <code class="docutils literal notranslate"><span class="pre">Literal</span></code> ne tient plus compte de l'ordre.</p></li>
<li><p>Les comparaisons de <code class="docutils literal notranslate"><span class="pre">Literal</span></code> respectent maintenant les types. Par exemple, <code class="docutils literal notranslate"><span class="pre">Literal[0]</span> <span class="pre">==</span> <span class="pre">Literal[False]</span></code> était préalablement évaluée à <code class="docutils literal notranslate"><span class="pre">True</span></code>. Elle est maintenant <code class="docutils literal notranslate"><span class="pre">False</span></code>. Pour prendre en charge ce changement, le cache des types de l'implémentation interne peut maintenant différencier entre les types.</p></li>
<li><p>Les objets <code class="docutils literal notranslate"><span class="pre">Literal</span></code> lèvent maintenant une exception <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> pendant la comparaison d'égalité si au moins un de leurs paramètres n'est pas <a class="reference internal" href="../glossary.html#term-hashable"><span class="xref std std-term">hachable</span></a>. Notez que déclarer un <code class="docutils literal notranslate"><span class="pre">Literal</span></code> avec des paramètres non hachables ne lève pas d'erreur :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Literal</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Literal</span><span class="p">[{</span><span class="mi">0</span><span class="p">}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Literal</span><span class="p">[{</span><span class="mi">0</span><span class="p">}]</span> <span class="o">==</span> <span class="n">Literal</span><span class="p">[{</span><span class="kc">False</span><span class="p">}]</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">TypeError</span>: <span class="n">unhashable type: &#39;set&#39;</span>
</pre></div>
</div>
</li>
</ol>
<p>(contribution de <em>Yurii Karabas</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42345">bpo-42345</a>).</p>
<p>Add new function <a class="reference internal" href="../library/typing.html#typing.is_typeddict" title="typing.is_typeddict"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.is_typeddict()</span></code></a> to introspect if an annotation
is a <a class="reference internal" href="../library/typing.html#typing.TypedDict" title="typing.TypedDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.TypedDict</span></code></a>.
(Contributed by Patrick Reader in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41792">bpo-41792</a>.)</p>
<p>Subclasses of <code class="docutils literal notranslate"><span class="pre">typing.Protocol</span></code> which only have data variables declared
will now raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> when checked with <code class="docutils literal notranslate"><span class="pre">isinstance</span></code> unless they
are decorated with <code class="xref py py-func docutils literal notranslate"><span class="pre">runtime_checkable()</span></code>.  Previously, these checks
passed silently.  Users should decorate their
subclasses with the <code class="xref py py-func docutils literal notranslate"><span class="pre">runtime_checkable()</span></code> decorator
if they want runtime protocols.
(Contributed by Yurii Karabas in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38908">bpo-38908</a>.)</p>
<p>Importing from the <code class="docutils literal notranslate"><span class="pre">typing.io</span></code> and <code class="docutils literal notranslate"><span class="pre">typing.re</span></code> submodules will now emit
<a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a>.  These submodules have been deprecated since
Python 3.8 and will be removed in a future version of Python.  Anything
belonging to those submodules should be imported directly from
<a class="reference internal" href="../library/typing.html#module-typing" title="typing: Support for type hints (see :pep:`484`)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">typing</span></code></a> instead.
(Contributed by Sebastian Rittau in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38291">bpo-38291</a>.)</p>
</section>
<section id="unittest">
<h3><code class="docutils literal notranslate"><span class="pre">unittest</span></code><a class="headerlink" href="#unittest" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout d'une nouvelle méthode <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertNoLogs" title="unittest.TestCase.assertNoLogs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertNoLogs()</span></code></a> pour complémenter la méthode existante <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertLogs" title="unittest.TestCase.assertLogs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertLogs()</span></code></a> (contribution de <em>Kit Yan Choi</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39385">bpo-39385</a>).</p>
</section>
<section id="urllib-parse">
<h3><code class="docutils literal notranslate"><span class="pre">urllib.parse</span></code><a class="headerlink" href="#urllib-parse" title="Lien permanent vers ce titre">¶</a></h3>
<p>Les versions préalables à Python 3.10 acceptaient les deux caractères <code class="docutils literal notranslate"><span class="pre">;</span></code> et <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> comme séparateurs de paramètres de requêtes dans <a class="reference internal" href="../library/urllib.parse.html#urllib.parse.parse_qs" title="urllib.parse.parse_qs"><code class="xref py py-func docutils literal notranslate"><span class="pre">urllib.parse.parse_qs()</span></code></a> et <a class="reference internal" href="../library/urllib.parse.html#urllib.parse.parse_qsl" title="urllib.parse.parse_qsl"><code class="xref py py-func docutils literal notranslate"><span class="pre">urllib.parse.parse_qsl()</span></code></a>. Pour prévenir des failles de sécurité potentielles et pour respecter les dernières recommandations du W3C, ceci a été changé pour ne permettre qu'une seule clé de séparation, avec <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> par défaut. Ce changement affecte aussi l'implémentation interne de <a class="reference internal" href="../library/cgi.html#cgi.parse" title="cgi.parse"><code class="xref py py-func docutils literal notranslate"><span class="pre">cgi.parse()</span></code></a> et de <a class="reference internal" href="../library/cgi.html#cgi.parse_multipart" title="cgi.parse_multipart"><code class="xref py py-func docutils literal notranslate"><span class="pre">cgi.parse_multipart()</span></code></a> puisqu'elles utilisent les fonctions affectées. Pour plus de détails, voir la documentation respective de ces fonctions (contribution d'<em>Adam Goldschmidt</em>, de <em>Senthil Kumaran</em> et de <em>Ken Jin</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42967">bpo-42967</a>).</p>
</section>
<section id="xml">
<h3><code class="docutils literal notranslate"><span class="pre">xml</span></code><a class="headerlink" href="#xml" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout d'une classe <a class="reference internal" href="../library/xml.sax.handler.html#xml.sax.handler.LexicalHandler" title="xml.sax.handler.LexicalHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">LexicalHandler</span></code></a> au module <a class="reference internal" href="../library/xml.sax.handler.html#module-xml.sax.handler" title="xml.sax.handler: Base classes for SAX event handlers."><code class="xref py py-mod docutils literal notranslate"><span class="pre">xml.sax.handler</span></code></a> (contribution de <em>Jonathan Gossage</em> de <em>Zackery Spytz</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35018">bpo-35018</a>).</p>
</section>
<section id="zipimport">
<h3><code class="docutils literal notranslate"><span class="pre">zipimport</span></code><a class="headerlink" href="#zipimport" title="Lien permanent vers ce titre">¶</a></h3>
<p>Ajout des méthodes relatives à la <span class="target" id="index-108"></span><a class="pep reference external" href="https://peps.python.org/pep-0451/"><strong>PEP 451</strong></a> : <a class="reference internal" href="../library/zipimport.html#zipimport.zipimporter.find_spec" title="zipimport.zipimporter.find_spec"><code class="xref py py-meth docutils literal notranslate"><span class="pre">find_spec()</span></code></a>, <a class="reference internal" href="../library/zipimport.html#zipimport.zipimporter.create_module" title="zipimport.zipimporter.create_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">zipimport.zipimporter.create_module()</span></code></a> et <a class="reference internal" href="../library/zipimport.html#zipimport.zipimporter.exec_module" title="zipimport.zipimporter.exec_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">zipimport.zipimporter.exec_module()</span></code></a> (contribution de <em>Brett Cannon</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42131">bpo-42131</a>).</p>
<p>Ajout de la méthode <a class="reference internal" href="../library/zipimport.html#zipimport.zipimporter.invalidate_caches" title="zipimport.zipimporter.invalidate_caches"><code class="xref py py-meth docutils literal notranslate"><span class="pre">invalidate_caches()</span></code></a> (contribution de <em>Desmond Cheong</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=14678">bpo-14678</a>).</p>
</section>
</section>
<section id="optimizations">
<h2>Optimisations<a class="headerlink" href="#optimizations" title="Lien permanent vers ce titre">¶</a></h2>
<ul class="simple">
<li><p>Les constructeurs de <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-func docutils literal notranslate"><span class="pre">str()</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-func docutils literal notranslate"><span class="pre">bytes()</span></code></a> et <a class="reference internal" href="../library/stdtypes.html#bytearray" title="bytearray"><code class="xref py py-func docutils literal notranslate"><span class="pre">bytearray()</span></code></a> sont maintenant plus rapides (environ 30—40 % pour les petits objets) (contribution de <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41334">bpo-41334</a>).</p></li>
<li><p>Le module <a class="reference internal" href="../library/runpy.html#module-runpy" title="runpy: Locate and run Python modules without importing them first."><code class="xref py py-mod docutils literal notranslate"><span class="pre">runpy</span></code></a> importe maintenant moins de modules. Le temps de démarrage de la commande <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">-m</span> <span class="pre">module-name</span></code> est en moyenne 1,4 fois plus rapide. Sur Linux <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">-I</span> <span class="pre">-m</span> <span class="pre">module-name</span></code> importe 69 modules dans Python 3.9, alors qu'elle n'en importe que 51 (18 de moins) dans Python 3.10 (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41006">bpo-41006</a> et dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41718">bpo-41718</a>).</p></li>
<li><p>L'instruction <code class="docutils literal notranslate"><span class="pre">LOAD_ATTR</span></code> utilise maintenant le mécanisme de cache par code d'opération. Elle est environ 36 % plus rapide pour les attributs ordinaires et 44 % plus rapide pour les <em>slots</em> (contribution de <em>Pablo Galindo</em> et de <em>Yury Selivanov</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42093">bpo-42093</a> et <em>Guido van Rossum</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42927">bpo-42927</a>, basée sur des idées originalement mises en œuvre dans <em>PyPy</em> et dans <em>MicroPython</em>).</p></li>
<li><p>Lors de la construction de Python avec <a class="reference internal" href="../using/configure.html#cmdoption-enable-optimizations"><code class="xref std std-option docutils literal notranslate"><span class="pre">--enable-optimizations</span></code></a>, <code class="docutils literal notranslate"><span class="pre">-fno-semantic-interposition</span></code> est maintenant ajouté aux lignes de commande de compilation et d'édition des liens. Ceci accélère les binaires de l'interpréteur Python créés avec <a class="reference internal" href="../using/configure.html#cmdoption-enable-shared"><code class="xref std std-option docutils literal notranslate"><span class="pre">--enable-shared</span></code></a> et <code class="docutils literal notranslate"><span class="pre">gcc</span></code> jusqu'à 30 %. Voir <a class="reference external" href="https://developers.redhat.com/blog/2020/06/25/red-hat-enterprise-linux-8-2-brings-faster-python-3-8-run-speeds/">cet article</a> (en anglais) pour plus de détails (contribution de <em>Victor Stinner</em> et <em>Pablo Galindo</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38980">bpo-38980</a>).</p></li>
<li><p>Ré-usinage du code assurant la gestion du tampon de sortie pour les modules <a class="reference internal" href="../library/bz2.html#module-bz2" title="bz2: Interfaces for bzip2 compression and decompression."><code class="xref py py-mod docutils literal notranslate"><span class="pre">bz2</span></code></a>, <a class="reference internal" href="../library/lzma.html#module-lzma" title="lzma: A Python wrapper for the liblzma compression library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">lzma</span></code></a> et <a class="reference internal" href="../library/zlib.html#module-zlib" title="zlib: Low-level interface to compression and decompression routines compatible with gzip."><code class="xref py py-mod docutils literal notranslate"><span class="pre">zlib</span></code></a>. Ajout de la fonction <code class="docutils literal notranslate"><span class="pre">.readall()</span></code> à la classe <code class="docutils literal notranslate"><span class="pre">_compression.DecompressReader</span></code>. La décompression <em>bz2</em> est 1,09 à 1,17 fois plus rapide, la décompression <em>lzma</em> est 1,20 à 1,32 fois plus rapide, <code class="docutils literal notranslate"><span class="pre">GzipFile.read(-1)</span></code> est 1,11 à 1,18 fois plus rapide (contribution de <em>Ma Lin</em>, révision par <em>Gregory P. Smith</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41486">bpo-41486</a>).</p></li>
<li><p>When using stringized annotations, annotations dicts for functions are no longer
created when the function is created.  Instead, they are stored as a tuple of
strings, and the function object lazily converts this into the annotations dict
on demand.  This optimization cuts the CPU time needed to define an annotated
function by half.
(Contributed by Yurii Karabas and Inada Naoki in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42202">bpo-42202</a>.)</p></li>
<li><p>Les fonctions de recherche de sous-chaînes telles que <code class="docutils literal notranslate"><span class="pre">str1</span> <span class="pre">in</span> <span class="pre">str2</span></code> et <code class="docutils literal notranslate"><span class="pre">str2.find(str1)</span></code> peuvent utiliser maintenant l'algorithme « bidirectionnel » de recherche de chaînes <em>Crochemore et Perrin</em> pour éviter le comportement quadratique sur les longues chaînes (contribution de <em>Dennis Sweeney</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41972">bpo-41972</a>).</p></li>
<li><p>Add micro-optimizations to <code class="docutils literal notranslate"><span class="pre">_PyType_Lookup()</span></code> to improve type attribute cache lookup
performance in the common case of cache hits. This makes the interpreter 1.04 times faster
on average. (Contributed by Dino Viehland in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43452">bpo-43452</a>.)</p></li>
<li><p>The following built-in functions now support the faster <span class="target" id="index-33"></span><a class="pep reference external" href="https://peps.python.org/pep-0590/"><strong>PEP 590</strong></a> vectorcall calling convention:
<a class="reference internal" href="../library/functions.html#map" title="map"><code class="xref py py-func docutils literal notranslate"><span class="pre">map()</span></code></a>, <a class="reference internal" href="../library/functions.html#filter" title="filter"><code class="xref py py-func docutils literal notranslate"><span class="pre">filter()</span></code></a>, <a class="reference internal" href="../library/functions.html#reversed" title="reversed"><code class="xref py py-func docutils literal notranslate"><span class="pre">reversed()</span></code></a>, <a class="reference internal" href="../library/functions.html#bool" title="bool"><code class="xref py py-func docutils literal notranslate"><span class="pre">bool()</span></code></a> and <a class="reference internal" href="../library/functions.html#float" title="float"><code class="xref py py-func docutils literal notranslate"><span class="pre">float()</span></code></a>.
(Contributed by Donghee Na and Jeroen Demeyer in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43575">bpo-43575</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43287">bpo-43287</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41922">bpo-41922</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41873">bpo-41873</a> and <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41870">bpo-41870</a>.)</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">BZ2File</span></code> performance is improved by removing internal <code class="docutils literal notranslate"><span class="pre">RLock</span></code>.
This makes <code class="xref py py-class docutils literal notranslate"><span class="pre">BZ2File</span></code> thread unsafe in the face of multiple simultaneous
readers or writers, just like its equivalent classes in <a class="reference internal" href="../library/gzip.html#module-gzip" title="gzip: Interfaces for gzip compression and decompression using file objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">gzip</span></code></a> and
<a class="reference internal" href="../library/lzma.html#module-lzma" title="lzma: A Python wrapper for the liblzma compression library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">lzma</span></code></a> have always been.  (Contributed by Inada Naoki in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43785">bpo-43785</a>.)</p></li>
</ul>
</section>
<section id="deprecated">
<span id="whatsnew310-deprecated"></span><h2>Obsolescence<a class="headerlink" href="#deprecated" title="Lien permanent vers ce titre">¶</a></h2>
<ul>
<li><p>Currently Python accepts numeric literals immediately followed by keywords,
for example <code class="docutils literal notranslate"><span class="pre">0in</span> <span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">1or</span> <span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">0if</span> <span class="pre">1else</span> <span class="pre">2</span></code>.  It allows confusing
and ambiguous expressions like <code class="docutils literal notranslate"><span class="pre">[0x1for</span> <span class="pre">x</span> <span class="pre">in</span> <span class="pre">y]</span></code> (which can be
interpreted as <code class="docutils literal notranslate"><span class="pre">[0x1</span> <span class="pre">for</span> <span class="pre">x</span> <span class="pre">in</span> <span class="pre">y]</span></code> or <code class="docutils literal notranslate"><span class="pre">[0x1f</span> <span class="pre">or</span> <span class="pre">x</span> <span class="pre">in</span> <span class="pre">y]</span></code>).  Starting in
this release, a deprecation warning is raised if the numeric literal is
immediately followed by one of keywords <a class="reference internal" href="../reference/expressions.html#and"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">and</span></code></a>, <a class="reference internal" href="../reference/compound_stmts.html#else"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">else</span></code></a>,
<a class="reference internal" href="../reference/compound_stmts.html#for"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">for</span></code></a>, <a class="reference internal" href="../reference/compound_stmts.html#if"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">if</span></code></a>, <a class="reference internal" href="../reference/expressions.html#in"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">in</span></code></a>, <a class="reference internal" href="../reference/expressions.html#is"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">is</span></code></a> and <a class="reference internal" href="../reference/expressions.html#or"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">or</span></code></a>.
In future releases it will be changed to syntax warning, and finally to
syntax error.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43833">bpo-43833</a>.)</p></li>
<li><p>Starting in this release, there will be a concerted effort to begin
cleaning up old import semantics that were kept for Python 2.7
compatibility. Specifically,
<code class="xref py py-meth docutils literal notranslate"><span class="pre">find_loader()</span></code>/<code class="xref py py-meth docutils literal notranslate"><span class="pre">find_module()</span></code>
(superseded by <code class="xref py py-meth docutils literal notranslate"><span class="pre">find_spec()</span></code>),
<a class="reference internal" href="../library/importlib.html#importlib.abc.Loader.load_module" title="importlib.abc.Loader.load_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_module()</span></code></a>
(superseded by <a class="reference internal" href="../library/importlib.html#importlib.abc.Loader.exec_module" title="importlib.abc.Loader.exec_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">exec_module()</span></code></a>),
<code class="xref py py-meth docutils literal notranslate"><span class="pre">module_repr()</span></code> (which the import system
takes care of for you), the <code class="docutils literal notranslate"><span class="pre">__package__</span></code> attribute
(superseded by <code class="docutils literal notranslate"><span class="pre">__spec__.parent</span></code>), the <code class="docutils literal notranslate"><span class="pre">__loader__</span></code> attribute
(superseded by <code class="docutils literal notranslate"><span class="pre">__spec__.loader</span></code>), and the <code class="docutils literal notranslate"><span class="pre">__cached__</span></code> attribute
(superseded by <code class="docutils literal notranslate"><span class="pre">__spec__.cached</span></code>) will slowly be removed (as well
as other classes and methods in <a class="reference internal" href="../library/importlib.html#module-importlib" title="importlib: The implementation of the import machinery."><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib</span></code></a>).
<a class="reference internal" href="../library/exceptions.html#ImportWarning" title="ImportWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ImportWarning</span></code></a> and/or <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> will be raised
as appropriate to help identify code which needs updating during
this transition.</p></li>
<li><p>L'espace de noms <code class="docutils literal notranslate"><span class="pre">distutils</span></code> est complètement obsolète et sera retiré dans Python 3.12. Voir la section sur les <a class="reference internal" href="#distutils-deprecated"><span class="std std-ref">changements aux modules</span></a> pour plus d'information.</p></li>
<li><p>Les arguments non entiers de <a class="reference internal" href="../library/random.html#random.randrange" title="random.randrange"><code class="xref py py-func docutils literal notranslate"><span class="pre">random.randrange()</span></code></a> sont obsolètes. La levée de <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> dans ce cas est obsolète et est remplacée par <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> (contribution de <em>Serhiy Storchaka</em> et <em>Raymond Hettinger</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37319">bpo-37319</a>).</p></li>
<li><p>Les multiples méthodes <code class="docutils literal notranslate"><span class="pre">load_module()</span></code> de <a class="reference internal" href="../library/importlib.html#module-importlib" title="importlib: The implementation of the import machinery."><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib</span></code></a> étaient documentées comme obsolètes depuis Python 3.6, mais elles vont maintenant aussi lever un <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a>. Utilisez plutôt <a class="reference internal" href="../library/importlib.html#importlib.abc.Loader.exec_module" title="importlib.abc.Loader.exec_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">exec_module()</span></code></a> (contribution de <em>Brett Cannon</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=26131">bpo-26131</a>).</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">zimport.zipimporter.load_module()</span></code> est obsolète. Utilisez plutôt <a class="reference internal" href="../library/zipimport.html#zipimport.zipimporter.exec_module" title="zipimport.zipimporter.exec_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">exec_module()</span></code></a> (contribution de <em>Brett Cannon</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=26131">bpo-26131</a>).</p></li>
<li><p>L'utilisation de <a class="reference internal" href="../library/importlib.html#importlib.abc.Loader.load_module" title="importlib.abc.Loader.load_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_module()</span></code></a> par le système d'importation lève maintenant un <a class="reference internal" href="../library/exceptions.html#ImportWarning" title="ImportWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ImportWarning</span></code></a> car <a class="reference internal" href="../library/importlib.html#importlib.abc.Loader.exec_module" title="importlib.abc.Loader.exec_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">exec_module()</span></code></a> est recommandée (contribution de (<em>Brett Cannon</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=26131">bpo-26131</a>).</p></li>
<li><p>The use of <code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.MetaPathFinder.find_module()</span></code> and
<code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.PathEntryFinder.find_module()</span></code> by the import system now
trigger an <a class="reference internal" href="../library/exceptions.html#ImportWarning" title="ImportWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ImportWarning</span></code></a> as
<a class="reference internal" href="../library/importlib.html#importlib.abc.MetaPathFinder.find_spec" title="importlib.abc.MetaPathFinder.find_spec"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.MetaPathFinder.find_spec()</span></code></a> and
<a class="reference internal" href="../library/importlib.html#importlib.abc.PathEntryFinder.find_spec" title="importlib.abc.PathEntryFinder.find_spec"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.PathEntryFinder.find_spec()</span></code></a>
are preferred, respectively. You can use
<a class="reference internal" href="../library/importlib.html#importlib.util.spec_from_loader" title="importlib.util.spec_from_loader"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.util.spec_from_loader()</span></code></a> to help in porting.
(Contributed by Brett Cannon in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42134">bpo-42134</a>.)</p></li>
<li><p>The use of <code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.PathEntryFinder.find_loader()</span></code> by the import
system now triggers an <a class="reference internal" href="../library/exceptions.html#ImportWarning" title="ImportWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ImportWarning</span></code></a> as
<a class="reference internal" href="../library/importlib.html#importlib.abc.PathEntryFinder.find_spec" title="importlib.abc.PathEntryFinder.find_spec"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.PathEntryFinder.find_spec()</span></code></a> is preferred. You can use
<a class="reference internal" href="../library/importlib.html#importlib.util.spec_from_loader" title="importlib.util.spec_from_loader"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.util.spec_from_loader()</span></code></a> to help in porting.
(Contributed by Brett Cannon in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43672">bpo-43672</a>.)</p></li>
<li><p>The various implementations of
<code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.MetaPathFinder.find_module()</span></code> (
<code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.BuiltinImporter.find_module()</span></code>,
<code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.FrozenImporter.find_module()</span></code>,
<code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.WindowsRegistryFinder.find_module()</span></code>,
<code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.PathFinder.find_module()</span></code>,
<code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.MetaPathFinder.find_module()</span></code> ),
<code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.PathEntryFinder.find_module()</span></code> (
<code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.FileFinder.find_module()</span></code> ), and
<code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.PathEntryFinder.find_loader()</span></code> (
<code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.FileFinder.find_loader()</span></code> )
now raise <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> and are slated for removal in
Python 3.12 (previously they were documented as deprecated in Python 3.4).
(Contributed by Brett Cannon in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42135">bpo-42135</a>.)</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">importlib.abc.Finder</span></code> is deprecated (including its sole method,
<code class="xref py py-meth docutils literal notranslate"><span class="pre">find_module()</span></code>). Both
<a class="reference internal" href="../library/importlib.html#importlib.abc.MetaPathFinder" title="importlib.abc.MetaPathFinder"><code class="xref py py-class docutils literal notranslate"><span class="pre">importlib.abc.MetaPathFinder</span></code></a> and <a class="reference internal" href="../library/importlib.html#importlib.abc.PathEntryFinder" title="importlib.abc.PathEntryFinder"><code class="xref py py-class docutils literal notranslate"><span class="pre">importlib.abc.PathEntryFinder</span></code></a>
no longer inherit from the class. Users should inherit from one of these two
classes as appropriate instead.
(Contributed by Brett Cannon in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42135">bpo-42135</a>.)</p></li>
<li><p>The deprecations of <code class="xref py py-mod docutils literal notranslate"><span class="pre">imp</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.find_loader()</span></code>,
<code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.util.set_package_wrapper()</span></code>,
<code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.util.set_loader_wrapper()</span></code>,
<code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.util.module_for_loader()</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">pkgutil.ImpImporter</span></code>, and
<code class="xref py py-class docutils literal notranslate"><span class="pre">pkgutil.ImpLoader</span></code> have all been updated to list Python 3.12 as the
slated version of removal (they began raising <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> in
previous versions of Python).
(Contributed by Brett Cannon in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43720">bpo-43720</a>.)</p></li>
<li><p>The import system now uses the <code class="docutils literal notranslate"><span class="pre">__spec__</span></code> attribute on modules before
falling back on <code class="xref py py-meth docutils literal notranslate"><span class="pre">module_repr()</span></code> for a module's
<code class="docutils literal notranslate"><span class="pre">__repr__()</span></code> method. Removal of the use of <code class="docutils literal notranslate"><span class="pre">module_repr()</span></code> is scheduled
for Python 3.12.
(Contributed by Brett Cannon in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42137">bpo-42137</a>.)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.Loader.module_repr()</span></code>,
<code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.FrozenLoader.module_repr()</span></code>, and
<code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.BuiltinLoader.module_repr()</span></code> are deprecated and
slated for removal in Python 3.12.
(Contributed by Brett Cannon in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42136">bpo-42136</a>.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sqlite3.OptimizedUnicode</span></code> est non-documenté et désuète depuis Python 3.3, quand elle devenue un alias de <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>. Elle est maintenant déclarée obsolète et sera retiré dans Python 3.12 (contribution de <em>Erlend E. Aasland</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42264">bpo-42264</a>).</p></li>
<li><p>La fonction native non-documentée <code class="docutils literal notranslate"><span class="pre">sqlite3.enable_shared_cache</span></code> est maintenant obsolète et sera retirée dans Python 3.12. Son utilisation est fortement déconseillée dans la documentation de SQLite3. Voir <a class="reference external" href="https://sqlite.org/c3ref/enable_shared_cache.html">la documentation de SQLite3</a> (en anglais) pour plus de détails. Si un cache partagé est nécessaire, ouvrez la base de données en mode URI en utilisant le paramètre de requête <code class="docutils literal notranslate"><span class="pre">cache=shared</span></code> (contribution de <em>Erlend E. Aasland</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=24464">bpo-24464</a>).</p></li>
<li><p>Les méthodes suivantes du module <code class="docutils literal notranslate"><span class="pre">threading</span></code> sont maintenant obsolètes :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">threading.currentThread</span></code> =&gt; <a class="reference internal" href="../library/threading.html#threading.current_thread" title="threading.current_thread"><code class="xref py py-func docutils literal notranslate"><span class="pre">threading.current_thread()</span></code></a> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">threading.activeCount</span></code> =&gt; <a class="reference internal" href="../library/threading.html#threading.active_count" title="threading.active_count"><code class="xref py py-func docutils literal notranslate"><span class="pre">threading.active_count()</span></code></a> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">threading.Condition.notifyAll</span></code> =&gt; <a class="reference internal" href="../library/threading.html#threading.Condition.notify_all" title="threading.Condition.notify_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">threading.Condition.notify_all()</span></code></a> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">threading.Event.isSet</span></code> =&gt; <a class="reference internal" href="../library/threading.html#threading.Event.is_set" title="threading.Event.is_set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">threading.Event.is_set()</span></code></a> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">threading.Thread.setName</span></code> =&gt; <a class="reference internal" href="../library/threading.html#threading.Thread.name" title="threading.Thread.name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">threading.Thread.name</span></code></a> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">threading.thread.getName</span></code> =&gt; <a class="reference internal" href="../library/threading.html#threading.Thread.name" title="threading.Thread.name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">threading.Thread.name</span></code></a> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">threading.Thread.isDaemon</span></code> =&gt; <a class="reference internal" href="../library/threading.html#threading.Thread.daemon" title="threading.Thread.daemon"><code class="xref py py-attr docutils literal notranslate"><span class="pre">threading.Thread.daemon</span></code></a> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">threading.Thread.setDaemon</span></code> =&gt; <a class="reference internal" href="../library/threading.html#threading.Thread.daemon" title="threading.Thread.daemon"><code class="xref py py-attr docutils literal notranslate"><span class="pre">threading.Thread.daemon</span></code></a>.</p></li>
</ul>
<p>(Contributed by Jelle Zijlstra in <a class="reference external" href="https://github.com/python/cpython/issues/87889">gh-87889</a>.)</p>
</li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">pathlib.Path.link_to()</span></code> est obsolète et sera retirée dans Python 3.12. Utilisez plutôt <a class="reference internal" href="../library/pathlib.html#pathlib.Path.hardlink_to" title="pathlib.Path.hardlink_to"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pathlib.Path.hardlink_to()</span></code></a> (contribution de <em>Barney Gale</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39950">bpo-39950</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cgi.log()</span></code> est obsolète et sera retirée dans Python 3.12 (contribution de <em>Inada Naoki</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41139">bpo-41139</a>).</p></li>
<li><p>Les fonctionnalités suivantes de <a class="reference internal" href="../library/ssl.html#module-ssl" title="ssl: TLS/SSL wrapper for socket objects"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ssl</span></code></a> sont obsolètes depuis Python 3.6, Python 3.7 ou <em>OpenSSL</em> 1.1.0 et seront retirées dans 3.11 :</p>
<ul class="simple">
<li><p><a class="reference internal" href="../library/ssl.html#ssl.OP_NO_SSLv2" title="ssl.OP_NO_SSLv2"><code class="xref py py-data docutils literal notranslate"><span class="pre">OP_NO_SSLv2</span></code></a>, <a class="reference internal" href="../library/ssl.html#ssl.OP_NO_SSLv3" title="ssl.OP_NO_SSLv3"><code class="xref py py-data docutils literal notranslate"><span class="pre">OP_NO_SSLv3</span></code></a>, <a class="reference internal" href="../library/ssl.html#ssl.OP_NO_TLSv1" title="ssl.OP_NO_TLSv1"><code class="xref py py-data docutils literal notranslate"><span class="pre">OP_NO_TLSv1</span></code></a>, <a class="reference internal" href="../library/ssl.html#ssl.OP_NO_TLSv1_1" title="ssl.OP_NO_TLSv1_1"><code class="xref py py-data docutils literal notranslate"><span class="pre">OP_NO_TLSv1_1</span></code></a>, <a class="reference internal" href="../library/ssl.html#ssl.OP_NO_TLSv1_2" title="ssl.OP_NO_TLSv1_2"><code class="xref py py-data docutils literal notranslate"><span class="pre">OP_NO_TLSv1_2</span></code></a> et <a class="reference internal" href="../library/ssl.html#ssl.OP_NO_TLSv1_3" title="ssl.OP_NO_TLSv1_3"><code class="xref py py-data docutils literal notranslate"><span class="pre">OP_NO_TLSv1_3</span></code></a> sont remplacés par <code class="xref py py-attr docutils literal notranslate"><span class="pre">sslSSLContext.minimum_version</span></code> et <code class="xref py py-attr docutils literal notranslate"><span class="pre">sslSSLContext.maximum_version</span></code> ;</p></li>
<li><p><code class="xref py py-data docutils literal notranslate"><span class="pre">PROTOCOL_SSLv2</span></code>, <a class="reference internal" href="../library/ssl.html#ssl.PROTOCOL_SSLv3" title="ssl.PROTOCOL_SSLv3"><code class="xref py py-data docutils literal notranslate"><span class="pre">PROTOCOL_SSLv3</span></code></a>,
<a class="reference internal" href="../library/ssl.html#ssl.PROTOCOL_SSLv23" title="ssl.PROTOCOL_SSLv23"><code class="xref py py-data docutils literal notranslate"><span class="pre">PROTOCOL_SSLv23</span></code></a>, <a class="reference internal" href="../library/ssl.html#ssl.PROTOCOL_TLSv1" title="ssl.PROTOCOL_TLSv1"><code class="xref py py-data docutils literal notranslate"><span class="pre">PROTOCOL_TLSv1</span></code></a>,
<a class="reference internal" href="../library/ssl.html#ssl.PROTOCOL_TLSv1_1" title="ssl.PROTOCOL_TLSv1_1"><code class="xref py py-data docutils literal notranslate"><span class="pre">PROTOCOL_TLSv1_1</span></code></a>, <a class="reference internal" href="../library/ssl.html#ssl.PROTOCOL_TLSv1_2" title="ssl.PROTOCOL_TLSv1_2"><code class="xref py py-data docutils literal notranslate"><span class="pre">PROTOCOL_TLSv1_2</span></code></a>, and
<a class="reference internal" href="../library/ssl.html#ssl.PROTOCOL_TLS" title="ssl.PROTOCOL_TLS"><code class="xref py py-const docutils literal notranslate"><span class="pre">PROTOCOL_TLS</span></code></a> are deprecated in favor of
<a class="reference internal" href="../library/ssl.html#ssl.PROTOCOL_TLS_CLIENT" title="ssl.PROTOCOL_TLS_CLIENT"><code class="xref py py-const docutils literal notranslate"><span class="pre">PROTOCOL_TLS_CLIENT</span></code></a> and <a class="reference internal" href="../library/ssl.html#ssl.PROTOCOL_TLS_SERVER" title="ssl.PROTOCOL_TLS_SERVER"><code class="xref py py-const docutils literal notranslate"><span class="pre">PROTOCOL_TLS_SERVER</span></code></a></p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">wrap_socket()</span></code> est remplacée par <a class="reference internal" href="../library/ssl.html#ssl.SSLContext.wrap_socket" title="ssl.SSLContext.wrap_socket"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ssl.SSLContext.wrap_socket()</span></code></a> ;</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">match_hostname()</span></code> ;</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">RAND_pseudo_bytes()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">RAND_egd()</span></code> ;</p></li>
<li><p>Les fonctionnalités NPN (<em>Next Protocol Negotiation</em>) telles que <a class="reference internal" href="../library/ssl.html#ssl.SSLSocket.selected_npn_protocol" title="ssl.SSLSocket.selected_npn_protocol"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ssl.SSLSocket.selected_npn_protocol()</span></code></a> et <a class="reference internal" href="../library/ssl.html#ssl.SSLContext.set_npn_protocols" title="ssl.SSLContext.set_npn_protocols"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ssl.SSLContext.set_npn_protocols()</span></code></a> sont remplacées par ALPN (<em>Application Layer Protocol Negotiation</em>).</p></li>
</ul>
</li>
<li><p>Le débogage des fils d'exécution (variable d'environnement <span class="target" id="index-109"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONTHREADDEBUG</span></code>) est obsolète dans Python 3.10 et sera retiré dans Python 3.12. Cette fonctionnalité nécessite un interpréteur <a class="reference internal" href="../using/configure.html#debug-build"><span class="std std-ref">compilé avec les paramètres de débogage</span></a> (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=44584">bpo-44584</a>).</p></li>
<li><p>Importing from the <code class="docutils literal notranslate"><span class="pre">typing.io</span></code> and <code class="docutils literal notranslate"><span class="pre">typing.re</span></code> submodules will now emit
<a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a>.  These submodules will be removed in a future version
of Python.  Anything belonging to these submodules should be imported directly
from <a class="reference internal" href="../library/typing.html#module-typing" title="typing: Support for type hints (see :pep:`484`)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">typing</span></code></a> instead.
(Contributed by Sebastian Rittau in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38291">bpo-38291</a>.)</p></li>
</ul>
</section>
<section id="removed">
<span id="whatsnew310-removed"></span><h2>Retrait<a class="headerlink" href="#removed" title="Lien permanent vers ce titre">¶</a></h2>
<ul>
<li><p>Les méthodes spéciales <code class="docutils literal notranslate"><span class="pre">__int__</span></code>, <code class="docutils literal notranslate"><span class="pre">__float__</span></code>, <code class="docutils literal notranslate"><span class="pre">__floordiv__</span></code>, <code class="docutils literal notranslate"><span class="pre">__mod__</span></code>, <code class="docutils literal notranslate"><span class="pre">__divmod__</span></code>, <code class="docutils literal notranslate"><span class="pre">__rfloordiv__</span></code>, <code class="docutils literal notranslate"><span class="pre">__rmod__</span></code> et <code class="docutils literal notranslate"><span class="pre">__rdivmod__</span></code> sont retirées de la classe <a class="reference internal" href="../library/functions.html#complex" title="complex"><code class="xref py py-class docutils literal notranslate"><span class="pre">complex</span></code></a>. Elles levaient toujours une <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> (contribution de <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41974">bpo-41974</a>).</p></li>
<li><p>La méthode <code class="docutils literal notranslate"><span class="pre">ParserBase.error()</span></code> du module privé et non-documenté <code class="docutils literal notranslate"><span class="pre">_markupbase</span></code> a été retirée. <a class="reference internal" href="../library/html.parser.html#html.parser.HTMLParser" title="html.parser.HTMLParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">html.parser.HTMLParser</span></code></a> est la seule sous-classe de <code class="docutils literal notranslate"><span class="pre">ParserBase</span></code> et son implémentation de la méthode <code class="docutils literal notranslate"><span class="pre">error()</span></code> a été retirée dans Python 3.5 (contribution de <em>Berker Peksag</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=31844">bpo-31844</a>).</p></li>
<li><p>Retrait de l'attribut <code class="docutils literal notranslate"><span class="pre">unicodedata.ucnhash_CAPI</span></code> qui était un objet <code class="docutils literal notranslate"><span class="pre">PyCapsule</span></code> interne. La structure privée associée <code class="docutils literal notranslate"><span class="pre">_PyUnicode_Name_CAPI</span></code> a été déplacée vers l'API C interne (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42157">bpo-42157</a>).</p></li>
<li><p>Retrait du module <code class="docutils literal notranslate"><span class="pre">parser</span></code> qui était obsolète depuis 3.9 étant donné la transition vers le nouvel analyseur syntaxique PEG. Retrait aussi des fichiers source et en-tête C qui n'étaient utilisés que par l'ancien analyseur, ceci comprend <code class="docutils literal notranslate"><span class="pre">node.h</span></code>, <code class="docutils literal notranslate"><span class="pre">parser.h</span></code>, <code class="docutils literal notranslate"><span class="pre">graminit.h</span></code> et <code class="docutils literal notranslate"><span class="pre">grammar.h</span></code>.</p></li>
<li><p>Retrait des fonctions <code class="docutils literal notranslate"><span class="pre">PyParser_SimpleParseStringFlags</span></code>, <code class="docutils literal notranslate"><span class="pre">PyParser_SimpleParseStringFlagsFilename</span></code>, <code class="docutils literal notranslate"><span class="pre">PyParser_SimpleParseFileFlags</span></code> et <code class="docutils literal notranslate"><span class="pre">PyNode_Compile</span></code> de l'API C publique. Elles étaient obsolètes depuis 3.9 étant donné la transition vers l'analyseur syntaxique <em>PEG</em>.</p></li>
<li><p>Removed the <code class="docutils literal notranslate"><span class="pre">formatter</span></code> module, which was deprecated in Python 3.4.
It is somewhat obsolete, little used, and not tested. It was originally
scheduled to be removed in Python 3.6, but such removals were delayed until
after Python 2.7 EOL. Existing users should copy whatever classes they use
into their code.
(Contributed by Donghee Na and Terry J. Reedy in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42299">bpo-42299</a>.)</p></li>
<li><p>Removed the <code class="xref c c-func docutils literal notranslate"><span class="pre">PyModule_GetWarningsModule()</span></code> function that was useless
now due to the <code class="xref py py-mod docutils literal notranslate"><span class="pre">_warnings</span></code> module was converted to a builtin module in 2.6.
(Contributed by Hai Shi in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42599">bpo-42599</a>.)</p></li>
<li><p>Retrait des alias obsolètes <a class="reference internal" href="../library/collections.abc.html#collections-abstract-base-classes"><span class="std std-ref">Classes de base abstraites de collections</span></a> du module <a class="reference internal" href="../library/collections.html#module-collections" title="collections: Container datatypes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">collections</span></code></a> (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37324">bpo-37324</a>).</p></li>
<li><p>Le paramètre <code class="docutils literal notranslate"><span class="pre">loop</span></code> a été retiré de la majorité de <a class="reference internal" href="../library/asyncio-api-index.html"><span class="doc">l'API haut-niveau</span></a> d'<a class="reference internal" href="../library/asyncio.html#module-asyncio" title="asyncio: Asynchronous I/O."><code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code></a>. Il était obsolète depuis Python 3.8. La motivation pour ce changement avait plusieurs facettes :</p>
<ol class="arabic simple">
<li><p>ceci simplifie l'API haut-niveau ;</p></li>
<li><p>les fonctions dans l'API haut niveau reçoivent implicitement la boucle d'évènements qui tourne dans le présent fil d'exécution depuis Python 3.7. Il n'y a aucun besoin de passer la boucle d'évènements à l'API dans la majorité de son utilisation normale ;</p></li>
<li><p>le passage de la boucle d'évènements cause facilement des erreurs quand plusieurs boucles qui tournent dans plusieurs fils d'exécution sont impliquées.</p></li>
</ol>
<p>Prenez note que l'API bas-niveau accepte toujours le paramètre <code class="docutils literal notranslate"><span class="pre">loop</span></code>. Voir <a class="reference internal" href="#changes-python-api"><span class="std std-ref">Changements dans l'API Python</span></a> pour plus d'exemples sur comment remplacer le code existant</p>
<p>(contribution de <em>Yurii Karabas</em>, <em>Andrew Svetlov</em>, <em>Yury Selivanov</em> et <em>Kyle Stanley</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42392">bpo-42392</a>).</p>
</li>
</ul>
</section>
<section id="porting-to-python-3-10">
<h2>Portage vers Python 3.10<a class="headerlink" href="#porting-to-python-3-10" title="Lien permanent vers ce titre">¶</a></h2>
<p>Cette section liste les changements mentionnés préalablement et autres améliorations qui peuvent demander des changements à votre code.</p>
<section id="changes-in-the-python-syntax">
<h3>Changements à la syntaxe de Python<a class="headerlink" href="#changes-in-the-python-syntax" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><p>Deprecation warning is now emitted when compiling previously valid syntax
if the numeric literal is immediately followed by a keyword (like in <code class="docutils literal notranslate"><span class="pre">0in</span> <span class="pre">x</span></code>).
In future releases it will be changed to syntax warning, and finally to a
syntax error.  To get rid of the warning and make the code compatible with
future releases just add a space between the numeric literal and the
following keyword.
(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43833">bpo-43833</a>.)</p></li>
</ul>
</section>
<section id="changes-in-the-python-api">
<span id="changes-python-api"></span><h3>Changements dans l'API Python<a class="headerlink" href="#changes-in-the-python-api" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><p>Les paramètres <em>etype</em> des fonctions <a class="reference internal" href="../library/traceback.html#traceback.format_exception" title="traceback.format_exception"><code class="xref py py-func docutils literal notranslate"><span class="pre">format_exception()</span></code></a>, <a class="reference internal" href="../library/traceback.html#traceback.format_exception_only" title="traceback.format_exception_only"><code class="xref py py-func docutils literal notranslate"><span class="pre">format_exception_only()</span></code></a> et <a class="reference internal" href="../library/traceback.html#traceback.print_exception" title="traceback.print_exception"><code class="xref py py-func docutils literal notranslate"><span class="pre">print_exception()</span></code></a> du module <a class="reference internal" href="../library/traceback.html#module-traceback" title="traceback: Print or retrieve a stack traceback."><code class="xref py py-mod docutils literal notranslate"><span class="pre">traceback</span></code></a> ont étés renommés <em>exc</em> (contribution de <em>Zackery Spytz</em> et <em>Matthias Bussonnier</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=26389">bpo-26389</a>).</p></li>
<li><p><a class="reference internal" href="../library/atexit.html#module-atexit" title="atexit: Register and execute cleanup functions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">atexit</span></code></a> : à la fin de l'exécution de Python, si une fonction de rappel qui a été enregistrée avec <a class="reference internal" href="../library/atexit.html#atexit.register" title="atexit.register"><code class="xref py py-func docutils literal notranslate"><span class="pre">atexit.register()</span></code></a> échoue, son exception est maintenant journalisée. Préalablement, seulement certaines exceptions étaient journalisées et la dernière exception était toujours ignorée de façon silencieuse (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42639">bpo-42639</a>).</p></li>
<li><p>Les génériques de <a class="reference internal" href="../library/collections.abc.html#collections.abc.Callable" title="collections.abc.Callable"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Callable</span></code></a> aplatissent maintenant les paramètres de types tel qu'il est fait par <a class="reference internal" href="../library/typing.html#typing.Callable" title="typing.Callable"><code class="xref py py-data docutils literal notranslate"><span class="pre">typing.Callable</span></code></a>. Ceci veut dire que <code class="docutils literal notranslate"><span class="pre">collections.abc.Callable[[int,</span> <span class="pre">str],</span> <span class="pre">str]</span></code> aura un attribut <code class="docutils literal notranslate"><span class="pre">__args__</span></code> de valeur <code class="docutils literal notranslate"><span class="pre">(int,</span> <span class="pre">str,</span> <span class="pre">str)</span></code> ; préalablement, il aurait été <code class="docutils literal notranslate"><span class="pre">([int,</span> <span class="pre">str],</span> <span class="pre">str)</span></code>. Les codes qui accèdent aux arguments par <a class="reference internal" href="../library/typing.html#typing.get_args" title="typing.get_args"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.get_args()</span></code></a> ou <code class="docutils literal notranslate"><span class="pre">__args__</span></code> doivent tenir compte de ce changement. De plus, <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> sera levée pour des formes invalides de paramétrisation de <a class="reference internal" href="../library/collections.abc.html#collections.abc.Callable" title="collections.abc.Callable"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Callable</span></code></a>, ce qui aurait pu passer silencieusement dans Python 3.9 (contribution de <em>Ken Jin</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42195">bpo-42195</a>).</p></li>
<li><p><a class="reference internal" href="../library/socket.html#socket.htons" title="socket.htons"><code class="xref py py-meth docutils literal notranslate"><span class="pre">socket.htons()</span></code></a> et <a class="reference internal" href="../library/socket.html#socket.ntohs" title="socket.ntohs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">socket.ntohs()</span></code></a> lèvent maintenant <a class="reference internal" href="../library/exceptions.html#OverflowError" title="OverflowError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OverflowError</span></code></a> plutôt que <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> si le paramètre passé est trop grand pour être stocké dans un entier 16-bit non-signé (contribution de <em>Erlend E. Aasland</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42393">bpo-42393</a>).</p></li>
<li><p>Le paramètre <code class="docutils literal notranslate"><span class="pre">loop</span></code> a été retiré de la majorité de <a class="reference internal" href="../library/asyncio-api-index.html"><span class="doc">l'API haut-niveau</span></a> d'<a class="reference internal" href="../library/asyncio.html#module-asyncio" title="asyncio: Asynchronous I/O."><code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code></a> suite à la déclaration de son obsolescence dans Python 3.8.</p>
<p>Une coroutine qui ressemble actuellement à ceci :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">loop</span><span class="p">):</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">loop</span><span class="o">=</span><span class="n">loop</span><span class="p">)</span>
</pre></div>
</div>
<p>Doit être remplacée par ceci :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Si <code class="docutils literal notranslate"><span class="pre">foo()</span></code> a été spécifiquement conçue pour <em>ne pas</em> s'exécuter dans le fil d'exécution courant, (par exemple pour tourner dans la boucle d'exécution d'un autre fil), l'utilisation de <a class="reference internal" href="../library/asyncio-task.html#asyncio.run_coroutine_threadsafe" title="asyncio.run_coroutine_threadsafe"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.run_coroutine_threadsafe()</span></code></a> est probablement plus appropriée.</p>
<p>(contribution de <em>Yurii Karabas</em>, <em>Andrew Svetlov</em>, <em>Yury Selivanov</em> et <em>Kyle Stanley</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42392">bpo-42392</a>).</p>
</li>
<li><p>Le constructeur de <a class="reference internal" href="../library/types.html#types.FunctionType" title="types.FunctionType"><code class="xref py py-data docutils literal notranslate"><span class="pre">types.FunctionType</span></code></a> hérite maintenant des définitions natives si le dictionnaire <em>globals</em> n'a pas de clé <code class="docutils literal notranslate"><span class="pre">&quot;__builtins__&quot;</span></code>, plutôt que d'utiliser <code class="docutils literal notranslate"><span class="pre">{&quot;None&quot;:</span> <span class="pre">None}</span></code> pour les définitions natives : même comportement que celui des fonctions <a class="reference internal" href="../library/functions.html#eval" title="eval"><code class="xref py py-func docutils literal notranslate"><span class="pre">eval()</span></code></a> et <a class="reference internal" href="../library/functions.html#exec" title="exec"><code class="xref py py-func docutils literal notranslate"><span class="pre">exec()</span></code></a>. Définir une fonction avec <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">function(...):</span> <span class="pre">...</span></code> en Python n'est pas affecté, les globales ne peuvent pas être changées avec cette syntaxe : elles héritent aussi des définitions natives courantes (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42990">bpo-42990</a>).</p></li>
</ul>
</section>
<section id="changes-in-the-c-api">
<h3>Changements dans l'API C<a class="headerlink" href="#changes-in-the-c-api" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><p>Les fonctions de l'API C <code class="docutils literal notranslate"><span class="pre">PyParser_SimpleParseStringFlags</span></code>, <code class="docutils literal notranslate"><span class="pre">PyParser_SimpleParseStringFlagsFilename</span></code>, <code class="docutils literal notranslate"><span class="pre">PyParser_SimpleParseFileFlags</span></code> et <code class="docutils literal notranslate"><span class="pre">PyNode_Compile</span></code> ainsi que <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">_node</span></code>, le type utilisé par ces fonctions, ont été retirés suite à la transition vers le nouvel analyseur syntaxique <em>PEG</em>.</p>
<p>Le code source doit maintenant être compilé directement en un objet code, en utilisant par exemple <a class="reference internal" href="../c-api/veryhigh.html#c.Py_CompileString" title="Py_CompileString"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_CompileString()</span></code></a>. L'objet code ainsi produit peut ensuite être évalué, en utilisant par exemple <a class="reference internal" href="../c-api/veryhigh.html#c.PyEval_EvalCode" title="PyEval_EvalCode"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyEval_EvalCode()</span></code></a>.</p>
<p>Spécifiquement :</p>
<ul>
<li><p>Un appel à <code class="docutils literal notranslate"><span class="pre">PyParser_SimpleParseStringFlags</span></code> suivi de <code class="docutils literal notranslate"><span class="pre">PyNode_Compile</span></code> peut être remplacé par <a class="reference internal" href="../c-api/veryhigh.html#c.Py_CompileString" title="Py_CompileString"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_CompileString()</span></code></a> ;</p></li>
<li><p>Il n'y a pas de remplacement immédiat pour <code class="docutils literal notranslate"><span class="pre">PyParser_SimpleParseFileFlags</span></code>. Pour compiler du code à partir d'un argument <code class="docutils literal notranslate"><span class="pre">FILE</span> <span class="pre">*</span></code>, vous devez lire le fichier en C et passer le tampon résultant à <a class="reference internal" href="../c-api/veryhigh.html#c.Py_CompileString" title="Py_CompileString"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_CompileString()</span></code></a>.</p></li>
<li><p>Pour compiler un fichier à partir du <code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">*</span></code> de son nom, ouvrez le fichier de façon explicite, lisez son contenu et compilez le résultat. Une façon de faire est d'utiliser le module <a class="reference internal" href="../library/io.html#module-io" title="io: Core tools for working with streams."><code class="xref py py-mod docutils literal notranslate"><span class="pre">io</span></code></a> en conjonction avec <a class="reference internal" href="../c-api/import.html#c.PyImport_ImportModule" title="PyImport_ImportModule"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyImport_ImportModule()</span></code></a>, <a class="reference internal" href="../c-api/call.html#c.PyObject_CallMethod" title="PyObject_CallMethod"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_CallMethod()</span></code></a>, <a class="reference internal" href="../c-api/bytes.html#c.PyBytes_AsString" title="PyBytes_AsString"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyBytes_AsString()</span></code></a> et <a class="reference internal" href="../c-api/veryhigh.html#c.Py_CompileString" title="Py_CompileString"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_CompileString()</span></code></a>, comme dans l'esquisse qui suit (les déclarations et la gestion d'erreurs ne sont pas incluses)</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">io_module</span> <span class="o">=</span> <span class="n">Import_ImportModule</span><span class="p">(</span><span class="s2">&quot;io&quot;</span><span class="p">);</span>
<span class="n">fileobject</span> <span class="o">=</span> <span class="n">PyObject_CallMethod</span><span class="p">(</span><span class="n">io_module</span><span class="p">,</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span> <span class="s2">&quot;ss&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">);</span>
<span class="n">source_bytes_object</span> <span class="o">=</span> <span class="n">PyObject_CallMethod</span><span class="p">(</span><span class="n">fileobject</span><span class="p">,</span> <span class="s2">&quot;read&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">PyObject_CallMethod</span><span class="p">(</span><span class="n">fileobject</span><span class="p">,</span> <span class="s2">&quot;close&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
<span class="n">source_buf</span> <span class="o">=</span> <span class="n">PyBytes_AsString</span><span class="p">(</span><span class="n">source_bytes_object</span><span class="p">);</span>
<span class="n">code</span> <span class="o">=</span> <span class="n">Py_CompileString</span><span class="p">(</span><span class="n">source_buf</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">Py_file_input</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p>Pour les objets <code class="docutils literal notranslate"><span class="pre">FrameObject</span></code>, le champ <code class="docutils literal notranslate"><span class="pre">f_lasti</span></code> représente maintenant en décalage par <em>wordcode</em> plutôt qu'un simple décalage dans la chaîne de code intermédiaire. Il est donc nécessaire de multiplier ce nombre par 2 pour l'utiliser dans les API qui attendent un décalage par octet (tel que <a class="reference internal" href="../c-api/code.html#c.PyCode_Addr2Line" title="PyCode_Addr2Line"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyCode_Addr2Line()</span></code></a>, par exemple). Prenez aussi note que le champ <code class="docutils literal notranslate"><span class="pre">f_lasti</span></code> de <code class="docutils literal notranslate"><span class="pre">FrameObject</span></code> n'est pas considéré stable : utilisez plutôt <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetLineNumber" title="PyFrame_GetLineNumber"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetLineNumber()</span></code></a>.</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="cpython-bytecode-changes">
<h2>Changements au code intermédiaire CPython<a class="headerlink" href="#cpython-bytecode-changes" title="Lien permanent vers ce titre">¶</a></h2>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">MAKE_FUNCTION</span></code> instruction now accepts either a dict or a tuple of
strings as the function's annotations.
(Contributed by Yurii Karabas and Inada Naoki in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42202">bpo-42202</a>.)</p></li>
</ul>
</section>
<section id="build-changes">
<h2>Changements à la compilation<a class="headerlink" href="#build-changes" title="Lien permanent vers ce titre">¶</a></h2>
<ul>
<li><p><span class="target" id="index-110"></span><a class="pep reference external" href="https://peps.python.org/pep-0644/"><strong>PEP 644</strong></a> : la version minimale d'<em>OpenSSL</em> pour Python est maintenant 1.1.1. <em>OpenSSL</em> 1.0.2 n'est plus prise en charge (contribution de <em>Christian Heimes</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43669">bpo-43669</a>).</p></li>
<li><p>Les fonctions de <em>C99</em> <code class="xref c c-func docutils literal notranslate"><span class="pre">snprintf()</span></code> et <code class="xref c c-func docutils literal notranslate"><span class="pre">vsnprintf()</span></code> sont maintenant nécessaires à la compilation de Python (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36020">bpo-36020</a>).</p></li>
<li><p>La version minimale de SQLite pour le module <a class="reference internal" href="../library/sqlite3.html#module-sqlite3" title="sqlite3: A DB-API 2.0 implementation using SQLite 3.x."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlite3</span></code></a> est maintenant 3.7.15 (contribution de <em>Sergey Fedoseev</em> et <em>Erlend E. Aasland</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40744">bpo-40744</a> et <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40810">bpo-40810</a>).</p></li>
<li><p>Le module <a class="reference internal" href="../library/atexit.html#module-atexit" title="atexit: Register and execute cleanup functions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">atexit</span></code></a> doit maintenant toujours être compilé en tant que module natif (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42639">bpo-42639</a>).</p></li>
<li><p>Ajout de l'option <a class="reference internal" href="../using/configure.html#cmdoption-disable-test-modules"><code class="xref std std-option docutils literal notranslate"><span class="pre">--disable-test-modules</span></code></a> au script <code class="docutils literal notranslate"><span class="pre">configure</span></code> : ne pas compiler ni installer les modules de tests (contribution de <em>Xavier de Gaye</em>, <em>Thomas Petazzoni</em> et <em>Peixing Xin</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=27640">bpo-27640</a>).</p></li>
<li><p>Ajout de l'option <a class="reference internal" href="../using/configure.html#cmdoption-with-wheel-pkg-dir"><code class="xref std std-option docutils literal notranslate"><span class="pre">--with-wheel-pkg-dir=PATH</span></code></a> au script <code class="docutils literal notranslate"><span class="pre">./configure</span></code>. Si elle est passée, le module <a class="reference internal" href="../library/ensurepip.html#module-ensurepip" title="ensurepip: Bootstrapping the &quot;pip&quot; installer into an existing Python installation or virtual environment."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ensurepip</span></code></a> recherche les paquets <em>wheel</em> de <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> et de <code class="docutils literal notranslate"><span class="pre">pip</span></code> dans ce répertoire : si les deux sont présents, ces paquets <em>wheel</em> sont utilisés plutôt que ceux inclus avec <em>ensurepip</em>.</p>
<p>La politique de paquets de certaines distributions Linux déconseille l'inclusion des dépendances. Par exemple, Fedora installe les paquets <em>wheel</em> dans le répertoire <code class="docutils literal notranslate"><span class="pre">/usr/share/python-wheels/</span></code> et n'installe pas le paquet <code class="docutils literal notranslate"><span class="pre">ensurepip._bundled</span></code></p>
<p>(contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42856">bpo-42856</a>).</p>
</li>
<li><p>Ajout d'une nouvelle option <a class="reference internal" href="../using/configure.html#cmdoption-without-static-libpython"><code class="xref std std-option docutils literal notranslate"><span class="pre">--without-static-libpython</span></code></a> au script <code class="docutils literal notranslate"><span class="pre">configure</span></code> pour ne pas compiler la bibliothèque statique <code class="docutils literal notranslate"><span class="pre">libpythonMAJOR.MINOR.a</span></code> et ne pas installer le fichier objet <code class="docutils literal notranslate"><span class="pre">python.o</span></code></p>
<p>(contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43103">bpo-43103</a>).</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">configure</span></code> script now uses the <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code> utility, if available,
to detect the location of Tcl/Tk headers and libraries.  As before, those
locations can be explicitly specified with the <code class="docutils literal notranslate"><span class="pre">--with-tcltk-includes</span></code>
and <code class="docutils literal notranslate"><span class="pre">--with-tcltk-libs</span></code> configuration options.
(Contributed by Manolis Stamatogiannakis in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42603">bpo-42603</a>.)</p></li>
<li><p>Ajout de l'option <a class="reference internal" href="../using/configure.html#cmdoption-with-openssl-rpath"><code class="xref std std-option docutils literal notranslate"><span class="pre">--with-openssl-rpath</span></code></a> au script <code class="docutils literal notranslate"><span class="pre">configure</span></code>. Cette option simplifie la compilation de Python avec une installation personnalisée d'OpenSSL, par exemple : <code class="docutils literal notranslate"><span class="pre">./configure</span> <span class="pre">--with-openssl=/path/to/openssl</span> <span class="pre">--with-openssl-rpath=auto</span></code> (contribution de <em>Christian Heimes</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43466">bpo-43466</a>).</p></li>
</ul>
</section>
<section id="c-api-changes">
<h2>Changements à l'API C<a class="headerlink" href="#c-api-changes" title="Lien permanent vers ce titre">¶</a></h2>
<section id="pep-652-maintaining-the-stable-abi">
<h3>PEP 652 : maintenance d'une ABI stable<a class="headerlink" href="#pep-652-maintaining-the-stable-abi" title="Lien permanent vers ce titre">¶</a></h3>
<p>L'interface binaire-programme (<em>Application Binary Interface</em>, <em>ABI</em> en anglais) stable pour les modules d'extension ou pour l'intégration de Python est maintenant définie de façon explicite. Le document <a class="reference internal" href="../c-api/stable.html#stable"><span class="std std-ref">Stabilité de l’API C</span></a> décrit les garanties de stabilité pour l'API C et pour l'interface binaire-programme ainsi que les bonnes pratiques pour travailler avec l'interface binaire-programme stable</p>
<p>(contribution de <em>Petr Viktorin</em> dans <span class="target" id="index-111"></span><a class="pep reference external" href="https://peps.python.org/pep-0652/"><strong>PEP 652</strong></a> et dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43795">bpo-43795</a>).</p>
</section>
<section id="id1">
<h3>Nouvelles fonctionnalités<a class="headerlink" href="#id1" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><p>Le résultat de <a class="reference internal" href="../c-api/number.html#c.PyNumber_Index" title="PyNumber_Index"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyNumber_Index()</span></code></a> est maintenant exactement de type <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>. Auparavant, le résultat pouvait être une instance d'une classe dérivée de <code class="docutils literal notranslate"><span class="pre">int</span></code> (contribution de <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40792">bpo-40792</a>).</p></li>
<li><p>Ajout d'un nouveau champ <a class="reference internal" href="../c-api/init_config.html#c.PyConfig.orig_argv" title="PyConfig.orig_argv"><code class="xref c c-member docutils literal notranslate"><span class="pre">orig_argv</span></code></a> à la structure <a class="reference internal" href="../c-api/init_config.html#c.PyConfig" title="PyConfig"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyConfig</span></code></a> : la liste des arguments de ligne de commande originalement passée à l'exécutable Python (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=23427">bpo-23427</a>).</p></li>
<li><p>Les macros <a class="reference internal" href="../c-api/datetime.html#c.PyDateTime_DATE_GET_TZINFO" title="PyDateTime_DATE_GET_TZINFO"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyDateTime_DATE_GET_TZINFO()</span></code></a> et <a class="reference internal" href="../c-api/datetime.html#c.PyDateTime_TIME_GET_TZINFO" title="PyDateTime_TIME_GET_TZINFO"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyDateTime_TIME_GET_TZINFO()</span></code></a> ont été ajoutées pour récupérer l'attribut <code class="docutils literal notranslate"><span class="pre">tzinfo</span></code> des objets <a class="reference internal" href="../library/datetime.html#datetime.datetime" title="datetime.datetime"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.datetime</span></code></a> et <a class="reference internal" href="../library/datetime.html#datetime.time" title="datetime.time"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.time</span></code></a> (contribution de <em>Zackery Spytz</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=30155">bpo-30155</a>).</p></li>
<li><p>Ajout d'une fonction <a class="reference internal" href="../c-api/codec.html#c.PyCodec_Unregister" title="PyCodec_Unregister"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyCodec_Unregister()</span></code></a> pour désinscrire une fonction de recherche de codecs (contribution de <em>Hai Shi</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41842">bpo-41842</a>).</p></li>
<li><p>Ajout de la fonction <a class="reference internal" href="../c-api/iter.html#c.PyIter_Send" title="PyIter_Send"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyIter_Send()</span></code></a> pour acheminer une valeur dans un itérateur sans lever une exception <code class="docutils literal notranslate"><span class="pre">StopIteration</span></code> (contribution de <em>Vladimir Matveev</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41756">bpo-41756</a>).</p></li>
<li><p>Ajout de <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_AsUTF8AndSize" title="PyUnicode_AsUTF8AndSize"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_AsUTF8AndSize()</span></code></a> à l'API C limitée (contribution d'<em>Alex Gaynor</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41784">bpo-41784</a>).</p></li>
<li><p>Ajout de la fonction <a class="reference internal" href="../c-api/module.html#c.PyModule_AddObjectRef" title="PyModule_AddObjectRef"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyModule_AddObjectRef()</span></code></a> : comparable à <a class="reference internal" href="../c-api/module.html#c.PyModule_AddObject" title="PyModule_AddObject"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyModule_AddObject()</span></code></a> mais ne s’accapare pas une référence à la valeur s'il y a réussite (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1635741">bpo-1635741</a>).</p></li>
<li><p>Ajout des fonctions <a class="reference internal" href="../c-api/refcounting.html#c.Py_NewRef" title="Py_NewRef"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_NewRef()</span></code></a> et <a class="reference internal" href="../c-api/refcounting.html#c.Py_XNewRef" title="Py_XNewRef"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_XNewRef()</span></code></a> pour incrémenter le compteur des références d'un objet et renvoyer l'objet (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42262">bpo-42262</a>).</p></li>
<li><p>Les fonctions <a class="reference internal" href="../c-api/type.html#c.PyType_FromSpecWithBases" title="PyType_FromSpecWithBases"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_FromSpecWithBases()</span></code></a> et <a class="reference internal" href="../c-api/type.html#c.PyType_FromModuleAndSpec" title="PyType_FromModuleAndSpec"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_FromModuleAndSpec()</span></code></a> n'acceptent maintenant qu'une seule classe pour l'argument <em>bases</em> (contribution <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42423">bpo-42423</a>).</p></li>
<li><p>La fonction <a class="reference internal" href="../c-api/type.html#c.PyType_FromModuleAndSpec" title="PyType_FromModuleAndSpec"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_FromModuleAndSpec()</span></code></a> accepte maintenant <code class="docutils literal notranslate"><span class="pre">NULL</span></code> dans l'emplacement <code class="docutils literal notranslate"><span class="pre">tp_doc</span></code> (contribution de <em>Hai Shi</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41832">bpo-41832</a>).</p></li>
<li><p>La fonction <a class="reference internal" href="../c-api/type.html#c.PyType_GetSlot" title="PyType_GetSlot"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_GetSlot()</span></code></a> peut maintenant accepter des <a class="reference internal" href="../c-api/typeobj.html#static-types"><span class="std std-ref">types statiques</span></a> (contribution de <em>Hai Shi</em> et <em>Petr Viktorin</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41073">bpo-41073</a>).</p></li>
<li><p>Ajout d'une nouvelle fonction <a class="reference internal" href="../c-api/set.html#c.PySet_CheckExact" title="PySet_CheckExact"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySet_CheckExact()</span></code></a> à l'API C pour vérifier si un objet est une instance de <a class="reference internal" href="../library/stdtypes.html#set" title="set"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a> mais pas une instance d'un sous-type (contribution de <em>Pablo Galindo</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43277">bpo-43277</a>).</p></li>
<li><p>Ajout de <a class="reference internal" href="../c-api/exceptions.html#c.PyErr_SetInterruptEx" title="PyErr_SetInterruptEx"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_SetInterruptEx()</span></code></a> qui accepte le numéro d'un signal à simuler (contribution d'<em>Antoine Pitrou</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43356">bpo-43356</a>).</p></li>
<li><p>L'API C limitée est maintenant prise en charge si Python est compilé en <a class="reference internal" href="../using/configure.html#debug-build"><span class="std std-ref">mode débogage</span></a> (si la macro <code class="docutils literal notranslate"><span class="pre">Py_DEBUG</span></code> est définie). Dans l'API C limitée, les fonctions <a class="reference internal" href="../c-api/refcounting.html#c.Py_INCREF" title="Py_INCREF"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_INCREF()</span></code></a> et <a class="reference internal" href="../c-api/refcounting.html#c.Py_DECREF" title="Py_DECREF"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_DECREF()</span></code></a> sont maintenant implémentées en appel de fonctions opaques, plutôt que d'accéder directement au champ <a class="reference internal" href="../c-api/typeobj.html#c.PyObject.ob_refcnt" title="PyObject.ob_refcnt"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyObject.ob_refcnt</span></code></a>. C'est le cas si Python est compilé en mode débogage et que la macro <code class="docutils literal notranslate"><span class="pre">Py_LIMITED_API</span></code> vise Python 3.10 ou plus récent. Il est possible de prendre en charge l'API C limitée en mode débogage, car la structure <a class="reference internal" href="../c-api/structures.html#c.PyObject" title="PyObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyObject</span></code></a> est la même dans les versions standard et dans les versions débogage depuis Python 3.8 (voir <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36465">bpo-36465</a>).</p>
<p>L'API C limitée n'est toujours pas prise en charge dans les compilations spéciales avec l'option <a class="reference internal" href="../using/configure.html#cmdoption-with-trace-refs"><code class="xref std std-option docutils literal notranslate"><span class="pre">--with-trace-refs</span></code></a> (macro <code class="docutils literal notranslate"><span class="pre">Py_TRACE_REFS</span></code>) (Contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43688">bpo-43688</a>).</p>
</li>
<li><p>Ajout de la fonction <a class="reference internal" href="../c-api/structures.html#c.Py_Is" title="Py_Is"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_Is(x,</span> <span class="pre">y)</span></code></a> pour vérifier si l'objet <em>x</em> est l'objet <em>y</em>, tout comme <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">is</span> <span class="pre">y</span></code> en Python. Ajout aussi des fonctions <a class="reference internal" href="../c-api/structures.html#c.Py_IsNone" title="Py_IsNone"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_IsNone()</span></code></a>, <a class="reference internal" href="../c-api/structures.html#c.Py_IsTrue" title="Py_IsTrue"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_IsTrue()</span></code></a> et <a class="reference internal" href="../c-api/structures.html#c.Py_IsFalse" title="Py_IsFalse"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_IsFalse()</span></code></a> pour vérifier si l'objet est le singleton <code class="docutils literal notranslate"><span class="pre">None</span></code>, le singleton <code class="docutils literal notranslate"><span class="pre">True</span></code> ou le singleton <code class="docutils literal notranslate"><span class="pre">False</span></code>, respectivement (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43753">bpo-43753</a>).</p></li>
<li><p>Ajout de fonctions pour contrôler le ramasse-miettes en C : <a class="reference internal" href="../c-api/gcsupport.html#c.PyGC_Enable" title="PyGC_Enable"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyGC_Enable()</span></code></a>, <a class="reference internal" href="../c-api/gcsupport.html#c.PyGC_Disable" title="PyGC_Disable"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyGC_Disable()</span></code></a> et <a class="reference internal" href="../c-api/gcsupport.html#c.PyGC_IsEnabled" title="PyGC_IsEnabled"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyGC_IsEnabled()</span></code></a>. Ces fonctions permettent d'activer, de désactiver et d'interroger l'état du ramasse-miettes dans du code C sans avoir à importer le module <a class="reference internal" href="../library/gc.html#module-gc" title="gc: Interface to the cycle-detecting garbage collector."><code class="xref py py-mod docutils literal notranslate"><span class="pre">gc</span></code></a>.</p></li>
<li><p>Add a new <a class="reference internal" href="../c-api/typeobj.html#c.Py_TPFLAGS_DISALLOW_INSTANTIATION" title="Py_TPFLAGS_DISALLOW_INSTANTIATION"><code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_TPFLAGS_DISALLOW_INSTANTIATION</span></code></a> type flag to disallow
creating type instances.
(Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43916">bpo-43916</a>.)</p></li>
<li><p>Add a new <a class="reference internal" href="../c-api/typeobj.html#c.Py_TPFLAGS_IMMUTABLETYPE" title="Py_TPFLAGS_IMMUTABLETYPE"><code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_TPFLAGS_IMMUTABLETYPE</span></code></a> type flag for creating immutable
type objects: type attributes cannot be set nor deleted.
(Contributed by Victor Stinner and Erlend E. Aasland in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43908">bpo-43908</a>.)</p></li>
</ul>
</section>
<section id="id2">
<h3>Portage vers Python 3.10<a class="headerlink" href="#id2" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">PY_SSIZE_T_CLEAN</span></code> macro must now be defined to use
<a class="reference internal" href="../c-api/arg.html#c.PyArg_ParseTuple" title="PyArg_ParseTuple"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyArg_ParseTuple()</span></code></a> and <a class="reference internal" href="../c-api/arg.html#c.Py_BuildValue" title="Py_BuildValue"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_BuildValue()</span></code></a> formats which use
<code class="docutils literal notranslate"><span class="pre">#</span></code>: <code class="docutils literal notranslate"><span class="pre">es#</span></code>, <code class="docutils literal notranslate"><span class="pre">et#</span></code>, <code class="docutils literal notranslate"><span class="pre">s#</span></code>, <code class="docutils literal notranslate"><span class="pre">u#</span></code>, <code class="docutils literal notranslate"><span class="pre">y#</span></code>, <code class="docutils literal notranslate"><span class="pre">z#</span></code>, <code class="docutils literal notranslate"><span class="pre">U#</span></code> and <code class="docutils literal notranslate"><span class="pre">Z#</span></code>.
See <a class="reference internal" href="../c-api/arg.html#arg-parsing"><span class="std std-ref">Analyse des arguments et construction des valeurs</span></a> and <span class="target" id="index-37"></span><a class="pep reference external" href="https://peps.python.org/pep-0353/"><strong>PEP 353</strong></a>.
(Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40943">bpo-40943</a>.)</p></li>
<li><p>Étant donné la conversion de <a class="reference internal" href="../c-api/refcounting.html#c.Py_REFCNT" title="Py_REFCNT"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_REFCNT()</span></code></a> en fonction statique en-ligne, <code class="docutils literal notranslate"><span class="pre">Py_REFCNT(obj)</span> <span class="pre">=</span> <span class="pre">new_refcnt</span></code> doit être remplacé par <code class="docutils literal notranslate"><span class="pre">Py_SET_REFCNT(obj,</span> <span class="pre">new_refcnt)</span></code> : voir <a class="reference internal" href="../c-api/refcounting.html#c.Py_SET_REFCNT" title="Py_SET_REFCNT"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_SET_REFCNT()</span></code></a> (disponible depuis Python 3.9). Pour la rétro-compatibilité, cette macro peut être utilisée :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#if PY_VERSION_HEX &lt; 0x030900A4</span>
<span class="c1">#  define Py_SET_REFCNT(obj, refcnt) ((Py_REFCNT(obj) = (refcnt)), (void)0)</span>
<span class="c1">#endif</span>
</pre></div>
</div>
<p>(contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39573">bpo-39573</a>).</p>
</li>
<li><p>Appeler <a class="reference internal" href="../c-api/dict.html#c.PyDict_GetItem" title="PyDict_GetItem"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyDict_GetItem()</span></code></a> sans avoir obtenu le <a class="reference internal" href="../glossary.html#term-GIL"><span class="xref std std-term">GIL</span></a> était autorisé pour des raisons historiques. Ceci n'est plus permis (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40839">bpo-40839</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyUnicode_FromUnicode(NULL,</span> <span class="pre">size)</span></code> et <code class="docutils literal notranslate"><span class="pre">PyUnicode_FromStringAndSize(NULL,</span> <span class="pre">size)</span></code> lèvent maintenant un <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code>. Vous devez utiliser <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_New" title="PyUnicode_New"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_New()</span></code></a> pour allouer un objet Unicode sans donnée initiale (contribution de <em>Inada Naoki</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36346">bpo-36346</a>).</p></li>
<li><p>La structure privée <code class="docutils literal notranslate"><span class="pre">_PyUnicode_Name_CAPI</span></code> de l'API PyCapsule <code class="docutils literal notranslate"><span class="pre">unicodedata.ucnhash_CAPI</span></code> a été déplacée dans l'API C interne. (Contribution par Victor Stinner dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42157">bpo-42157</a>.)</p></li>
<li><p><a class="reference internal" href="../c-api/init.html#c.Py_GetPath" title="Py_GetPath"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_GetPath()</span></code></a>, <a class="reference internal" href="../c-api/init.html#c.Py_GetPrefix" title="Py_GetPrefix"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_GetPrefix()</span></code></a>, <a class="reference internal" href="../c-api/init.html#c.Py_GetExecPrefix" title="Py_GetExecPrefix"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_GetExecPrefix()</span></code></a>,
<a class="reference internal" href="../c-api/init.html#c.Py_GetProgramFullPath" title="Py_GetProgramFullPath"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_GetProgramFullPath()</span></code></a>, <a class="reference internal" href="../c-api/init.html#c.Py_GetPythonHome" title="Py_GetPythonHome"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_GetPythonHome()</span></code></a> and
<a class="reference internal" href="../c-api/init.html#c.Py_GetProgramName" title="Py_GetProgramName"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_GetProgramName()</span></code></a> functions now return <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if called before
<a class="reference internal" href="../c-api/init.html#c.Py_Initialize" title="Py_Initialize"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_Initialize()</span></code></a> (before Python is initialized). Use the new
<a class="reference internal" href="../c-api/init_config.html#init-config"><span class="std std-ref">Python Initialization Configuration</span></a> API to get the <a class="reference internal" href="../c-api/init_config.html#init-path-config"><span class="std std-ref">Python Path Configuration</span></a>.
(Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42260">bpo-42260</a>.)</p></li>
<li><p><a class="reference internal" href="../c-api/list.html#c.PyList_SET_ITEM" title="PyList_SET_ITEM"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyList_SET_ITEM()</span></code></a>, <a class="reference internal" href="../c-api/tuple.html#c.PyTuple_SET_ITEM" title="PyTuple_SET_ITEM"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyTuple_SET_ITEM()</span></code></a> and
<a class="reference internal" href="../c-api/cell.html#c.PyCell_SET" title="PyCell_SET"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyCell_SET()</span></code></a> macros can no longer be used as l-value or r-value.
For example, <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">PyList_SET_ITEM(a,</span> <span class="pre">b,</span> <span class="pre">c)</span></code> and
<code class="docutils literal notranslate"><span class="pre">PyList_SET_ITEM(a,</span> <span class="pre">b,</span> <span class="pre">c)</span> <span class="pre">=</span> <span class="pre">x</span></code> now fail with a compiler error. It prevents
bugs like <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(PyList_SET_ITEM</span> <span class="pre">(a,</span> <span class="pre">b,</span> <span class="pre">c)</span> <span class="pre">&lt;</span> <span class="pre">0)</span> <span class="pre">...</span></code> test.
(Contributed by Zackery Spytz and Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=30459">bpo-30459</a>.)</p></li>
<li><p>The non-limited API files <code class="docutils literal notranslate"><span class="pre">odictobject.h</span></code>, <code class="docutils literal notranslate"><span class="pre">parser_interface.h</span></code>,
<code class="docutils literal notranslate"><span class="pre">picklebufobject.h</span></code>, <code class="docutils literal notranslate"><span class="pre">pyarena.h</span></code>, <code class="docutils literal notranslate"><span class="pre">pyctype.h</span></code>, <code class="docutils literal notranslate"><span class="pre">pydebug.h</span></code>,
<code class="docutils literal notranslate"><span class="pre">pyfpe.h</span></code>, and <code class="docutils literal notranslate"><span class="pre">pytime.h</span></code> have been moved to the <code class="docutils literal notranslate"><span class="pre">Include/cpython</span></code>
directory. These files must not be included directly, as they are already
included in <code class="docutils literal notranslate"><span class="pre">Python.h</span></code>; see <a class="reference internal" href="../c-api/intro.html#api-includes"><span class="std std-ref">Include Files</span></a>. If they have
been included directly, consider including <code class="docutils literal notranslate"><span class="pre">Python.h</span></code> instead.
(Contributed by Nicholas Sim in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35134">bpo-35134</a>.)</p></li>
<li><p>Use the <a class="reference internal" href="../c-api/typeobj.html#c.Py_TPFLAGS_IMMUTABLETYPE" title="Py_TPFLAGS_IMMUTABLETYPE"><code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_TPFLAGS_IMMUTABLETYPE</span></code></a> type flag to create immutable type
objects. Do not rely on <a class="reference internal" href="../c-api/typeobj.html#c.Py_TPFLAGS_HEAPTYPE" title="Py_TPFLAGS_HEAPTYPE"><code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_TPFLAGS_HEAPTYPE</span></code></a> to decide if a type
object is mutable or not; check if <a class="reference internal" href="../c-api/typeobj.html#c.Py_TPFLAGS_IMMUTABLETYPE" title="Py_TPFLAGS_IMMUTABLETYPE"><code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_TPFLAGS_IMMUTABLETYPE</span></code></a> is set
instead.
(Contributed by Victor Stinner and Erlend E. Aasland in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43908">bpo-43908</a>.)</p></li>
<li><p>The undocumented function <code class="docutils literal notranslate"><span class="pre">Py_FrozenMain</span></code> has been removed from the
limited API. The function is mainly useful for custom builds of Python.
(Contributed by Petr Viktorin in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=26241">bpo-26241</a>.)</p></li>
</ul>
</section>
<section id="id3">
<h3>Obsolescence<a class="headerlink" href="#id3" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><p>La fonction <code class="docutils literal notranslate"><span class="pre">PyUnicode_InternImmortal()</span></code> est maintenant obsolète et sera retirée dans Python 3.12 : utilisez plutôt <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_InternInPlace" title="PyUnicode_InternInPlace"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_InternInPlace()</span></code></a> (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41692">bpo-41692</a>).</p></li>
</ul>
</section>
<section id="id4">
<h3>Retrait<a class="headerlink" href="#id4" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><p>Retrait des fonctions <code class="docutils literal notranslate"><span class="pre">Py_UNICODE_str*</span></code> manipulant des chaînes <code class="docutils literal notranslate"><span class="pre">Py_UNICODE*</span></code> (contribution de <em>Inada Naoki</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41123">bpo-41123</a>) :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Py_UNICODE_strlen</span></code> : utilisez <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_GetLength" title="PyUnicode_GetLength"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_GetLength()</span></code></a> ou <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_GET_LENGTH" title="PyUnicode_GET_LENGTH"><code class="xref c c-macro docutils literal notranslate"><span class="pre">PyUnicode_GET_LENGTH</span></code></a> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_UNICODE_strcat</span></code> : utilisez <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_CopyCharacters" title="PyUnicode_CopyCharacters"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_CopyCharacters()</span></code></a> ou <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_FromFormat" title="PyUnicode_FromFormat"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_FromFormat()</span></code></a> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_UNICODE_strcpy</span></code>, <code class="docutils literal notranslate"><span class="pre">Py_UNICODE_strncpy</span></code> : utilisez <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_CopyCharacters" title="PyUnicode_CopyCharacters"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_CopyCharacters()</span></code></a> ou <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_Substring" title="PyUnicode_Substring"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_Substring()</span></code></a> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_UNICODE_strcmp</span></code> : utilisez <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_Compare" title="PyUnicode_Compare"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_Compare()</span></code></a> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_UNICODE_strncmp</span></code> : utilisez <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_Tailmatch" title="PyUnicode_Tailmatch"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_Tailmatch()</span></code></a> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_UNICODE_strchr</span></code>, <code class="docutils literal notranslate"><span class="pre">Py_UNICODE_strrchr</span></code> : utilisez <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_FindChar" title="PyUnicode_FindChar"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_FindChar()</span></code></a>.</p></li>
</ul>
</li>
<li><p>Retrait de <code class="docutils literal notranslate"><span class="pre">PyUnicode_GetMax()</span></code>. Vous devez migrer vers les nouvelles API de la <span class="target" id="index-112"></span><a class="pep reference external" href="https://peps.python.org/pep-0393/"><strong>PEP 393</strong></a> (contribution de <em>Inada Naoki</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41103">bpo-41103</a>).</p></li>
<li><p>Retrait de <code class="docutils literal notranslate"><span class="pre">PyLong_FromUnicode()</span></code>. Vous devez migrer vers <a class="reference internal" href="../c-api/long.html#c.PyLong_FromUnicodeObject" title="PyLong_FromUnicodeObject"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyLong_FromUnicodeObject()</span></code></a> (contribution de <em>Inada Naoki</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41103">bpo-41103</a>).</p></li>
<li><p>Retrait de <code class="docutils literal notranslate"><span class="pre">PyUnicode_AsUnicodeCopy()</span></code>. Vous devez utiliser <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_AsUCS4Copy" title="PyUnicode_AsUCS4Copy"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_AsUCS4Copy()</span></code></a> ou <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_AsWideCharString" title="PyUnicode_AsWideCharString"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_AsWideCharString()</span></code></a> (contribution de <em>Inada Naoki</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41103">bpo-41103</a>).</p></li>
<li><p>Retrait de la variable <code class="docutils literal notranslate"><span class="pre">_Py_CheckRecursionLimit</span></code> : elle a été remplacée par le champ <code class="docutils literal notranslate"><span class="pre">ceval.recursion_limit</span></code> de la structure <a class="reference internal" href="../c-api/init.html#c.PyInterpreterState" title="PyInterpreterState"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyInterpreterState</span></code></a> (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41834">bpo-41834</a>).</p></li>
<li><p>Retrait des macros non-documentées <code class="docutils literal notranslate"><span class="pre">Py_ALLOW_RECURSION</span></code> et <code class="docutils literal notranslate"><span class="pre">Py_END_ALLOW_RECURSION</span></code> et du champ <code class="docutils literal notranslate"><span class="pre">recursion_critical</span></code> de la structure <a class="reference internal" href="../c-api/init.html#c.PyInterpreterState" title="PyInterpreterState"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyInterpreterState</span></code></a> (contribution de <em>Serhiy Storchaka</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41936">bpo-41936</a>).</p></li>
<li><p>Retrait de la fonction non-documentée <code class="docutils literal notranslate"><span class="pre">PyOS_InitInterrupts()</span></code>. L'initialisation de Python installe déjà les gestionnaires de signaux de façon implicite : voir <a class="reference internal" href="../c-api/init_config.html#c.PyConfig.install_signal_handlers" title="PyConfig.install_signal_handlers"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyConfig.install_signal_handlers</span></code></a> (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41713">bpo-41713</a>).</p></li>
<li><p>Retrait de la fonction <code class="docutils literal notranslate"><span class="pre">PyAST_Validate()</span></code>. Il n'est plus possible de construire un objet <em>AST</em> (type <code class="docutils literal notranslate"><span class="pre">mod_ty</span></code>) avec l'API C publique. La fonction était déjà retirée de l'API C limitée (<span class="target" id="index-113"></span><a class="pep reference external" href="https://peps.python.org/pep-0384/"><strong>PEP 384</strong></a>) (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43244">bpo-43244</a>).</p></li>
<li><p>Retrait du fichier d'en-tête <code class="docutils literal notranslate"><span class="pre">symtable.h</span></code> et des fonctions non-documentées :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PyST_GetScope()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PySymtable_Build()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PySymtable_BuildObject()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PySymtable_Free()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_SymtableString()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_SymtableStringObject()</span></code>.</p></li>
</ul>
<p>Par erreur, la fonction <code class="docutils literal notranslate"><span class="pre">Py_SymtableString()</span></code> faisait partie de l'<em>ABI</em> stable, mais elle ne pouvait pas être utilisée, car le fichier d'en-tête <code class="docutils literal notranslate"><span class="pre">symtable.h</span></code> était exclu de l'API C limitée.</p>
<p>Utilisez plutôt le module Python <a class="reference internal" href="../library/symtable.html#module-symtable" title="symtable: Interface to the compiler's internal symbol tables."><code class="xref py py-mod docutils literal notranslate"><span class="pre">symtable</span></code></a> (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43244">bpo-43244</a>).</p>
</li>
<li><p>Retrait de <a class="reference internal" href="../c-api/veryhigh.html#c.PyOS_ReadlineFunctionPointer" title="PyOS_ReadlineFunctionPointer"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyOS_ReadlineFunctionPointer()</span></code></a> des fichiers d'en-tête de l'API C limitée et de <code class="docutils literal notranslate"><span class="pre">python3.dll</span></code>, la bibliothèque qui fournit l'<em>ABI</em> stable sur Windows. Étant donné que la fonction prend un <code class="docutils literal notranslate"><span class="pre">FILE*</span></code> en argument, la stabilité de son interface binaire-programme ne peut pas être garantie (contribution de <em>Petr Viktorin</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43868">bpo-43868</a>).</p></li>
<li><p>Retrait des fichiers d'en-tête <code class="docutils literal notranslate"><span class="pre">ast.h</span></code>, <code class="docutils literal notranslate"><span class="pre">asdl.h</span></code> et <code class="docutils literal notranslate"><span class="pre">Python-ast.h</span></code>. Ces fonctions étaient non-documentées et exclues de l'API C limitée. La majorité des noms définis dans ces fichiers d'en-tête n'avaient pas le préfixe <code class="docutils literal notranslate"><span class="pre">Py</span></code> et pouvaient ainsi causer des conflits de noms. Par exemple, <code class="docutils literal notranslate"><span class="pre">Python-ast.h</span></code> définit une macro <code class="docutils literal notranslate"><span class="pre">Yield</span></code> qui était en conflit avec le nom <code class="docutils literal notranslate"><span class="pre">Yield</span></code> utilisé dans le fichier d'en-tête <code class="docutils literal notranslate"><span class="pre">&lt;winbase.h&gt;</span></code> de Windows. Utilisez plutôt le module Python <a class="reference internal" href="../library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ast</span></code></a> (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43244">bpo-43244</a>).</p></li>
<li><p>Retrait des fonctions d'analyse syntaxique et de compilation qui utilisent le type <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">_mod</span></code> car l'API C publique pour manipuler les <em>AST</em> a été retirée :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PyAST_Compile()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyAST_CompileEx()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyAST_CompileObject()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyFuture_FromAST()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyFuture_FromASTObject()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyParser_ASTFromFile()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyParser_ASTFromFileObject()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyParser_ASTFromFilename()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyParser_ASTFromString()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyParser_ASTFromStringObject()</span></code>.</p></li>
</ul>
<p>Ces fonctions étaient non-documentées et exclues de l'API C limitée (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43244">bpo-43244</a>).</p>
</li>
<li><p>Retrait du fichier d'en-tête <code class="docutils literal notranslate"><span class="pre">pyarena.h</span></code> et des fonctions :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PyArena_New()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyArena_Free()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyArena_Malloc()</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyArena_AddPyObject()</span></code>.</p></li>
</ul>
<p>Ces fonctions étaient non-documentées et exclues de l'API C limitée ; elles n'étaient utilisées que par le compilateur dans l'implémentation interne (contribution de <em>Victor Stinner</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43244">bpo-43244</a>).</p>
</li>
<li><p>Retrait du champ <code class="docutils literal notranslate"><span class="pre">PyThreadState.use_tracing</span></code> pour optimiser Python (contribution de <em>Mark Shannon</em> dans <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43760">bpo-43760</a>).</p></li>
</ul>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../contents.html">Table des matières</a></h3>
    <ul>
<li><a class="reference internal" href="#">Les nouveautés de Python 3.10</a><ul>
<li><a class="reference internal" href="#summary-release-highlights">Résumé – Points forts de la publication</a></li>
<li><a class="reference internal" href="#new-features">Nouvelles fonctionnalités</a><ul>
<li><a class="reference internal" href="#parenthesized-context-managers">Gestionnaires de contextes entre parenthèses</a></li>
<li><a class="reference internal" href="#better-error-messages">Meilleurs messages d'erreurs</a><ul>
<li><a class="reference internal" href="#syntaxerrors"><code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code></a></li>
<li><a class="reference internal" href="#indentationerrors"><code class="docutils literal notranslate"><span class="pre">IndentationError</span></code></a></li>
<li><a class="reference internal" href="#attributeerrors"><code class="docutils literal notranslate"><span class="pre">AttributeError</span></code></a></li>
<li><a class="reference internal" href="#nameerrors"><code class="docutils literal notranslate"><span class="pre">NameError</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pep-626-precise-line-numbers-for-debugging-and-other-tools">PEP 626 : numéros de lignes précis pour le débogage et les autres outils</a></li>
<li><a class="reference internal" href="#pep-634-structural-pattern-matching">PEP 634 : filtrage par motifs structurels</a><ul>
<li><a class="reference internal" href="#syntax-and-operations">Syntaxe et opérations</a></li>
<li><a class="reference internal" href="#declarative-approach">Approche déclarative</a></li>
<li><a class="reference internal" href="#simple-pattern-match-to-a-literal">Filtre simple : apparier à un littéral</a><ul>
<li><a class="reference internal" href="#behavior-without-the-wildcard">Comportement sans l'attrape-tout</a></li>
</ul>
</li>
<li><a class="reference internal" href="#patterns-with-a-literal-and-variable">Filtres avec un littéral et une variable</a></li>
<li><a class="reference internal" href="#patterns-and-classes">Filtres et classes</a><ul>
<li><a class="reference internal" href="#patterns-with-positional-parameters">Filtres avec arguments positionnels</a></li>
</ul>
</li>
<li><a class="reference internal" href="#nested-patterns">Filtres imbriqués</a></li>
<li><a class="reference internal" href="#complex-patterns-and-the-wildcard">Filtres complexes et attrape-tout</a></li>
<li><a class="reference internal" href="#guard">Garde</a></li>
<li><a class="reference internal" href="#other-key-features">Autres fonctionnalités importantes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#optional-encodingwarning-and-encoding-locale-option"><code class="docutils literal notranslate"><span class="pre">EncodingWarning</span></code> et option <code class="docutils literal notranslate"><span class="pre">encoding=&quot;locale&quot;</span></code> optionnels</a></li>
</ul>
</li>
<li><a class="reference internal" href="#new-features-related-to-type-hints">Nouvelles fonctionnalités reliées aux indications de types</a><ul>
<li><a class="reference internal" href="#pep-604-new-type-union-operator">PEP 604 : nouvel opérateur d'union de types</a></li>
<li><a class="reference internal" href="#pep-612-parameter-specification-variables">PEP 612 : variables de spécification de paramètres</a></li>
<li><a class="reference internal" href="#pep-613-typealias">PEP 613 : <code class="docutils literal notranslate"><span class="pre">TypeAlias</span></code></a></li>
<li><a class="reference internal" href="#pep-647-user-defined-type-guards">PEP 647 : gardes de type définies par l'utilisateur</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-language-changes">Autres changements au langage</a></li>
<li><a class="reference internal" href="#new-modules">Nouveaux modules</a></li>
<li><a class="reference internal" href="#improved-modules">Modules améliorés</a><ul>
<li><a class="reference internal" href="#asyncio"><code class="docutils literal notranslate"><span class="pre">asyncio</span></code></a></li>
<li><a class="reference internal" href="#argparse"><code class="docutils literal notranslate"><span class="pre">argparse</span></code></a></li>
<li><a class="reference internal" href="#array"><code class="docutils literal notranslate"><span class="pre">array</span></code></a></li>
<li><a class="reference internal" href="#asynchat-asyncore-smtpd"><code class="docutils literal notranslate"><span class="pre">asynchat</span></code>, <code class="docutils literal notranslate"><span class="pre">asyncore</span></code>, <code class="docutils literal notranslate"><span class="pre">smtpd</span></code></a></li>
<li><a class="reference internal" href="#base64"><code class="docutils literal notranslate"><span class="pre">base64</span></code></a></li>
<li><a class="reference internal" href="#bdb"><code class="docutils literal notranslate"><span class="pre">bdb</span></code></a></li>
<li><a class="reference internal" href="#bisect"><code class="docutils literal notranslate"><span class="pre">bisect</span></code></a></li>
<li><a class="reference internal" href="#codecs"><code class="docutils literal notranslate"><span class="pre">codecs</span></code></a></li>
<li><a class="reference internal" href="#collections-abc"><code class="docutils literal notranslate"><span class="pre">collections.abc</span></code></a></li>
<li><a class="reference internal" href="#contextlib"><code class="docutils literal notranslate"><span class="pre">contextlib</span></code></a></li>
<li><a class="reference internal" href="#curses"><code class="docutils literal notranslate"><span class="pre">curses</span></code></a></li>
<li><a class="reference internal" href="#dataclasses"><code class="docutils literal notranslate"><span class="pre">dataclasses</span></code></a><ul>
<li><a class="reference internal" href="#slots"><code class="docutils literal notranslate"><span class="pre">__slots__</span></code></a></li>
<li><a class="reference internal" href="#keyword-only-fields">Champs obligatoirement nommés</a></li>
</ul>
</li>
<li><a class="reference internal" href="#distutils"><code class="docutils literal notranslate"><span class="pre">distutils</span></code></a></li>
<li><a class="reference internal" href="#doctest"><code class="docutils literal notranslate"><span class="pre">doctest</span></code></a></li>
<li><a class="reference internal" href="#encodings"><code class="docutils literal notranslate"><span class="pre">encodings</span></code></a></li>
<li><a class="reference internal" href="#enum">enum</a></li>
<li><a class="reference internal" href="#fileinput"><code class="docutils literal notranslate"><span class="pre">fileinput</span></code></a></li>
<li><a class="reference internal" href="#faulthandler"><code class="docutils literal notranslate"><span class="pre">faulthandler</span></code></a></li>
<li><a class="reference internal" href="#gc"><code class="docutils literal notranslate"><span class="pre">gc</span></code></a></li>
<li><a class="reference internal" href="#glob"><code class="docutils literal notranslate"><span class="pre">glob</span></code></a></li>
<li><a class="reference internal" href="#hashlib"><code class="docutils literal notranslate"><span class="pre">hashlib</span></code></a></li>
<li><a class="reference internal" href="#hmac"><code class="docutils literal notranslate"><span class="pre">hmac</span></code></a></li>
<li><a class="reference internal" href="#idle-and-idlelib">IDLE et <code class="docutils literal notranslate"><span class="pre">idlelib</span></code></a></li>
<li><a class="reference internal" href="#importlib-metadata"><code class="docutils literal notranslate"><span class="pre">importlib.metadata</span></code></a></li>
<li><a class="reference internal" href="#inspect"><code class="docutils literal notranslate"><span class="pre">inspect</span></code></a></li>
<li><a class="reference internal" href="#itertools">itertools</a></li>
<li><a class="reference internal" href="#linecache"><code class="docutils literal notranslate"><span class="pre">linecache</span></code></a></li>
<li><a class="reference internal" href="#os"><code class="docutils literal notranslate"><span class="pre">os</span></code></a></li>
<li><a class="reference internal" href="#os-path"><code class="docutils literal notranslate"><span class="pre">os.path</span></code></a></li>
<li><a class="reference internal" href="#pathlib"><code class="docutils literal notranslate"><span class="pre">pathlib</span></code></a></li>
<li><a class="reference internal" href="#platform"><code class="docutils literal notranslate"><span class="pre">platform</span></code></a></li>
<li><a class="reference internal" href="#pprint"><code class="docutils literal notranslate"><span class="pre">pprint</span></code></a></li>
<li><a class="reference internal" href="#py-compile"><code class="docutils literal notranslate"><span class="pre">py_compile</span></code></a></li>
<li><a class="reference internal" href="#pyclbr"><code class="docutils literal notranslate"><span class="pre">pyclbr</span></code></a></li>
<li><a class="reference internal" href="#shelve"><code class="docutils literal notranslate"><span class="pre">shelve</span></code></a></li>
<li><a class="reference internal" href="#statistics"><code class="docutils literal notranslate"><span class="pre">statistics</span></code></a></li>
<li><a class="reference internal" href="#site"><code class="docutils literal notranslate"><span class="pre">site</span></code></a></li>
<li><a class="reference internal" href="#socket"><code class="docutils literal notranslate"><span class="pre">socket</span></code></a></li>
<li><a class="reference internal" href="#ssl"><code class="docutils literal notranslate"><span class="pre">ssl</span></code></a></li>
<li><a class="reference internal" href="#sqlite3"><code class="docutils literal notranslate"><span class="pre">sqlite3</span></code></a></li>
<li><a class="reference internal" href="#sys"><code class="docutils literal notranslate"><span class="pre">sys</span></code></a></li>
<li><a class="reference internal" href="#thread"><code class="docutils literal notranslate"><span class="pre">_thread</span></code></a></li>
<li><a class="reference internal" href="#threading"><code class="docutils literal notranslate"><span class="pre">threading</span></code></a></li>
<li><a class="reference internal" href="#traceback"><code class="docutils literal notranslate"><span class="pre">traceback</span></code></a></li>
<li><a class="reference internal" href="#types"><code class="docutils literal notranslate"><span class="pre">types</span></code></a></li>
<li><a class="reference internal" href="#typing"><code class="docutils literal notranslate"><span class="pre">typing</span></code></a></li>
<li><a class="reference internal" href="#unittest"><code class="docutils literal notranslate"><span class="pre">unittest</span></code></a></li>
<li><a class="reference internal" href="#urllib-parse"><code class="docutils literal notranslate"><span class="pre">urllib.parse</span></code></a></li>
<li><a class="reference internal" href="#xml"><code class="docutils literal notranslate"><span class="pre">xml</span></code></a></li>
<li><a class="reference internal" href="#zipimport"><code class="docutils literal notranslate"><span class="pre">zipimport</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#optimizations">Optimisations</a></li>
<li><a class="reference internal" href="#deprecated">Obsolescence</a></li>
<li><a class="reference internal" href="#removed">Retrait</a></li>
<li><a class="reference internal" href="#porting-to-python-3-10">Portage vers Python 3.10</a><ul>
<li><a class="reference internal" href="#changes-in-the-python-syntax">Changements à la syntaxe de Python</a></li>
<li><a class="reference internal" href="#changes-in-the-python-api">Changements dans l'API Python</a></li>
<li><a class="reference internal" href="#changes-in-the-c-api">Changements dans l'API C</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cpython-bytecode-changes">Changements au code intermédiaire CPython</a></li>
<li><a class="reference internal" href="#build-changes">Changements à la compilation</a></li>
<li><a class="reference internal" href="#c-api-changes">Changements à l'API C</a><ul>
<li><a class="reference internal" href="#pep-652-maintaining-the-stable-abi">PEP 652 : maintenance d'une ABI stable</a></li>
<li><a class="reference internal" href="#id1">Nouvelles fonctionnalités</a></li>
<li><a class="reference internal" href="#id2">Portage vers Python 3.10</a></li>
<li><a class="reference internal" href="#id3">Obsolescence</a></li>
<li><a class="reference internal" href="#id4">Retrait</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Sujet précédent</h4>
    <p class="topless"><a href="3.11.html"
                          title="Chapitre précédent">Les nouveautés de Python 3.11</a></p>
  </div>
  <div>
    <h4>Sujet suivant</h4>
    <p class="topless"><a href="3.9.html"
                          title="Chapitre suivant">Les nouveautés de Python 3.9</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Signalement de bogue</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/main/Doc/whatsnew/3.10.rst"
            rel="nofollow">Voir la source
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Index des modules Python"
             >modules</a> |</li>
        <li class="right" >
          <a href="3.9.html" title="Les nouveautés de Python 3.9"
             >suivant</a> |</li>
        <li class="right" >
          <a href="3.11.html" title="Les nouveautés de Python 3.11"
             >précédent</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.12.0 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Nouveautés de Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Les nouveautés de Python 3.10</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Recherche rapide" aria-label="Recherche rapide" type="search" name="q" id="search-box" />
          <input type="submit" value="Go" />
        </form>
    </div>
                     |
                </li>
            <li class="right">
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label> |</li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 2001-2023, Python Software Foundation.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    See <a href="/license.html">History and License</a> for more information.<br />
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    Mis à jour le oct. 26, 2023.
    <a href="/bugs.html">Found a bug</a>?
    <br />

    Créé en utilisant <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>

  </body>
</html>