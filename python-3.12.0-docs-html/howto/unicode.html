
<!DOCTYPE html>

<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta property="og:title" content="Guide Unicode" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://docs.python.org/3/howto/unicode.html" />
<meta property="og:site_name" content="Python documentation" />
<meta property="og:description" content="Version, 1.12,. Ce guide dÃ©crit la gestion de la spÃ©cification Unicode par Python pour les donnÃ©es textuelles et explique les diffÃ©rents problÃ¨mes gÃ©nÃ©ralement rencontrÃ©s par les utilisateurs qui t..." />
<meta property="og:image" content="https://docs.python.org/3/_static/og-image.png" />
<meta property="og:image:alt" content="Python documentation" />
<meta name="description" content="Version, 1.12,. Ce guide dÃ©crit la gestion de la spÃ©cification Unicode par Python pour les donnÃ©es textuelles et explique les diffÃ©rents problÃ¨mes gÃ©nÃ©ralement rencontrÃ©s par les utilisateurs qui t..." />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta name="theme-color" content="#3776ab" />

    <title>Guide Unicode &#8212; Documentation Python 3.12.0</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/pydoctheme.css?digest=b37c26da2f7529d09fe70b41c4b2133fe4931a90" />
    <link id="pygments_dark_css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css" href="../_static/pygments_dark.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Recherchez dans Documentation Python 3.12.0"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="Ã€ propos de ces documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Guide pratique : rÃ©cupÃ©rer des ressources web en utilisant le module urllib" href="urllib2.html" />
    <link rel="prev" title="Guide pour le tri" href="sorting.html" />
    <link rel="canonical" href="https://docs.python.org/3/howto/unicode.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="stylesheet" href="../_static/pydoctheme_dark.css" media="(prefers-color-scheme: dark)" id="pydoctheme_dark_css">
    <link rel="shortcut icon" type="image/png" href="../_static/py.svg" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script>
            <script type="text/javascript" src="../_static/search-focus.js"></script>
            <script type="text/javascript" src="../_static/themetoggle.js"></script> 

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <nav class="nav-content" role="navigation">
        <label for="menuToggler" class="toggler__label">
            <span></span>
        </label>
        <span class="nav-items-wrapper">
            <a href="https://www.python.org/" class="nav-logo">
                <img src="../_static/py.svg" alt="Logo"/>
            </a>
            <span class="version_switcher_placeholder"></span>
            <form role="search" class="search" action="../search.html" method="get">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                    <path fill-rule="nonzero" fill="currentColor" d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                </svg>
                <input placeholder="Recherche rapide" aria-label="Recherche rapide" type="search" name="q" />
                <input type="submit" value="Go"/>
            </form>
        </span>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
            
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label>
  <div>
    <h3><a href="../contents.html">Table des matiÃ¨res</a></h3>
    <ul>
<li><a class="reference internal" href="#">Guide Unicode</a><ul>
<li><a class="reference internal" href="#introduction-to-unicode">Introduction Ã  Unicode</a><ul>
<li><a class="reference internal" href="#definitions">DÃ©finitions</a></li>
<li><a class="reference internal" href="#encodings">Encodages</a></li>
<li><a class="reference internal" href="#references">RÃ©fÃ©rences</a></li>
</ul>
</li>
<li><a class="reference internal" href="#python-s-unicode-support">Prise en charge Unicode de Python</a><ul>
<li><a class="reference internal" href="#the-string-type">Le type <em>String</em></a></li>
<li><a class="reference internal" href="#converting-to-bytes">Conversion en octets</a></li>
<li><a class="reference internal" href="#unicode-literals-in-python-source-code">LittÃ©raux Unicode dans le code source Python</a></li>
<li><a class="reference internal" href="#unicode-properties">PropriÃ©tÃ©s Unicode</a></li>
<li><a class="reference internal" href="#comparing-strings">Comparaison de chaÃ®nes de caractÃ¨res</a></li>
<li><a class="reference internal" href="#unicode-regular-expressions">Expressions rÃ©guliÃ¨res Unicode</a></li>
<li><a class="reference internal" href="#id2">RÃ©fÃ©rences</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reading-and-writing-unicode-data">Lecture et Ã©criture de donnÃ©es Unicode</a><ul>
<li><a class="reference internal" href="#unicode-filenames">Noms de fichiers Unicode</a></li>
<li><a class="reference internal" href="#tips-for-writing-unicode-aware-programs">Conseils pour Ã©crire des programmes compatibles Unicode</a><ul>
<li><a class="reference internal" href="#converting-between-file-encodings">Conversion entre les encodages de fichiers</a></li>
<li><a class="reference internal" href="#files-in-an-unknown-encoding">Fichiers dans un encodage inconnu</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id3">RÃ©fÃ©rences</a></li>
</ul>
</li>
<li><a class="reference internal" href="#acknowledgements">Remerciements</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Sujet prÃ©cÃ©dent</h4>
    <p class="topless"><a href="sorting.html"
                          title="Chapitre prÃ©cÃ©dent">Guide pour le tri</a></p>
  </div>
  <div>
    <h4>Sujet suivant</h4>
    <p class="topless"><a href="urllib2.html"
                          title="Chapitre suivant">Guide pratiqueÂ : rÃ©cupÃ©rer des ressources web en utilisant le module <em>urllib</em></a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Signalement de bogue</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/main/Doc/howto/unicode.rst"
            rel="nofollow">Voir la source
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index gÃ©nÃ©ral"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Index des modules Python"
             >modules</a> |</li>
        <li class="right" >
          <a href="urllib2.html" title="Guide pratique : rÃ©cupÃ©rer des ressources web en utilisant le module urllib"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="sorting.html" title="Guide pour le tri"
             accesskey="P">prÃ©cÃ©dent</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.12.0 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Les HOWTOs de Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Guide Unicode</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Recherche rapide" aria-label="Recherche rapide" type="search" name="q" id="search-box" />
          <input type="submit" value="Go" />
        </form>
    </div>
                     |
                </li>
            <li class="right">
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label> |</li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="unicode-howto">
<span id="id1"></span><h1>Guide Unicode<a class="headerlink" href="#unicode-howto" title="Lien permanent vers ce titre">Â¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Version</dt>
<dd class="field-odd"><p>1.12</p>
</dd>
</dl>
<p>Ce guide dÃ©crit la gestion de la spÃ©cification Unicode par Python pour les donnÃ©es textuelles et explique les diffÃ©rents problÃ¨mes gÃ©nÃ©ralement rencontrÃ©s par les utilisateurs qui travaillent avec Unicode.</p>
<section id="introduction-to-unicode">
<h2>Introduction Ã  Unicode<a class="headerlink" href="#introduction-to-unicode" title="Lien permanent vers ce titre">Â¶</a></h2>
<section id="definitions">
<h3>DÃ©finitions<a class="headerlink" href="#definitions" title="Lien permanent vers ce titre">Â¶</a></h3>
<p>Les programmes d'aujourd'hui doivent Ãªtre capables de traiter une grande variÃ©tÃ© de caractÃ¨res. Les applications sont souvent internationalisÃ©es pour afficher les messages et les rÃ©sultats dans une variÃ©tÃ© de langues sÃ©lectionnables par l'utilisateurÂ ; le mÃªme programme peut avoir besoin d'afficher un message d'erreur en anglais, franÃ§ais, japonais, hÃ©breu ou russe. Le contenu Web peut Ãªtre Ã©crit dans n'importe laquelle de ces langues et peut Ã©galement inclure une variÃ©tÃ© de symboles Ã©moji. Le type de chaÃ®ne de caractÃ¨res de Python utilise le standard Unicode pour reprÃ©senter les caractÃ¨res, ce qui permet aux programmes Python de travailler avec tous ces diffÃ©rents caractÃ¨res possibles.</p>
<p>Unicode (<a class="reference external" href="https://www.unicode.org/">https://www.unicode.org/</a>) est une spÃ©cification qui vise Ã  lister tous les caractÃ¨res utilisÃ©s par les langues humaines et Ã  donner Ã  chaque caractÃ¨re son propre code unique. Les spÃ©cifications Unicode sont continuellement rÃ©visÃ©es et mises Ã  jour pour ajouter de nouvelles langues et de nouveaux symboles.</p>
<p>Un <strong>caractÃ¨re</strong> est le plus petit composant possible d'un texte. Â«Â AÂ Â», Â«Â BÂ Â», Â«Â CÂ Â», etc. sont tous des caractÃ¨res diffÃ©rents. Il en va de mÃªme pour Â«Â ÃˆÂ Â» et Â«Â ÃÂ Â». Les caractÃ¨res varient selon la langue ou le contexte dont vous parlez. Par exemple, il y a un caractÃ¨re pour Â«Â Chiffre Romain UnÂ Â» (<em>Roman Numeral One</em>), Â«Â â… Â Â», qui est sÃ©parÃ© de la lettre majuscule Â«Â IÂ Â». Ils se ressemblent gÃ©nÃ©ralement, mais ce sont deux caractÃ¨res diffÃ©rents qui ont des significations diffÃ©rentes.</p>
<p>Le standard Unicode dÃ©crit comment les caractÃ¨res sont reprÃ©sentÃ©s par les <strong>points de code</strong>. Une valeur de point de code est un nombre entier compris entre <code class="docutils literal notranslate"><span class="pre">0</span></code> et <code class="docutils literal notranslate"><span class="pre">0x10FFFF</span></code> (environ 1,1 million de valeurs possibles, le <a class="reference external" href="https://www.unicode.org/versions/latest/#Summary">nombre de valeurs rÃ©ellement assignÃ©es</a> est infÃ©rieur Ã  ce nombre). Dans le standard et dans le prÃ©sent document, un point de code est Ã©crit en utilisant la notation <code class="docutils literal notranslate"><span class="pre">U+265E</span></code> pour dÃ©signer le caractÃ¨re avec la valeur <code class="docutils literal notranslate"><span class="pre">0x265e</span></code> (9Â 822 en dÃ©cimal).</p>
<p>La standard Unicode contient de nombreux tableaux contenant la liste des caractÃ¨res et des points de code correspondantsÂ :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>0061    &#39;a&#39;; LATIN SMALL LETTER A
0062    &#39;b&#39;; LATIN SMALL LETTER B
0063    &#39;c&#39;; LATIN SMALL LETTER C
...
007B    &#39;{&#39;; LEFT CURLY BRACKET
...
2167    &#39;â…§&#39;; ROMAN NUMERAL EIGHT
2168    &#39;â…¨&#39;; ROMAN NUMERAL NINE
...
265E    &#39;â™&#39;; BLACK CHESS KNIGHT
265F    &#39;â™Ÿ&#39;; BLACK CHESS PAWN
...
1F600   &#39;ğŸ˜€&#39;; GRINNING FACE
1F609   &#39;ğŸ˜‰&#39;; WINKING FACE
...
</pre></div>
</div>
<p>Ã€ proprement parler, ces dÃ©finitions laissent entendre qu'il est inutile de dire Â«Â c'est le caractÃ¨re <code class="docutils literal notranslate"><span class="pre">U+265E</span></code>Â Â». <code class="docutils literal notranslate"><span class="pre">U+265E</span></code> est un point de code, qui reprÃ©sente un caractÃ¨re particulierÂ ; dans ce cas, il reprÃ©sente le caractÃ¨re Â«Â BLACK CHESS KNIGHTÂ Â», Â«Â â™Â Â». Dans des contextes informels, cette distinction entre les points de code et les caractÃ¨res sera parfois oubliÃ©e.</p>
<p>Un caractÃ¨re est reprÃ©sentÃ© sur un Ã©cran ou sur papier par un ensemble dâ€™Ã©lÃ©ments graphiques appelÃ© <strong>glyphe</strong>. Le glyphe dâ€™un A majuscule, par exemple, est deux traits diagonaux et un trait horizontal, bien que les dÃ©tails exacts dÃ©pendent de la police utilisÃ©e. La plupart du code Python nâ€™a pas besoin de sâ€™inquiÃ©ter des glyphesÂ ; trouver le bon glyphe Ã  afficher est gÃ©nÃ©ralement le travail dâ€™une boÃ®te Ã  outils GUI ou du moteur de rendu des polices dâ€™un terminal.</p>
</section>
<section id="encodings">
<h3>Encodages<a class="headerlink" href="#encodings" title="Lien permanent vers ce titre">Â¶</a></h3>
<p>Pour rÃ©sumer la section prÃ©cÃ©denteÂ : une chaÃ®ne Unicode est une sÃ©quence de points de code, qui sont des nombres de <code class="docutils literal notranslate"><span class="pre">0</span></code> Ã  <code class="docutils literal notranslate"><span class="pre">0x10FFFF</span></code> (1Â 114Â 111 en dÃ©cimal). Cette sÃ©quence de points de code doit Ãªtre stockÃ©e en mÃ©moire sous la forme d'un ensemble de <strong>unitÃ©s de code</strong>, et les <strong>unitÃ©s de code</strong> sont ensuite transposÃ©es en octets de 8 bits. Les rÃ¨gles de traduction d'une chaÃ®ne Unicode en une sÃ©quence d'octets sont appelÃ©es un <strong>encodage de caractÃ¨res</strong> ou simplement un <strong>encodage</strong>.</p>
<p>Le premier encodage auquel vous pouvez penser est l'utilisation d'entiers 32 bits comme unitÃ© de code, puis l'utilisation de la reprÃ©sentation des entiers 32 bits par le CPU. Dans cette reprÃ©sentation, la chaÃ®ne Â«Â PythonÂ Â» ressemblerait Ã  ceciÂ :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>   P           y           t           h           o           n
0x50 00 00 00 79 00 00 00 74 00 00 00 68 00 00 00 6f 00 00 00 6e 00 00 00
   0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
</pre></div>
</div>
<p>Cette reprÃ©sentation est simple mais son utilisation pose un certain nombre de problÃ¨mes.</p>
<ol class="arabic simple">
<li><p>Elle nâ€™est pas portableÂ ; des processeurs diffÃ©rents ordonnent les octets diffÃ©remment.</p></li>
<li><p>Elle gÃ¢che beaucoup d'espace. Dans la plupart des textes, la majoritÃ© des points de code sont infÃ©rieurs Ã  127, ou Ã  255, donc beaucoup d'espace est occupÃ© par des octets <code class="docutils literal notranslate"><span class="pre">0x00</span></code>. La chaÃ®ne ci-dessus occupe 24 octets, Ã  comparer aux 6 octets nÃ©cessaires pour une reprÃ©sentation en ASCII. L'utilisation supplÃ©mentaire de RAM n'a pas trop d'importance (les ordinateurs de bureau ont des gigaoctets de RAM et les chaÃ®nes ne sont gÃ©nÃ©ralement pas si grandes que Ã§a), mais l'accroissement de notre utilisation du disque et de la bande passante rÃ©seau par un facteur de 4 est intolÃ©rable.</p></li>
<li><p>Elle nâ€™est pas compatible avec les fonctions C existantes telles que <code class="docutils literal notranslate"><span class="pre">strlen()</span></code>, il faudrait donc utiliser une nouvelle famille de fonctions, celle des chaÃ®nes larges (<em>wide strings</em>).</p></li>
</ol>
<p>Par consÃ©quent, cet encodage n'est pas trÃ¨s utilisÃ© et d'autres encodages, plus efficaces et pratiques comme UTF-8, sont plutÃ´t choisis.</p>
<p>UTF-8 est lâ€™un des encodages les plus couramment utilisÃ©s et Python lâ€™utilise souvent par dÃ©faut. UTF signifie Â«Â Unicode Transformation FormatÂ Â» (format de transformation Unicode) et Â«Â 8Â Â» signifie que des nombres Ã  8 bits sont utilisÃ©s dans l'encodage (il existe Ã©galement des codages UTF-16 et UTF-32, mais ils sont moins souvent utilisÃ©s que UTF-8). UTF-8 utilise les rÃ¨gles suivantesÂ :</p>
<ol class="arabic simple">
<li><p>Si le point de code est &lt; 128, il est reprÃ©sentÃ© par la valeur de l'octet correspondant.</p></li>
<li><p>Si le point de code est â‰¥ 128, il est transformÃ© en une sÃ©quence de deux, trois ou quatre octets, oÃ¹ chaque octet de la sÃ©quence est compris entre 128 et 255.</p></li>
</ol>
<p>UTF-8 a plusieurs propriÃ©tÃ©s intÃ©ressantesÂ :</p>
<ol class="arabic simple">
<li><p>Il peut gÃ©rer n'importe quel point de code Unicode.</p></li>
<li><p>Une chaÃ®ne Unicode est transformÃ©e en une sÃ©quence dâ€™octets qui contient des octets zÃ©ro uniquement lorsquâ€™ils reprÃ©sentent le caractÃ¨re nul (U+0000). Cela signifie que les chaÃ®nes UTF-8 peuvent Ãªtre traitÃ©es par des fonctions C telles que <code class="docutils literal notranslate"><span class="pre">strcpy()</span></code> et envoyÃ©es par des protocoles pour qui les octets zÃ©ro signifient forcÃ©ment la fin de chaÃ®ne.</p></li>
<li><p>Une chaÃ®ne de texte ASCII est Ã©galement un texte UTF-8 valide.</p></li>
<li><p>UTF-8 est assez compact. La majoritÃ© des caractÃ¨res couramment utilisÃ©s peuvent Ãªtre reprÃ©sentÃ©s avec un ou deux octets.</p></li>
<li><p>Si des octets sont corrompus ou perdus, il est possible de dÃ©terminer le dÃ©but du prochain point de code encodÃ© en UTF-8 et de se resynchroniser. Il est Ã©galement improbable que des donnÃ©es 8-bits alÃ©atoires ressemblent Ã  du UTF-8 valide.</p></li>
<li><p>UTF-8 est un encodage orientÃ© octet. L'encodage spÃ©cifie que chaque caractÃ¨re est reprÃ©sentÃ© par une sÃ©quence spÃ©cifique d'un ou plusieurs octets. Ceci permet d'Ã©viter les problÃ¨mes d'ordre des octets qui peuvent survenir avec les encodages orientÃ©s entiers (<em>integer</em>) ou orientÃ©s mots processeurs (<em>words</em>), comme UTF-16 et UTF-32, oÃ¹ la sÃ©quence des octets varie en fonction du matÃ©riel sur lequel la chaÃ®ne a Ã©tÃ© encodÃ©e.</p></li>
</ol>
</section>
<section id="references">
<h3>RÃ©fÃ©rences<a class="headerlink" href="#references" title="Lien permanent vers ce titre">Â¶</a></h3>
<p>Le site du <a class="reference external" href="https://www.unicode.org">Consortium Unicode</a>, en anglais, a des diagrammes de caractÃ¨res, un glossaire et des versions PDF de la spÃ©cification Unicode. PrÃ©parez-vous Ã  une lecture difficile. Une <a class="reference external" href="https://www.unicode.org/history/">chronologie</a> de lâ€™origine et du dÃ©veloppement de lâ€™Unicode est Ã©galement disponible sur le site.</p>
<p>Sur la chaÃ®ne Youtube <em>Computerphile</em>, Tom Scott parle briÃ¨vement de <a class="reference external" href="https://www.youtube.com/watch?v=MijmeoH9LT4">lâ€™histoire dâ€™Unicode et dâ€™UTF-8</a> (9 minutes et 36 secondes).</p>
<p>Pour aider Ã  comprendre le standard, Jukka Korpela a Ã©crit <a class="reference external" href="https://jkorpela.fi/unicode/guide.html">un guide dâ€™introduction</a> Ã  la lecture des tables de caractÃ¨res Unicode (ressource en anglais).</p>
<p>Un autre <a class="reference external" href="https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/">bon article d'introduction</a> a Ã©tÃ© Ã©crit par Joel Spolsky. Si cette prÃ©sente introduction ne vous a pas clarifiÃ© les choses, vous devriez essayer de lire cet article-lÃ  avant de continuer.</p>
<p>Les pages WikipÃ©dia sont souvent utilesÂ ; voir les pages pour Â«Â <a class="reference external" href="https://fr.wikipedia.org/wiki/Codage_des_caract%C3%A8res">Codage des caractÃ¨res</a>Â Â» et <a class="reference external" href="https://fr.wikipedia.org/wiki/UTF-8">UTF-8</a>, par exemple.</p>
</section>
</section>
<section id="python-s-unicode-support">
<h2>Prise en charge Unicode de Python<a class="headerlink" href="#python-s-unicode-support" title="Lien permanent vers ce titre">Â¶</a></h2>
<p>Maintenant que vous avez appris les rudiments de l'Unicode, nous pouvons regarder les fonctionnalitÃ©s Unicode de Python.</p>
<section id="the-string-type">
<h3>Le type <em>String</em><a class="headerlink" href="#the-string-type" title="Lien permanent vers ce titre">Â¶</a></h3>
<p>Depuis Python 3.0, le type <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> du langage contient des caractÃ¨res Unicode, c'est-Ã -dire n'importe quelle chaÃ®ne crÃ©Ã©e Ã  l'aide de <code class="docutils literal notranslate"><span class="pre">&quot;unicode</span> <span class="pre">dÃ©chireÂ !&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">'unicode</span> <span class="pre">dÃ©chireÂ !'</span></code> ou la syntaxe Ã  triples guillemets est enregistrÃ©e comme Unicode.</p>
<p>L'encodage par dÃ©faut pour le code source Python est UTF-8, il est donc facile d'inclure des caractÃ¨res Unicode dans une chaÃ®ne littÃ©raleÂ :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/tmp/input.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="o">...</span>
<span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
    <span class="c1"># &#39;File not found&#39; error message.</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fichier non trouvÃ©&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>NoteÂ : Python 3 sait gÃ©rer les caractÃ¨res Unicode dans les identifiantsÂ :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">rÃ©pertoire</span> <span class="o">=</span> <span class="s2">&quot;/tmp/records.log&quot;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">rÃ©pertoire</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;test</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Si vous ne pouvez pas entrer un caractÃ¨re particulier dans votre Ã©diteur ou si vous voulez garder le code source uniquement en ASCII pour une raison quelconque, vous pouvez Ã©galement utiliser des sÃ©quences d'Ã©chappement dans les littÃ©raux de chaÃ®ne (en fonction de votre systÃ¨me, il se peut que vous voyiez le glyphe rÃ©el du <em>delta majuscule</em> au lieu d'une sÃ©quence d'Ã©chappement <code class="docutils literal notranslate"><span class="pre">\u...</span></code>)</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="s2">&quot;</span><span class="se">\N{GREEK CAPITAL LETTER DELTA}</span><span class="s2">&quot;</span>  <span class="c1"># Using the character name</span>
<span class="go">&#39;\u0394&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s2">&quot;</span><span class="se">\u0394</span><span class="s2">&quot;</span>                          <span class="c1"># Using a 16-bit hex value</span>
<span class="go">&#39;\u0394&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s2">&quot;</span><span class="se">\U00000394</span><span class="s2">&quot;</span>                      <span class="c1"># Using a 32-bit hex value</span>
<span class="go">&#39;\u0394&#39;</span>
</pre></div>
</div>
<p>De plus, une chaÃ®ne de caractÃ¨res peut Ãªtre crÃ©Ã©e en utilisant la mÃ©thode <a class="reference internal" href="../library/stdtypes.html#bytes.decode" title="bytes.decode"><code class="xref py py-func docutils literal notranslate"><span class="pre">decode()</span></code></a> de la classe <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>. Cette mÃ©thode prend un argument <em>encoding</em>, <code class="docutils literal notranslate"><span class="pre">UTF-8</span></code> par exemple, et optionnellement un argument <em>errors</em>.</p>
<p>L'argument <em>errors</em> dÃ©termine la rÃ©ponse lorsque la chaÃ®ne en entrÃ©e ne peut pas Ãªtre convertie selon les rÃ¨gles de l'encodage. Les valeurs autorisÃ©es pour cet argument sont <code class="docutils literal notranslate"><span class="pre">'strict'</span></code> (Â«Â strictÂ Â»Â : lÃ¨ve une exception <a class="reference internal" href="../library/exceptions.html#UnicodeDecodeError" title="UnicodeDecodeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UnicodeDecodeError</span></code></a>), <code class="docutils literal notranslate"><span class="pre">'replace'</span></code> (Â«Â remplacerÂ Â»Â : utilise <code class="docutils literal notranslate"><span class="pre">U+FFFD</span></code>, <code class="docutils literal notranslate"><span class="pre">REPLACEMENT</span> <span class="pre">CARACTER</span></code>), <code class="docutils literal notranslate"><span class="pre">'ignore'</span></code> (Â«Â ignorerÂ Â»Â : n'inclut pas le caractÃ¨re dans le rÃ©sultat Unicode) ou <code class="docutils literal notranslate"><span class="pre">'backslashreplace'</span></code> (Â«Â remplacer avec antislashÂ Â»Â : insÃ¨re une sÃ©quence dâ€™Ã©chappement <code class="docutils literal notranslate"><span class="pre">\xNN</span></code>). Les exemples suivants illustrent les diffÃ©rencesÂ :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x80</span><span class="s1">abc&#39;</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="s2">&quot;strict&quot;</span><span class="p">)</span>  
<span class="gt">Traceback (most recent call last):</span>
<span class="w">    </span><span class="o">...</span>
<span class="gr">UnicodeDecodeError</span>: <span class="n">&#39;utf-8&#39; codec can&#39;t decode byte 0x80 in position 0:</span>
<span class="x">  invalid start byte</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x80</span><span class="s1">abc&#39;</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="s2">&quot;replace&quot;</span><span class="p">)</span>
<span class="go">&#39;\ufffdabc&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x80</span><span class="s1">abc&#39;</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="s2">&quot;backslashreplace&quot;</span><span class="p">)</span>
<span class="go">&#39;\\x80abc&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x80</span><span class="s1">abc&#39;</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
<span class="go">&#39;abc&#39;</span>
</pre></div>
</div>
<p>Les encodages sont spÃ©cifiÃ©s sous forme de chaÃ®nes de caractÃ¨res contenant le nom de l'encodage. Python est livrÃ© avec une centaine d'encodages diffÃ©rentsÂ ; voir la rÃ©fÃ©rence de la bibliothÃ¨que Python sur les <a class="reference internal" href="../library/codecs.html#standard-encodings"><span class="std std-ref">encodages standards</span></a> pour une liste. Certains encodages ont plusieurs nomsÂ ; par exemple, <code class="docutils literal notranslate"><span class="pre">'latin-1'</span></code>, <code class="docutils literal notranslate"><span class="pre">'iso_8859_1'</span></code> et <code class="docutils literal notranslate"><span class="pre">'8859'</span></code> sont tous synonymes du mÃªme encodage.</p>
<p>Des chaÃ®nes Unicode Ã  un caractÃ¨re peuvent Ã©galement Ãªtre crÃ©Ã©es avec la fonction native <a class="reference internal" href="../library/functions.html#chr" title="chr"><code class="xref py py-func docutils literal notranslate"><span class="pre">chr()</span></code></a>, qui prend des entiers et renvoie une chaÃ®ne Unicode de longueur 1 qui contient le point de code correspondant. L'opÃ©ration inverse est la fonction native <a class="reference internal" href="../library/functions.html#ord" title="ord"><code class="xref py py-func docutils literal notranslate"><span class="pre">ord()</span></code></a> qui prend une chaÃ®ne Unicode d'un caractÃ¨re et renvoie la valeur du point de codeÂ :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">chr</span><span class="p">(</span><span class="mi">57344</span><span class="p">)</span>
<span class="go">&#39;\ue000&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">ord</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\ue000</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="go">57344</span>
</pre></div>
</div>
</section>
<section id="converting-to-bytes">
<h3>Conversion en octets<a class="headerlink" href="#converting-to-bytes" title="Lien permanent vers ce titre">Â¶</a></h3>
<p>La mÃ©thode inverse de <a class="reference internal" href="../library/stdtypes.html#bytes.decode" title="bytes.decode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">bytes.decode()</span></code></a> est <a class="reference internal" href="../library/stdtypes.html#str.encode" title="str.encode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.encode()</span></code></a>, qui renvoie une reprÃ©sentation <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> de la chaÃ®ne Unicode, codÃ©e dans lâ€™encodage <em>encoding</em> demandÃ©.</p>
<p>Le paramÃ¨tre <em>errors</em> est le mÃªme que le paramÃ¨tre de la mÃ©thode <a class="reference internal" href="../library/stdtypes.html#bytes.decode" title="bytes.decode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">decode()</span></code></a> mais possÃ¨de quelques gestionnaires supplÃ©mentaires. En plus de <code class="docutils literal notranslate"><span class="pre">'strict'</span></code>, <code class="docutils literal notranslate"><span class="pre">'ignore'</span></code> et <code class="docutils literal notranslate"><span class="pre">'remplace'</span></code> (qui dans ce cas insÃ¨re un point d'interrogation au lieu du caractÃ¨re non encodable), il y a aussi <code class="docutils literal notranslate"><span class="pre">'xmlcharrefreplace'</span></code> (insÃ¨re une rÃ©fÃ©rence XML), <code class="docutils literal notranslate"><span class="pre">backslashreplace</span></code> (insÃ¨re une sÃ©quence <code class="docutils literal notranslate"><span class="pre">\uNNNN</span></code>) et <code class="docutils literal notranslate"><span class="pre">namereplace</span></code> (insÃ¨re une sÃ©quence <code class="docutils literal notranslate"><span class="pre">\N{...}</span></code>).</p>
<p>L'exemple suivant montre les diffÃ©rents rÃ©sultatsÂ :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">u</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">40960</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;abcd&#39;</span> <span class="o">+</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">1972</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
<span class="go">b&#39;\xea\x80\x80abcd\xde\xb4&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>  
<span class="gt">Traceback (most recent call last):</span>
<span class="w">    </span><span class="o">...</span>
<span class="gr">UnicodeEncodeError</span>: <span class="n">&#39;ascii&#39; codec can&#39;t encode character &#39;\ua000&#39; in</span>
<span class="x">  position 0: ordinal not in range(128)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">,</span> <span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
<span class="go">b&#39;abcd&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">,</span> <span class="s1">&#39;replace&#39;</span><span class="p">)</span>
<span class="go">b&#39;?abcd?&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">,</span> <span class="s1">&#39;xmlcharrefreplace&#39;</span><span class="p">)</span>
<span class="go">b&#39;&amp;#40960;abcd&amp;#1972;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">,</span> <span class="s1">&#39;backslashreplace&#39;</span><span class="p">)</span>
<span class="go">b&#39;\\ua000abcd\\u07b4&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">,</span> <span class="s1">&#39;namereplace&#39;</span><span class="p">)</span>
<span class="go">b&#39;\\N{YI SYLLABLE IT}abcd\\u07b4&#39;</span>
</pre></div>
</div>
<p>Les routines de bas niveau pour enregistrer et accÃ©der aux encodages disponibles se trouvent dans le module <a class="reference internal" href="../library/codecs.html#module-codecs" title="codecs: Encode and decode data and streams."><code class="xref py py-mod docutils literal notranslate"><span class="pre">codecs</span></code></a>. L'implÃ©mentation de nouveaux encodages nÃ©cessite Ã©galement de comprendre le module <a class="reference internal" href="../library/codecs.html#module-codecs" title="codecs: Encode and decode data and streams."><code class="xref py py-mod docutils literal notranslate"><span class="pre">codecs</span></code></a>. Cependant, les fonctions d'encodage et de dÃ©codage renvoyÃ©es par ce module sont gÃ©nÃ©ralement de bas-niveau pour Ãªtre facilement utilisÃ©es et l'Ã©criture de nouveaux encodages est une tÃ¢che trÃ¨s spÃ©cialisÃ©e, donc le module ne sera pas couvert dans ce guide.</p>
</section>
<section id="unicode-literals-in-python-source-code">
<h3>LittÃ©raux Unicode dans le code source Python<a class="headerlink" href="#unicode-literals-in-python-source-code" title="Lien permanent vers ce titre">Â¶</a></h3>
<p>Dans le code source Python, des points de code Unicode spÃ©cifiques peuvent Ãªtre Ã©crits en utilisant la sÃ©quence d'Ã©chappement <code class="docutils literal notranslate"><span class="pre">\u</span></code>, suivie de quatre chiffres hexadÃ©cimaux donnant le point de code. La sÃ©quence d'Ã©chappement <code class="docutils literal notranslate"><span class="pre">\U</span></code> est similaire, mais attend huit chiffres hexadÃ©cimaux, pas quatreÂ :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;a</span><span class="se">\xac\u1234\u20ac\U00008000</span><span class="s2">&quot;</span>
<span class="gp">... </span><span class="c1">#     ^^^^ two-digit hex escape</span>
<span class="gp">... </span><span class="c1">#         ^^^^^^ four-digit Unicode escape</span>
<span class="gp">... </span><span class="c1">#                     ^^^^^^^^^^ eight-digit Unicode escape</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="nb">ord</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">s</span><span class="p">]</span>
<span class="go">[97, 172, 4660, 8364, 32768]</span>
</pre></div>
</div>
<p>L'utilisation de sÃ©quences d'Ã©chappement pour des points de code supÃ©rieurs Ã  127 est acceptable Ã  faible dose, mais devient gÃªnante si vous utilisez beaucoup de caractÃ¨res accentuÃ©s, comme c'est le cas dans un programme avec des messages en franÃ§ais ou dans une autre langue utilisant des lettres accentuÃ©es. Vous pouvez Ã©galement assembler des chaÃ®nes de caractÃ¨res Ã  l'aide de la fonction native <a class="reference internal" href="../library/functions.html#chr" title="chr"><code class="xref py py-func docutils literal notranslate"><span class="pre">chr()</span></code></a>, mais c'est encore plus fastidieux.</p>
<p>IdÃ©alement, vous devriez Ãªtre capable d'Ã©crire des littÃ©raux dans l'encodage naturel de votre langue. Vous pourriez alors Ã©diter le code source de Python avec votre Ã©diteur favori qui affiche les caractÃ¨res accentuÃ©s naturellement, et a les bons caractÃ¨res utilisÃ©s au moment de l'exÃ©cution.</p>
<p>Python considÃ¨re que le code source est Ã©crit en UTF-8 par dÃ©faut, mais vous pouvez utiliser presque n'importe quel encodage si vous dÃ©clarez l'encodage utilisÃ©. Cela se fait en incluant un commentaire spÃ©cial sur la premiÃ¨re ou la deuxiÃ¨me ligne du fichier sourceÂ :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: latin-1 -*-</span>

<span class="n">u</span> <span class="o">=</span> <span class="s1">&#39;abcdÃ©&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">u</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
</pre></div>
</div>
<p>La syntaxe s'inspire de la notation d'<em>Emacs</em> pour spÃ©cifier les variables locales Ã  un fichier. <em>Emacs</em> supporte de nombreuses variables diffÃ©rentes, mais Python ne gÃ¨re que <em>coding</em>. Les symboles <code class="docutils literal notranslate"><span class="pre">-*-</span></code> indiquent Ã  <em>Emacs</em> que le commentaire est spÃ©cialÂ ; ils n'ont aucune signification pour Python mais sont une convention. Python cherche <code class="docutils literal notranslate"><span class="pre">coding:</span> <span class="pre">name</span></code> ou <code class="docutils literal notranslate"><span class="pre">coding=name</span></code> dans le commentaire.</p>
<p>Si vous n'incluez pas un tel commentaire, l'encodage par dÃ©faut est UTF-8 comme dÃ©jÃ  mentionnÃ©. Voir aussi la <span class="target" id="index-2"></span><a class="pep reference external" href="https://peps.python.org/pep-0263/"><strong>PEP 263</strong></a> pour plus d'informations.</p>
</section>
<section id="unicode-properties">
<h3>PropriÃ©tÃ©s Unicode<a class="headerlink" href="#unicode-properties" title="Lien permanent vers ce titre">Â¶</a></h3>
<p>La spÃ©cification Unicode inclut une base de donnÃ©es d'informations sur les points de code. Pour chaque point de code dÃ©fini, l'information comprend le nom du caractÃ¨re, sa catÃ©gorie, la valeur numÃ©rique s'il y a lieu (pour les caractÃ¨res reprÃ©sentant des concepts numÃ©riques tels que les chiffres romains, les fractions telles qu'un tiers et quatre cinquiÃ¨mes, etc.). Il existe Ã©galement des propriÃ©tÃ©s liÃ©es Ã  l'affichage, telles que l'utilisation du point de code dans un texte bidirectionnel.</p>
<p>Le programme suivant affiche des informations sur plusieurs caractÃ¨res et affiche la valeur numÃ©rique d'un caractÃ¨re particulierÂ :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">unicodedata</span>

<span class="n">u</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">233</span><span class="p">)</span> <span class="o">+</span> <span class="nb">chr</span><span class="p">(</span><span class="mh">0x0bf2</span><span class="p">)</span> <span class="o">+</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">3972</span><span class="p">)</span> <span class="o">+</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">6000</span><span class="p">)</span> <span class="o">+</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">13231</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">u</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%04x</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">ord</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="n">unicodedata</span><span class="o">.</span><span class="n">category</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">unicodedata</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>

<span class="c1"># Get numeric value of second character</span>
<span class="nb">print</span><span class="p">(</span><span class="n">unicodedata</span><span class="o">.</span><span class="n">numeric</span><span class="p">(</span><span class="n">u</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</pre></div>
</div>
<p>Si vous l'exÃ©cutez, cela afficheÂ :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>0 00e9 Ll LATIN SMALL LETTER E WITH ACUTE
1 0bf2 No TAMIL NUMBER ONE THOUSAND
2 0f84 Mn TIBETAN MARK HALANTA
3 1770 Lo TAGBANWA LETTER SA
4 33af So SQUARE RAD OVER S SQUARED
1000.0
</pre></div>
</div>
<p>Les codes de catÃ©gorie sont des abrÃ©viations dÃ©crivant la nature du caractÃ¨re. Celles-ci sont regroupÃ©es en catÃ©gories telles que Â«Â LettreÂ Â», Â«Â NombreÂ Â», Â«Â PonctuationÂ Â» ou Â«Â SymboleÂ Â», qui sont Ã  leur tour divisÃ©es en sous-catÃ©gories. Pour prendre par exemple les codes de la sortie ci-dessus, <code class="docutils literal notranslate"><span class="pre">'Ll'</span></code> signifie Â«Â Lettre, minusculesÂ Â», <code class="docutils literal notranslate"><span class="pre">'No'</span></code> signifie Â«Â Nombre, autreÂ Â», <code class="docutils literal notranslate"><span class="pre">'Mn'</span></code> est Â«Â Marque, non-espaÃ§antÂ Â», et <code class="docutils literal notranslate"><span class="pre">'So'</span></code> est Â«Â Symbole, autreÂ Â». Voir la section <a class="reference external" href="https://www.unicode.org/reports/tr44/#General_Category_Values">Valeurs gÃ©nÃ©rales des catÃ©gories de la documentation de la base de donnÃ©es de caractÃ¨res Unicode</a> (ressource en anglais) pour une liste de codes de catÃ©gories.</p>
</section>
<section id="comparing-strings">
<h3>Comparaison de chaÃ®nes de caractÃ¨res<a class="headerlink" href="#comparing-strings" title="Lien permanent vers ce titre">Â¶</a></h3>
<p>Unicode ajoute une certaine complication Ã  la comparaison des chaÃ®nes de caractÃ¨res, car le mÃªme jeu de caractÃ¨res peut Ãªtre reprÃ©sentÃ© par diffÃ©rentes sÃ©quences de points de code. Par exemple, une lettre comme Â«Â ÃªÂ Â» peut Ãªtre reprÃ©sentÃ©e comme un point de code unique <code class="docutils literal notranslate"><span class="pre">U+00EA</span></code>, ou comme <code class="docutils literal notranslate"><span class="pre">U+0065</span> <span class="pre">U+0302</span></code>, qui est le point de code pour Â«Â eÂ Â» suivi d'un point de code pour <code class="docutils literal notranslate"><span class="pre">COMBINING</span> <span class="pre">CIRCUMFLEX</span> <span class="pre">ACCENT</span></code>. Celles-ci produisent le mÃªme rÃ©sultat lorsqu'elles sont affichÃ©es, mais l'une est une chaÃ®ne de caractÃ¨res de longueur 1 et l'autre de longueur 2.</p>
<p>Un outil pour une comparaison insensible Ã  la casse est la mÃ©thode <a class="reference internal" href="../library/stdtypes.html#str.casefold" title="str.casefold"><code class="xref py py-meth docutils literal notranslate"><span class="pre">casefold()</span></code></a> qui convertit une chaÃ®ne en une forme insensible Ã  la casse suivant un algorithme dÃ©crit par le standard Unicode. Cet algorithme a un traitement spÃ©cial pour les caractÃ¨res tels que la lettre allemande Â«Â <em>ÃŸ</em>Â Â» (point de code <code class="docutils literal notranslate"><span class="pre">U+00DF</span></code>), qui devient la paire de lettres minuscules Â«Â <em>ss</em>Â Â».</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">street</span> <span class="o">=</span> <span class="s1">&#39;GÃ¼rzenichstraÃŸe&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">street</span><span class="o">.</span><span class="n">casefold</span><span class="p">()</span>
<span class="go">&#39;gÃ¼rzenichstrasse&#39;</span>
</pre></div>
</div>
<p>A second tool is the <a class="reference internal" href="../library/unicodedata.html#module-unicodedata" title="unicodedata: Access the Unicode Database."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unicodedata</span></code></a> module's
<a class="reference internal" href="../library/unicodedata.html#unicodedata.normalize" title="unicodedata.normalize"><code class="xref py py-func docutils literal notranslate"><span class="pre">normalize()</span></code></a> function that converts strings to one
of several normal forms, where letters followed by a combining character are
replaced with single characters.  <a class="reference internal" href="../library/unicodedata.html#unicodedata.normalize" title="unicodedata.normalize"><code class="xref py py-func docutils literal notranslate"><span class="pre">normalize()</span></code></a> can
be used to perform string comparisons that won't falsely report
inequality if two strings use combining characters differently:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">unicodedata</span>

<span class="k">def</span> <span class="nf">compare_strs</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">NFD</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">unicodedata</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="s1">&#39;NFD&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">NFD</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span> <span class="o">==</span> <span class="n">NFD</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span>

<span class="n">single_char</span> <span class="o">=</span> <span class="s1">&#39;Ãª&#39;</span>
<span class="n">multiple_chars</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\N{LATIN SMALL LETTER E}\N{COMBINING CIRCUMFLEX ACCENT}</span><span class="s1">&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;length of first string=&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">single_char</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;length of second string=&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">multiple_chars</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">compare_strs</span><span class="p">(</span><span class="n">single_char</span><span class="p">,</span> <span class="n">multiple_chars</span><span class="p">))</span>
</pre></div>
</div>
<p>Si vous l'exÃ©cutez, cela afficheÂ :</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python<span class="w"> </span>compare-strs.py
<span class="go">length of first string= 1</span>
<span class="go">length of second string= 2</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Le premier argument de la fonction <a class="reference internal" href="../library/unicodedata.html#unicodedata.normalize" title="unicodedata.normalize"><code class="xref py py-func docutils literal notranslate"><span class="pre">normalize()</span></code></a> est une chaÃ®ne de caractÃ¨res donnant la forme de normalisation dÃ©sirÃ©e, qui peut Ãªtre une de celles-ciÂ : <code class="docutils literal notranslate"><span class="pre">'NFC'</span></code>, <code class="docutils literal notranslate"><span class="pre">'NFKC'</span></code>, <code class="docutils literal notranslate"><span class="pre">'NFD'</span></code> et <code class="docutils literal notranslate"><span class="pre">'NFKD'</span></code>.</p>
<p>La norme Unicode spÃ©cifie Ã©galement comment faire des comparaisons insensibles Ã  la casseÂ :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">unicodedata</span>

<span class="k">def</span> <span class="nf">compare_caseless</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">NFD</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">unicodedata</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="s1">&#39;NFD&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">NFD</span><span class="p">(</span><span class="n">NFD</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span><span class="o">.</span><span class="n">casefold</span><span class="p">())</span> <span class="o">==</span> <span class="n">NFD</span><span class="p">(</span><span class="n">NFD</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span><span class="o">.</span><span class="n">casefold</span><span class="p">())</span>

<span class="c1"># Example usage</span>
<span class="n">single_char</span> <span class="o">=</span> <span class="s1">&#39;Ãª&#39;</span>
<span class="n">multiple_chars</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\N{LATIN CAPITAL LETTER E}\N{COMBINING CIRCUMFLEX ACCENT}</span><span class="s1">&#39;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">compare_caseless</span><span class="p">(</span><span class="n">single_char</span><span class="p">,</span> <span class="n">multiple_chars</span><span class="p">))</span>
</pre></div>
</div>
<p>This will print <code class="docutils literal notranslate"><span class="pre">True</span></code>.  (Why is <code class="xref py py-func docutils literal notranslate"><span class="pre">NFD()</span></code> invoked twice?  Because
there are a few characters that make <a class="reference internal" href="../library/stdtypes.html#str.casefold" title="str.casefold"><code class="xref py py-meth docutils literal notranslate"><span class="pre">casefold()</span></code></a> return a
non-normalized string, so the result needs to be normalized again. See
section 3.13 of the Unicode Standard for a discussion and an example.)</p>
</section>
<section id="unicode-regular-expressions">
<h3>Expressions rÃ©guliÃ¨res Unicode<a class="headerlink" href="#unicode-regular-expressions" title="Lien permanent vers ce titre">Â¶</a></h3>
<p>Les expressions rÃ©guliÃ¨res gÃ©rÃ©es par le module <a class="reference internal" href="../library/re.html#module-re" title="re: Regular expression operations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">re</span></code></a> peuvent Ãªtre fournies sous forme de chaÃ®ne d'octets ou de texte. Certaines sÃ©quences de caractÃ¨res spÃ©ciaux telles que <code class="docutils literal notranslate"><span class="pre">\d</span></code> et <code class="docutils literal notranslate"><span class="pre">\w</span></code> ont des significations diffÃ©rentes selon que le motif est fourni en octets ou en texte. Par exemple, <code class="docutils literal notranslate"><span class="pre">\d</span></code> correspond aux caractÃ¨res <code class="docutils literal notranslate"><span class="pre">[0-9]</span></code> en octets mais dans les chaÃ®nes de caractÃ¨res correspond Ã  tout caractÃ¨re de la catÃ©gorie <code class="docutils literal notranslate"><span class="pre">'Nd'</span></code>.</p>
<p>Dans cet exemple, la chaÃ®ne contient le nombre 57 Ã©crit en chiffres arabes et thaÃ¯landaisÂ :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\d+&#39;</span><span class="p">)</span>

<span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;Over </span><span class="se">\u0e55\u0e57</span><span class="s2"> 57 flavours&quot;</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">()))</span>
</pre></div>
</div>
<p>Une fois exÃ©cutÃ©, <code class="docutils literal notranslate"><span class="pre">\d+</span></code> correspond aux chiffres thaÃ¯landais et les affiche. Si vous fournissez le drapeau <a class="reference internal" href="../library/re.html#re.ASCII" title="re.ASCII"><code class="xref py py-const docutils literal notranslate"><span class="pre">re.ASCII</span></code></a> Ã  <a class="reference internal" href="../library/re.html#re.compile" title="re.compile"><code class="xref py py-func docutils literal notranslate"><span class="pre">compile()</span></code></a>, <code class="docutils literal notranslate"><span class="pre">\d+</span></code> correspond cette fois Ã  la chaÃ®ne &quot;57&quot;.</p>
<p>De mÃªme, <code class="docutils literal notranslate"><span class="pre">\w</span></code> correspond Ã  une grande variÃ©tÃ© de caractÃ¨res Unicode mais seulement <code class="docutils literal notranslate"><span class="pre">[a-zA-Z0-9_]</span></code> en octets (ou si <a class="reference internal" href="../library/re.html#re.ASCII" title="re.ASCII"><code class="xref py py-const docutils literal notranslate"><span class="pre">re.ASCII</span></code></a> est fourni) et <code class="docutils literal notranslate"><span class="pre">\s</span></code> correspond soit aux caractÃ¨res blancs Unicode soit aux caractÃ¨res <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">\t\n\r\f\v]</span></code>.</p>
</section>
<section id="id2">
<h3>RÃ©fÃ©rences<a class="headerlink" href="#id2" title="Lien permanent vers ce titre">Â¶</a></h3>
<p>Quelques bonnes discussions alternatives sur la gestion d'Unicode par Python sontÂ :</p>
<ul class="simple">
<li><p><a class="reference external" href="https://python-notes.curiousefficiency.org/en/latest/python3/text_file_processing.html">Processing Text Files in Python 3</a>, par Nick Coghlan.</p></li>
<li><p><a class="reference external" href="https://nedbatchelder.com/text/unipain.html">Pragmatic Unicode</a>, une prÃ©sentation <em>PyCon</em> 2012 par Ned Batchelder.</p></li>
</ul>
<p>Le type <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> est dÃ©crit dans la rÃ©fÃ©rence de la bibliothÃ¨que Python Ã  <a class="reference internal" href="../library/stdtypes.html#textseq"><span class="std std-ref">Type SÃ©quence de Texte â€” str</span></a>.</p>
<p>La documentation du module <a class="reference internal" href="../library/unicodedata.html#module-unicodedata" title="unicodedata: Access the Unicode Database."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unicodedata</span></code></a>.</p>
<p>La documentation du module <a class="reference internal" href="../library/codecs.html#module-codecs" title="codecs: Encode and decode data and streams."><code class="xref py py-mod docutils literal notranslate"><span class="pre">codecs</span></code></a>.</p>
<p>Marc-AndrÃ© Lemburg a donnÃ© une prÃ©sentation intitulÃ©e <a class="reference external" href="https://downloads.egenix.com/python/Unicode-EPC2002-Talk.pdf">Â«Â Python et UnicodeÂ Â» (diapositives PDF)</a> Ã  <em>EuroPython</em> 2002. Les diapositives sont un excellent aperÃ§u de la conception des fonctionnalitÃ©s Unicode de Python 2 (oÃ¹ le type de chaÃ®ne Unicode est appelÃ© <code class="docutils literal notranslate"><span class="pre">unicode</span></code> et les littÃ©raux commencent par <code class="docutils literal notranslate"><span class="pre">u</span></code>).</p>
</section>
</section>
<section id="reading-and-writing-unicode-data">
<h2>Lecture et Ã©criture de donnÃ©es Unicode<a class="headerlink" href="#reading-and-writing-unicode-data" title="Lien permanent vers ce titre">Â¶</a></h2>
<p>Une fois que vous avez Ã©crit du code qui fonctionne avec des donnÃ©es Unicode, le problÃ¨me suivant concerne les entrÃ©es/sorties. Comment obtenir des chaÃ®nes Unicode dans votre programme et comment convertir les chaÃ®nes Unicode dans une forme appropriÃ©e pour le stockage ou la transmissionÂ ?</p>
<p>Il est possible que vous n'ayez rien Ã  faire en fonction de vos sources d'entrÃ©e et des destinations de vos donnÃ©es de sortieÂ ; il convient de vÃ©rifier si les bibliothÃ¨ques utilisÃ©es dans votre application gÃ¨rent l'Unicode nativement. Par exemple, les analyseurs XML renvoient souvent des donnÃ©es Unicode. De nombreuses bases de donnÃ©es relationnelles prennent Ã©galement en charge les colonnes encodÃ©es en Unicode et peuvent renvoyer des valeurs Unicode Ã  partir d'une requÃªte SQL.</p>
<p>Les donnÃ©es Unicode sont gÃ©nÃ©ralement converties en un encodage particulier avant d'Ãªtre Ã©crites sur le disque ou envoyÃ©es sur un connecteur rÃ©seau. Il est possible de faire tout le travail vous-mÃªmeÂ : ouvrir un fichier, lire un Ã©lÃ©ment 8-bits, puis convertir les octets avec <code class="docutils literal notranslate"><span class="pre">bytes.decode(encoding)</span></code>. Cependant, l'approche manuelle n'est pas recommandÃ©e.</p>
<p>La nature multi-octets des encodages pose problÃ¨meÂ ; un caractÃ¨re Unicode peut Ãªtre reprÃ©sentÃ© par plusieurs octets. Si vous voulez lire le fichier par morceaux de taille arbitraire (disons 1024 ou 4096 octets), vous devez Ã©crire un code de gestion des erreurs pour dÃ©tecter le cas oÃ¹ une partie seulement des octets codant un seul caractÃ¨re Unicode est lue Ã  la fin d'un morceau. Une solution serait de lire le fichier entier en mÃ©moire et d'effectuer le dÃ©codage, mais cela vous empÃªche de travailler avec des fichiers extrÃªmement volumineuxÂ ; si vous avez besoin de lire un fichier de 2Â Gio, vous avez besoin de 2Â Gio de RAM (plus que Ã§a, en fait, puisque pendant un moment, vous aurez besoin d'avoir Ã  la fois la chaÃ®ne encodÃ©e et sa version Unicode en mÃ©moire).</p>
<p>La solution serait d'utiliser l'interface de dÃ©codage de bas-niveau pour intercepter le cas des sÃ©quences d'encodage incomplÃ¨tes. Ce travail d'implÃ©mentation a dÃ©jÃ  Ã©tÃ© fait pour vousÂ : la fonction native <a class="reference internal" href="../library/functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> peut renvoyer un objet de type fichier qui suppose que le contenu du fichier est dans un encodage spÃ©cifiÃ© et accepte les paramÃ¨tres Unicode pour des mÃ©thodes telles que <a class="reference internal" href="../library/io.html#io.TextIOBase.read" title="io.TextIOBase.read"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read()</span></code></a> et <a class="reference internal" href="../library/io.html#io.TextIOBase.write" title="io.TextIOBase.write"><code class="xref py py-meth docutils literal notranslate"><span class="pre">write()</span></code></a>. Ceci fonctionne grÃ¢ce aux paramÃ¨tres <em>encoding</em> et <em>errors</em> de <a class="reference internal" href="../library/functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> qui sont interprÃ©tÃ©s comme ceux de <a class="reference internal" href="../library/stdtypes.html#str.encode" title="str.encode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.encode()</span></code></a> et <a class="reference internal" href="../library/stdtypes.html#bytes.decode" title="bytes.decode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">bytes.decode()</span></code></a>.</p>
<p>Lire de l'Unicode Ã  partir d'un fichier est donc simpleÂ :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;unicode.txt&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
</pre></div>
</div>
<p>Il est Ã©galement possible d'ouvrir des fichiers en mode Â«Â mise Ã  jourÂ Â», permettant Ã  la fois la lecture et l'Ã©critureÂ :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w+&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\u4500</span><span class="s1"> blah blah blah</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()[:</span><span class="mi">1</span><span class="p">]))</span>
</pre></div>
</div>
<p>Le caractÃ¨re Unicode <code class="docutils literal notranslate"><span class="pre">U+FEFFF</span></code> est utilisÃ© comme marque pour indiquer le boutisme (c'est-Ã -dire l'ordre dans lequel les octets sont placÃ©s pour indiquer une valeur sur plusieurs octets, <em>byte-order mark</em> en anglais ou <em>BOM</em>), et est souvent Ã©crit en tÃªte (premier caractÃ¨re) d'un fichier afin d'aider Ã  l'auto-dÃ©tection du boutisme du fichier. Certains encodages, comme UTF-16, s'attendent Ã  ce qu'une <em>BOM</em> soit prÃ©sente au dÃ©but d'un fichierÂ ; lorsqu'un tel encodage est utilisÃ©, la <em>BOM</em> sera automatiquement Ã©crite comme premier caractÃ¨re et sera silencieusement retirÃ©e lorsque le fichier sera lu. Il existe des variantes de ces encodages, comme <code class="docutils literal notranslate"><span class="pre">utf-16-le</span></code> et <code class="docutils literal notranslate"><span class="pre">utf-16-be</span></code> pour les encodages petit-boutiste et gros-boutiste, qui spÃ©cifient un ordre d'octets donnÃ© et ne sautent pas la <em>BOM</em>.</p>
<p>Dans certains cas, il est Ã©galement d'usage d'utiliser une <em>BOM</em> au dÃ©but des fichiers encodÃ©s en UTF-8Â ; le nom est trompeur puisque l'UTF-8 ne dÃ©pend pas de l'ordre des octets. La marque annonce simplement que le fichier est encodÃ© en UTF-8. Pour lire ces fichiers, utilisez le codec <code class="docutils literal notranslate"><span class="pre">utf-8-sig</span></code> pour sauter automatiquement la marque si elle est prÃ©sente.</p>
<section id="unicode-filenames">
<h3>Noms de fichiers Unicode<a class="headerlink" href="#unicode-filenames" title="Lien permanent vers ce titre">Â¶</a></h3>
<p>La plupart des systÃ¨mes d'exploitation couramment utilisÃ©s aujourd'hui prennent en charge les noms de fichiers qui contiennent des caractÃ¨res Unicode arbitraires. Habituellement, ceci est implÃ©mentÃ© en convertissant la chaÃ®ne Unicode en un encodage qui varie en fonction du systÃ¨me. Aujourd'hui, Python converge vers l'utilisation d'UTF-8Â : Python sous MacOS utilise UTF-8 depuis plusieurs versions et Python 3.6 sous Windows est passÃ© Ã  UTF-8 Ã©galement. Sur les systÃ¨mes Unix, il n'y aura un <a class="reference internal" href="../glossary.html#term-filesystem-encoding-and-error-handler"><span class="xref std std-term">encodage pour le systÃ¨me de fichiers</span></a> que si vous avez dÃ©fini les variables d'environnement <code class="docutils literal notranslate"><span class="pre">LANG</span></code> ou <code class="docutils literal notranslate"><span class="pre">LC_CTYPE</span></code>Â ; sinon, l'encodage par dÃ©faut est UTF-8.</p>
<p>La fonction <a class="reference internal" href="../library/sys.html#sys.getfilesystemencoding" title="sys.getfilesystemencoding"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.getfilesystemencoding()</span></code></a> renvoie l'encodage Ã  utiliser sur votre systÃ¨me actuel, au cas oÃ¹ vous voudriez faire l'encodage manuellement, mais il n'y a pas vraiment de raisons de s'embÃªter avec Ã§a. Lors de l'ouverture d'un fichier pour la lecture ou l'Ã©criture, vous pouvez gÃ©nÃ©ralement simplement fournir la chaÃ®ne Unicode comme nom de fichier et elle est automatiquement convertie Ã  l'encodage qui convientÂ :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;filename</span><span class="se">\u4500</span><span class="s1">abc&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;blah</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Les fonctions du module <a class="reference internal" href="../library/os.html#module-os" title="os: Miscellaneous operating system interfaces."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code></a> telles que <a class="reference internal" href="../library/os.html#os.stat" title="os.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.stat()</span></code></a> acceptent Ã©galement les noms de fichiers Unicode.</p>
<p>La fonction <a class="reference internal" href="../library/os.html#os.listdir" title="os.listdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.listdir()</span></code></a> renvoie des noms de fichiers, ce qui soulÃ¨ve un problÃ¨meÂ : doit-elle renvoyer la version Unicode des noms de fichiers ou doit-elle renvoyer des chaÃ®nes d'octets contenant les versions encodÃ©esÂ ? <a class="reference internal" href="../library/os.html#os.listdir" title="os.listdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.listdir()</span></code></a> peut faire les deux, selon que vous fournissez le chemin du rÃ©pertoire en chaÃ®ne d'octets ou en chaÃ®ne Unicode. Si vous passez une chaÃ®ne Unicode comme chemin d'accÃ¨s, les noms de fichiers sont dÃ©codÃ©s en utilisant l'encodage du systÃ¨me de fichiers et une liste de chaÃ®nes Unicode est renvoyÃ©e, tandis que passer un chemin d'accÃ¨s en chaÃ®ne d'octets renvoie les noms de fichiers comme chaÃ®ne d'octets. Par exemple, en supposant que l'<a class="reference internal" href="../glossary.html#term-filesystem-encoding-and-error-handler"><span class="xref std std-term">encodage par dÃ©faut du systÃ¨me de fichiers</span></a> est UTF-8, exÃ©cuter le programme suivantÂ :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">fn</span> <span class="o">=</span> <span class="s1">&#39;filename</span><span class="se">\u4500</span><span class="s1">abc&#39;</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;.&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>produit la sortie suivanteÂ :</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python<span class="w"> </span>listdir-test.py
<span class="go">[b&#39;filename\xe4\x94\x80abc&#39;, ...]</span>
<span class="go">[&#39;filename\u4500abc&#39;, ...]</span>
</pre></div>
</div>
<p>La premiÃ¨re liste contient les noms de fichiers encodÃ©s en UTF-8 et la seconde contient les versions Unicode.</p>
<p>Notez que, dans la plupart des cas, il convient de vous en tenir Ã  l'utilisation d'Unicode avec ces <em>APIs</em>. Les <em>API</em> d'octets ne devraient Ãªtre utilisÃ©es que sur les systÃ¨mes oÃ¹ des noms de fichiers non dÃ©codables peuvent Ãªtre prÃ©sents. Cela ne concerne pratiquement que des systÃ¨mes Unix maintenant.</p>
</section>
<section id="tips-for-writing-unicode-aware-programs">
<h3>Conseils pour Ã©crire des programmes compatibles Unicode<a class="headerlink" href="#tips-for-writing-unicode-aware-programs" title="Lien permanent vers ce titre">Â¶</a></h3>
<p>Cette section fournit quelques suggestions sur l'Ã©criture de logiciels qui traitent de l'Unicode.</p>
<p>Le conseil le plus important estÂ :</p>
<blockquote>
<div><p>Il convient que le logiciel ne traite que des chaÃ®nes Unicode en interne, dÃ©codant les donnÃ©es d'entrÃ©e dÃ¨s que possible et encodant la sortie uniquement Ã  la fin.</p>
</div></blockquote>
<p>Si vous essayez d'Ã©crire des fonctions de traitement qui acceptent Ã  la fois les chaÃ®nes Unicode et les chaÃ®nes d'octets, les possibilitÃ©s d'occurrences de bogues dans votre programme augmentent partout oÃ¹ vous combinez les deux diffÃ©rents types de chaÃ®nes. Il n'y a pas d'encodage ou de dÃ©codage automatiqueÂ : si vous faites par exemple <code class="docutils literal notranslate"><span class="pre">str</span> <span class="pre">+</span> <span class="pre">octets</span></code>, une <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> est levÃ©e.</p>
<p>Lors de l'utilisation de donnÃ©es provenant d'un navigateur Web ou d'une autre source non fiable, une technique courante consiste Ã  vÃ©rifier la prÃ©sence de caractÃ¨res illÃ©gaux dans une chaÃ®ne de caractÃ¨res avant de l'utiliser pour gÃ©nÃ©rer une ligne de commande ou de la stocker dans une base de donnÃ©es. Si vous le faites, vÃ©rifiez bien la chaÃ®ne dÃ©codÃ©e, pas les donnÃ©es d'octets codÃ©sÂ ; certains encodages peuvent avoir des propriÃ©tÃ©s intÃ©ressantes, comme ne pas Ãªtre bijectifs ou ne pas Ãªtre entiÃ¨rement compatibles avec l'ASCII. C'est particuliÃ¨rement vrai si l'encodage est spÃ©cifiÃ© explicitement dans vos donnÃ©es d'entrÃ©e, car l'attaquant peut alors choisir un moyen intelligent de cacher du texte malveillant dans le flux de donnÃ©es encodÃ©.</p>
<section id="converting-between-file-encodings">
<h4>Conversion entre les encodages de fichiers<a class="headerlink" href="#converting-between-file-encodings" title="Lien permanent vers ce titre">Â¶</a></h4>
<p>La classe <a class="reference internal" href="../library/codecs.html#codecs.StreamRecoder" title="codecs.StreamRecoder"><code class="xref py py-class docutils literal notranslate"><span class="pre">StreamRecoder</span></code></a> peut convertir de maniÃ¨re transparente entre les encodagesÂ : prenant un flux qui renvoie des donnÃ©es dans l'encodage #1, elle se comporte comme un flux qui renvoie des donnÃ©es dans l'encodage #2.</p>
<p>Par exemple, si vous avez un fichier d'entrÃ©e <em>f</em> qui est en Latin-1, vous pouvez l'encapsuler dans un <a class="reference internal" href="../library/codecs.html#codecs.StreamRecoder" title="codecs.StreamRecoder"><code class="xref py py-class docutils literal notranslate"><span class="pre">StreamRecoder</span></code></a> pour qu'il renvoie des octets encodÃ©s en UTF-8Â :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">new_f</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">StreamRecoder</span><span class="p">(</span><span class="n">f</span><span class="p">,</span>
    <span class="c1"># en/decoder: used by read() to encode its results and</span>
    <span class="c1"># by write() to decode its input.</span>
    <span class="n">codecs</span><span class="o">.</span><span class="n">getencoder</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">),</span> <span class="n">codecs</span><span class="o">.</span><span class="n">getdecoder</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">),</span>

    <span class="c1"># reader/writer: used to read and write to the stream.</span>
    <span class="n">codecs</span><span class="o">.</span><span class="n">getreader</span><span class="p">(</span><span class="s1">&#39;latin-1&#39;</span><span class="p">),</span> <span class="n">codecs</span><span class="o">.</span><span class="n">getwriter</span><span class="p">(</span><span class="s1">&#39;latin-1&#39;</span><span class="p">)</span> <span class="p">)</span>
</pre></div>
</div>
</section>
<section id="files-in-an-unknown-encoding">
<h4>Fichiers dans un encodage inconnu<a class="headerlink" href="#files-in-an-unknown-encoding" title="Lien permanent vers ce titre">Â¶</a></h4>
<p>Vous avez besoin de modifier un fichier, mais vous ne connaissez pas son encodageÂ ? Si vous savez que l'encodage est compatible ASCII et que vous voulez seulement examiner ou modifier les parties ASCII, vous pouvez ouvrir le fichier avec le gestionnaire d'erreurs <code class="docutils literal notranslate"><span class="pre">surrogateescape</span></code>Â :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;ascii&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;surrogateescape&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="c1"># make changes to the string &#39;data&#39;</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span> <span class="o">+</span> <span class="s1">&#39;.new&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span>
          <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;ascii&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;surrogateescape&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>Le gestionnaire d'erreurs <code class="docutils literal notranslate"><span class="pre">surrogateescape</span></code> dÃ©code tous les octets non-ASCII comme points de code dans une plage spÃ©ciale allant de <code class="docutils literal notranslate"><span class="pre">U+DC80</span></code> Ã  <code class="docutils literal notranslate"><span class="pre">U+DCFF</span></code>. Ces points de code redeviennent alors les mÃªmes octets lorsque le gestionnaire d'erreurs <code class="docutils literal notranslate"><span class="pre">surrogateescape</span></code> est utilisÃ© pour encoder les donnÃ©es et les rÃ©Ã©crire.</p>
</section>
</section>
<section id="id3">
<h3>RÃ©fÃ©rences<a class="headerlink" href="#id3" title="Lien permanent vers ce titre">Â¶</a></h3>
<p>Une partie de la confÃ©rence <a class="reference external" href="https://pyvideo.org/video/289/pycon-2010--mastering-python-3-i-o">Mastering Python 3 Input/Output</a> (ressource en anglais), donnÃ©e lors de <em>PyCon</em> 2010 de David Beazley, parle du traitement de texte et du traitement des donnÃ©es binaires.</p>
<p>Le <a class="reference external" href="https://downloads.egenix.com/python/LSM2005-Developing-Unicode-aware-applications-in-Python.pdf">PDF du diaporama de la prÃ©sentation de Marc-AndrÃ© Lemburg &quot;Writing Unicodeaware Applications in Python&quot;</a> (ressource en anglais) traite des questions d'encodage de caractÃ¨res ainsi que de l'internationalisation et de la localisation d'une application. Ces diapositives ne couvrent que Python 2.x.</p>
<p><a class="reference external" href="https://pyvideo.org/video/1768/the-guts-of-unicode-in-python">The Guts of Unicode in Python</a> (ressource en anglais) est une confÃ©rence <em>PyCon</em> 2013 donnÃ©e par Benjamin Peterson qui traite de la reprÃ©sentation interne Unicode en Python 3.3.</p>
</section>
</section>
<section id="acknowledgements">
<h2>Remerciements<a class="headerlink" href="#acknowledgements" title="Lien permanent vers ce titre">Â¶</a></h2>
<p>La premiÃ¨re Ã©bauche de ce document a Ã©tÃ© rÃ©digÃ©e par Andrew Kuchling. Il a depuis Ã©tÃ© rÃ©visÃ© par Alexander Belopolsky, Georg Brandl, Andrew Kuchling et Ezio Melotti.</p>
<p>Merci aux personnes suivantes qui ont notÃ© des erreurs ou qui ont fait des suggestions sur cet articleÂ : Ã‰ric Araujo, Nicholas Bastin, Nick Coghlan, Marius Gedminas, Kent Johnson, Ken Krugler, Marc-AndrÃ© Lemburg, Martin von LÃ¶wis, Terry J. Reedy, Serhiy Storchaka, Eryk Sun, Chad Whitacre, Graham Wideman.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../contents.html">Table des matiÃ¨res</a></h3>
    <ul>
<li><a class="reference internal" href="#">Guide Unicode</a><ul>
<li><a class="reference internal" href="#introduction-to-unicode">Introduction Ã  Unicode</a><ul>
<li><a class="reference internal" href="#definitions">DÃ©finitions</a></li>
<li><a class="reference internal" href="#encodings">Encodages</a></li>
<li><a class="reference internal" href="#references">RÃ©fÃ©rences</a></li>
</ul>
</li>
<li><a class="reference internal" href="#python-s-unicode-support">Prise en charge Unicode de Python</a><ul>
<li><a class="reference internal" href="#the-string-type">Le type <em>String</em></a></li>
<li><a class="reference internal" href="#converting-to-bytes">Conversion en octets</a></li>
<li><a class="reference internal" href="#unicode-literals-in-python-source-code">LittÃ©raux Unicode dans le code source Python</a></li>
<li><a class="reference internal" href="#unicode-properties">PropriÃ©tÃ©s Unicode</a></li>
<li><a class="reference internal" href="#comparing-strings">Comparaison de chaÃ®nes de caractÃ¨res</a></li>
<li><a class="reference internal" href="#unicode-regular-expressions">Expressions rÃ©guliÃ¨res Unicode</a></li>
<li><a class="reference internal" href="#id2">RÃ©fÃ©rences</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reading-and-writing-unicode-data">Lecture et Ã©criture de donnÃ©es Unicode</a><ul>
<li><a class="reference internal" href="#unicode-filenames">Noms de fichiers Unicode</a></li>
<li><a class="reference internal" href="#tips-for-writing-unicode-aware-programs">Conseils pour Ã©crire des programmes compatibles Unicode</a><ul>
<li><a class="reference internal" href="#converting-between-file-encodings">Conversion entre les encodages de fichiers</a></li>
<li><a class="reference internal" href="#files-in-an-unknown-encoding">Fichiers dans un encodage inconnu</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id3">RÃ©fÃ©rences</a></li>
</ul>
</li>
<li><a class="reference internal" href="#acknowledgements">Remerciements</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Sujet prÃ©cÃ©dent</h4>
    <p class="topless"><a href="sorting.html"
                          title="Chapitre prÃ©cÃ©dent">Guide pour le tri</a></p>
  </div>
  <div>
    <h4>Sujet suivant</h4>
    <p class="topless"><a href="urllib2.html"
                          title="Chapitre suivant">Guide pratiqueÂ : rÃ©cupÃ©rer des ressources web en utilisant le module <em>urllib</em></a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Signalement de bogue</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/main/Doc/howto/unicode.rst"
            rel="nofollow">Voir la source
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index gÃ©nÃ©ral"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Index des modules Python"
             >modules</a> |</li>
        <li class="right" >
          <a href="urllib2.html" title="Guide pratique : rÃ©cupÃ©rer des ressources web en utilisant le module urllib"
             >suivant</a> |</li>
        <li class="right" >
          <a href="sorting.html" title="Guide pour le tri"
             >prÃ©cÃ©dent</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.12.0 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Les HOWTOs de Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Guide Unicode</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Recherche rapide" aria-label="Recherche rapide" type="search" name="q" id="search-box" />
          <input type="submit" value="Go" />
        </form>
    </div>
                     |
                </li>
            <li class="right">
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label> |</li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 2001-2023, Python Software Foundation.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    See <a href="/license.html">History and License</a> for more information.<br />
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    Mis Ã  jour le oct. 26, 2023.
    <a href="/bugs.html">Found a bug</a>?
    <br />

    CrÃ©Ã© en utilisant <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>

  </body>
</html>